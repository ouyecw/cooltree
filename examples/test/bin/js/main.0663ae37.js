!function(i){var s={};function n(t){if(s[t])return s[t].exports;var e=s[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=i,n.c=s,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";var a=i(2);function s(t){t.target.removeEventListener(a.Loader.LOAD_COMPLETE),a.Stage.current.removeAllChildren(!0),a.AssetManager.addFiles(t.params);var e=a.Factory.c("do");e.setInstance(a.AssetManager.getSource(a.Loader.getName("img/tu.png"))),a.Stage.current.addChild(e);var i=new a.Button,s=a.Factory.c("bs",["#ff88ff",120,40,3]);i.instance=s,i.setup([a.Factory.c("ef",[a.Effect.COLOR,"#ff88ff",.5])],[a.Factory.c("ef",[a.Effect.COLOR,"#ff8800",1])],[a.Factory.c("ef",[a.Effect.COLOR,"#ff5555",1])]),a.Stage.current.addChild(i),i.moveTo(180,a.Stage.current.stageHeight-65),i.setLabel({text:"NEW",size:26,color:"#FFFFFF",x:25},"#000000"),i.addEventListener(a.StageEvent.MOUSE_CLICK,n)}function n(t){var e=a.ObjectUtil.getLabels(a.MovieManager._dic.Zombie_ladder),i=e.length,s=e[a.MathUtil.randomInt(i)];trace(">>",s);var n=a.MovieManager.getInstance(s,"Zombie_ladder");a.Stage.current.addChildAt(n,1),n.moveTo(a.MathUtil.randomInt(a.Stage.current.stageWidth-80),a.MathUtil.randomInt(a.Stage.current.stageHeight-80)),n.scale=a.MathUtil.clamp(Math.random(),.4,1)}window.onload=function(){a.Global.useCanvas=!0;var t=new a.Stage;t.div=document.getElementById("stage"),t.initCanvas(500,600);var e=new a.LoadingClip("assets/img/buffer.png");e.moveTo(.5*t.stageWidth,.5*t.stageHeight),t.addChild(e);var i=new a.Loader;i.addEventListener(a.Loader.LOAD_COMPLETE,s),i.load(["assets/img/tu.png","assets/img/anim.png","assets/img/anim.json"])}},function(t,e){function n(t){if(a[t])return a[t].exports;var e=a[t]={i:t,l:!1,exports:{}};return s[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var s,a;t.exports=(a={},n.m=s=[function(t,e,s){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var a=(n(d,[{key:"countLeftSpace",value:function(t){for(var e,s=0;s<t.length;s++)if(32<(e=t.charCodeAt(s))&&160!=e&&12288!=e)return s;return i}},{key:"ltrim",value:function(t){if(null==t)return"";for(var e,i=0;i<t.length;i++)if(32<(e=t.charCodeAt(i))&&160!=e&&12288!=e)return t.substring(i);return""}},{key:"rtrim",value:function(t){if(null==t)return"";for(var e,i=t.length;0<i;i--)if(32<(e=t.charCodeAt(i-1))&&160!=e&&12288!=e)return t.substring(0,i);return""}},{key:"trim",value:function(t){return null==t?"":d.ltrim(d.rtrim(t))}},{key:"isEmpty",value:function(t){return null==t||null==t||"undefined"==t||"null"==t||0==(t=d.trim(""+t)).length}},{key:"substitute",value:function(t,e){if(d.isEmpty(t)||null==e||!(e instanceof Array)||0==e.length)return t;for(var i=0;i<e.length;i++)t=t.replace(new RegExp("\\{"+i+"\\}","g"),e[i]);return t}},{key:"countToString",value:function(t,e){var i=String(t).length-String(e).length;return(""+e).padStart(i,"0")}},{key:"toArray",value:function(t,e){if(d.isEmpty(t))return[];if(t.length<=e)return[t];for(var i=[];t.length>e;)i.push(t.slice(0,e)),t=t.slice(e);return d.isEmpty(t)||i.push(t),i}},{key:"validateEmail",value:function(t){return/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(t)}},{key:"replace",value:function(t,e,i){return d.isEmpty(t)?"":(""+t).split(e).join(i)}},{key:"remove",value:function(t,e){return d.replace(t,e,"")}},{key:"replaceAll",value:function(t,e,i){if(null==e||null==i)return t;for(var s=void 0,n=Math.min(e.length,i.length),s=0;s<n;s++)t=d.replace(t,e[s],i[s]);return t}},{key:"exist",value:function(t){if(arguments.length<=1||d.isEmpty(t))return!1;for(var e,i=void 0,s=arguments.length,i=1;i<s;i++)if(!d.isEmpty(e=arguments[i])&&-1!=t.indexOf(e))return!0;return!1}},{key:"getNumber",value:function(t){if(d.isEmpty(t))return[""];for(var e="",i=t.length,s=t.substr(--i,1);!isNaN(parseInt(s))&&1<=i;)e=s+e,s=t.substr(--i,1);return d.isEmpty(e)?[t]:[d.rtrim(t.slice(0,++i)),Number(e)]}},{key:"getPathExt",value:function(t){var e=t.split(".");return e[e.length-1].split("?")[0].toLowerCase()}},{key:"getBase64Type",value:function(t){if(d.isEmpty(t))return"";var e=t.indexOf("/")+1,i=t.indexOf(";");return e<0||i<0||i<=e?"":t.substring(e,i).toLowerCase()}},{key:"getFileName",value:function(t,e){e=e||2;var i=(i=t.replace(/%20/g," ")).split("?")[0],s=/(.*[\\\/])?(.+)(\.[\w]{1,4})/.exec(i);return s&&4==s.length?s[e]:""}},{key:"escapeXML",value:function(t){for(var e=(e=t).replace(/&/gi,"&amp;");-1!=e.indexOf("<");)e=e.replace("<","&lt;");for(;-1!=e.indexOf(">");)e=e.replace(">","&gt;");return e}},{key:"htmlEncode",value:function(t){return t=d.replace(t,"&","&amp;"),t=d.replace(t,'"',"&quot;"),t=d.replace(t,"'","&apos;"),t=d.replace(t,"<","&lt;"),d.replace(t,">","&gt;")}},{key:"htmlDecode",value:function(t){return t=d.replace(t,"&amp;","&"),t=d.replace(t,"&quot;",'"'),t=d.replace(t,"&apos;","'"),t=d.replace(t,"&lt;","<"),d.replace(t,"&gt;",">")}},{key:"formatTime",value:function(t,e,i){e=e||0,i=i||":",t=Math.max(0,MathUtil.int(t));var s=String(t%60),n=String(MathUtil.int(t/60)%60),a=String(MathUtil.int(t/3600)%60);return s.length<2&&(s="0"+s),n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),3==e?s:2==e?n+i+s:1==e?a+i+n:a+i+n+i+s}},{key:"parseParams",value:function(t,e,i){var s=1<arguments.length&&void 0!==e&&e,n=!(2<arguments.length&&void 0!==i)||i;if(d.isEmpty(t))return{};for(var a=void 0,r=void 0,o=void 0,l=t.split(s?";":"&"),h={},u=n?decodeURIComponent:unescape,a=0,c=l.length;a<c;a++)o=l[a],d.isEmpty(o)||!s&&o.indexOf("=")<0||s&&o.indexOf(":")<0||(o=o.split(s?":":"="),r=d.trim(o[0]),s&&r&&0<r.indexOf("-")&&(r=d.decodeName(r)),h[r]=o.length<2||d.isEmpty(o[1])?null:u(d.trim(o[1])));return h}},{key:"decodeName",value:function(t){if(d.isEmpty(t))return"";for(var e=void 0,i=void 0,s=t.toLowerCase().split(/-/),e=1,n=s.length;e<n;e++)i=s[e],d.isEmpty(i)||(s[e]=i.substring(0,1).toUpperCase()+i.substring(1));return s.join("")}},{key:"encodeName",value:function(t){return d.isEmpty(t)?"":t.split(/(?=[A-Z])/).join("-").toLowerCase()}},{key:"buildParams",value:function(t,e,i){var s=1<arguments.length&&void 0!==e&&e,n=!(2<arguments.length&&void 0!==i)||i;if(null==t)return"";var a=void 0,r=!1,o="",l=n?encodeURIComponent:escape;for(a in t)r&&(o+=s?";":"&"),!d.isEmpty(a)&&t[a]&&(o+=s?d.encodeName(a)+":"+t[a]:a+"="+(0==n?t[a]:l(t[a])),r=!0);return r?o:""}},{key:"html2object",value:function(t){var e=void 0;if("string"==typeof t){if(d.isEmpty(t))return null;(e=document.createElement("div")).innerHTML=t,e=e.getElementsByTagName("*")[0]}else e=t;if(!e||1!=e.nodeType)return null;var i={};i.tagName=e.nodeName.toLowerCase();var s=(e.textContent||"").replace(/(\r|\n)/g,"").replace(/^\s+|\s+$/g,"");if(s&&1==e.childNodes.length&&(i.text=s),0<e.attributes.length)for(var n=0;n<e.attributes.length;n++){var a=e.attributes.item(n),r=a.nodeName,o=a.nodeValue;i[r]=isNaN(o)?o:Number(o),"style"==r.toLowerCase()&&(i[r]=d.parseParams(i[r],!0))}if(0<e.childNodes.length){for(var l=[],h=0;h<e.childNodes.length;h++){var u=u.childNodes.item(h),c=d.html2object(u);c&&l.push(c)}0<l.length&&(i.children=l)}return i}},{key:"toUniqueChar",value:function(t){if(d.isEmpty(t))return"";for(var e,i="",s=0,n=t.length;s<n;s++)e=t.charAt(s),i.indexOf(e)<0&&(i+=e);return i}},{key:"html2text",value:function(t){if(!d.isEmpty(t)){var e=t;return"string"==typeof t&&((e=document.createElement("div")).innerHTML=t),d._get_string_by_node(e,"")}}},{key:"_get_string_by_node",value:function(t,e){if(null==t)return e;var i=t.firstElementChild,s=String(t.textContent||t.innerText||"");if(e+=s,null==i||!d.isEmpty(s))return e;for(;i;)i.childElementCount&&0<i.childElementCount?e=d._get_string_by_node(i,e):e+=String(i.textContent||i.data||i.value||i.innerText||""),i=i.nextSibling;return e}},{key:"utf16to8",value:function(t){for(var e,i="",s=void 0,n=t.length,s=0;s<n;s++)1<=(e=t.charCodeAt(s))&&e<=127?i+=t.charAt(s):(2047<e?(i+=String.fromCharCode(224|e>>12&15),i+=String.fromCharCode(128|e>>6&63)):i+=String.fromCharCode(192|e>>6&31),i+=String.fromCharCode(128|e>>0&63));return i}},{key:"utf8to16",value:function(t){for(var e,i,s="",n=0,a=t.length,r=void 0;n<a;)switch((e=t.charCodeAt(n++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=t.charAt(n-1);break;case 12:case 13:r=t.charCodeAt(n++),s+=String.fromCharCode((31&e)<<6|63&r);break;case 14:r=t.charCodeAt(n++),i=t.charCodeAt(n++),s+=String.fromCharCode((15&e)<<12|(63&r)<<6|(63&i)<<0)}return s}}]),d);function d(){!function(t){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this)}e.default=a},function(t,g,m){"use strict";(function(t){Object.defineProperty(g,"__esModule",{value:!0});function e(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var i=d(m(38)),s=d(m(49)),n=d(m(0)),a=d(m(50)),r=d(m(29)),o=d(m(39)),l=d(m(13)),h=d(m(2)),u=d(m(51)),c=d(m(22));function d(t){return t&&t.__esModule?t:{default:t}}var _,f,p,v=(_=y,p=[{key:"setup",value:function(t){var e;n.default.isEmpty(t)||(0<(t=t.toLowerCase()).indexOf(i.default.OS_IPHONE)?(y.os=i.default.OS_IPHONE,y.ios=!0):0<t.indexOf(i.default.OS_IPOD)?(y.os=i.default.OS_IPOD,y.ios=!0):0<t.indexOf(i.default.OS_IPAD)?(y.os=i.default.OS_IPAD,y.ios=!0):0<t.indexOf(i.default.OS_ANDROID)?(y.os=i.default.OS_ANDROID,y.android=!0,y.isBrokenAndroid=null!==t.match(/android 2\.[12]/)):0<t.indexOf(i.default.OS_WINDOWS_PHONE)?y.os=i.default.OS_WINDOWS_PHONE:0<t.indexOf(i.default.OS_BLACK_BERRY)&&(y.os=i.default.OS_BLACK_BERRY),y.isPC=y.os==i.default.OS_PC,y.isQQBrowser=/qqbrowser/i.test(t),y.isWebKit=/webkit/i.test(t),y.isOpera=/opera/i.test(t),y.isIE=/msie/i.test(t),y.isFirefox=/firefox/i.test(t),y.isChrome=/chrome/i.test(t),y.isSafari=/safari/i.test(t)&&!y.isChrome,y.isWeixin="micromessenger"==t.match(/MicroMessenger/i),y.cssPrefix=y.isWebKit?"webkit":y.isFirefox?"Moz":y.isOpera?"o":y.isIE?"ms":"",y.supportStorage="localStorage"in y.root,y.supportOrientation="orientation"in y.root,y.supportDeviceMotion="ondevicemotion"in y.root,y.supportTouch="ontouchstart"in y.root,y.pixelRatio=y.root.devicePixelRatio,y.canUseWebAudio=y.root.AudioContext||y.root[y.cssPrefix+"AudioContext"],(y.animationFrame=y.root.requestAnimationFrame||y.root[y.cssPrefix+"RequestAnimationFrame"])&&(y.animationFrame=y.root[y.animationFrame.name].bind(y.root)),y.supportCanvas=null!=document.createElement("canvas").getContext,y.useCanvas=y.supportCanvas,e=document.createElement("div"),y.supportTransform=null!=e.style[y.cssPrefix+"Transform"],y.supportSVG=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,y.language=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||"",n.default.isEmpty(y.language)||(a.default.language=a.default.format(y.language)),y.version=s.default.auto(new Date(1600305683858)),console.log("[COOLTREE VERSION]",y.version),r.default.INIT_CLASS(),o.default.INIT_CLASS())}},{key:"reszie",value:function(t,e){y.width=Math.floor(t),y.height=Math.floor(e),c.default.current&&(c.default.current.size(t,e),c.default.current.auto_fresh=!0)}},{key:"getScreenWidth",value:function(){return y.root.screen.width}},{key:"getScreenHeight",value:function(){return y.root.screen.height}},{key:"GetQueryString",value:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=y.root.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null}},{key:"trace",value:function(){if(y.debug){for(var t="",e=void 0,e=0;e<arguments.length;e++)t+=arguments[e]+" ";n.default.isEmpty(t)||(null==console||"function"!=typeof console.log||y.htmlDebug?(null==y.output&&((y.output=document.createElement("div")).id="global_output",y.output.style.position="absolute",y.output.style.zIndex=y.layer+10,y.output.style.height=Math.ceil(.5*(y.canvas?y.canvas.height:y.root.innerHeight))+"px",y.output.style.width=Math.ceil(.5*(y.canvas?y.canvas.width:y.root.innerWidth))+"px",y.output.style.fontSize=y.fontSize+"px",y.output.style.color="#880000",y.output.style.left="3px"),null==y.output_list&&(y.output_list=[]),y.output_list.push("<br>"+t+"</br>"),12<y.output_list.length&&y.output_list.shift(),y.output.innerHTML=y.output_list.join(" "),null==y.output.parentNode&&(y.div?y.div.appendChild(y.output):document.body.appendChild(y.output))):console.log.apply(console,arguments))}}},{key:"proxy",value:function(t,e,i,s){t[i]=function(){return e[i].apply(e,arguments)||t},s&&(t[s]=t[i])}},{key:"delegate",value:function(e,t){var i=t||y.root;if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.concat.apply(s,arguments);return e.apply(i,t)}}return function(){return e.apply(i,arguments)}}},{key:"delegate2",value:function(i,t){var s=t||y.root,n=2<arguments.length?Array.prototype.slice.call(arguments,2):[];return function(){for(var t=n.slice(),e=arguments.length-1;0<=e;e--)t.unshift(arguments[e]);return t.push(this),i.apply(s,t)}}},{key:"gc",value:function(t){var e=l.default.getQualifiedClassName(t);return!(y._gc_list.indexOf(e)<0)&&h.default.remove(t)}},{key:"local",get:function(){return y.__local?y.__local:y.__local=new u.default}},{key:"root",get:function(){if(y.__root)return y.__root;if("undefined"!=typeof self)return y.__root=self;if("undefined"!=typeof window)return y.__root=window;if(void 0!==t)return y.__root=t;throw new Error("unable to locate global object")}}],(f=null)&&e(_.prototype,f),p&&e(_,p),y);function y(){!function(t){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this)}(g.default=v)._gc_list=["StageEvent","Shape","DisplayObjectContainer","Graphics","DisplayObject","DOMDisplay","MovieClip","DOMMovie","BoxShape"],v.__local=v.__local_cache=v.__root=v.canvas=v.context=null,v.version="",v.layer=5,v.debug=!0,v.os=i.default.OS_PC,v.ios=!1,v.android=!1,v.isBrokenAndroid=!1,v.isIE=!1,v.isFirefox=!1,v.isOpera=!1,v.isWebKit=!1,v.isChrome=!1,v.isSafari=!1,v.isQQBrowser=!1,v.aspectRatio=i.default.NONE,v.font="Helvetica,Arial",v.supportSVG=!1,v.supportTouch=!1,v.supportCanvas=!1,v.supportStorage=!1,v.supportOrientation=!1,v.supportDeviceMotion=!1,v.supportTransform=!1,v.cssPrefix="",v.htmlDebug=!1,v.breakTouch=!1,v.language,v.div,v.fontSize=8,v.useCanvas=!0,v.width=0,v.height=0,v.position="absolute",v.autoShapeSize=!0,v.canUseWebAudio=!1,v.isWeixin=!1,v.useCache=!0,v.isPC=!0,v.animationFrame=null,v.pixelRatio=1,v.crossdomain="anonymous",v.className="Global",v.setup(navigator.userAgent),v.root&&null==v.root.trace&&(v.root.trace=v.trace)}).call(this,m(77))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=r(i(0)),a=r(i(13));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var l,h,u,c=(l=d,u=[{key:"create",value:function(t,e){if(!t)return null;var i=a.default.getQualifiedClassName(t),s=void 0,n=d._dic[i];return n&&n.length?(s=n.pop(),0==n.length&&delete d._dic[i],s&&e&&e instanceof Array&&s.reset&&"function"==typeof s.reset&&s.reset.apply(s,o(e))):s=new(e&&e instanceof Array?Function.prototype.bind.apply(t,[null].concat(o(e))):t),s}},{key:"length",value:function(t){var e="string"==typeof t?t:a.default.getQualifiedClassName(t),i=d._dic[e];return i?i.length:0}},{key:"remove",value:function(t){if(null!=t){var e=void 0,i=a.default.getQualifiedClassName(t);d._dic[i]||(d._dic[i]=[]),t.hasOwnProperty("name")&&!n.default.isEmpty(t.name)&&((e=(e=t.name).split("_")).pop(),9e5<d.COUNT?d.COUNT=0:d.COUNT++,e.push("pool"+d.COUNT),e=e.join("_"));try{t.reset()}catch(e){return t.dispose(),!1}if(0<d.max&&d._dic[i].length>=d.max){try{t.dispose()}catch(e){}return t=null,!1}return-1==d._dic[i].indexOf(t)&&(n.default.isEmpty(e)||(t.name=e),d._dic[i].push(t)),!0}}},{key:"clear",value:function(t){var e;null==t?d._dic={}:(e=a.default.getQualifiedClassName(t),delete d._dic[e])}},{key:"getInfo",value:function(){var t=void 0,e="[";for(t in d._dic)e+=t+":"+d._dic[t].length+"; ";return e+"]"}}],(h=null)&&s(l.prototype,h),u&&s(l,u),d);function d(){!function(t){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this)}(e.default=c).max=50,c._dic={},c.COUNT=0},function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var n=(s(o,[{key:"countTreeMax",value:function(t,e,i){var s,n=void 0,a=t.length,r=0<a?1:0;for(i=null==i?r:i,n=0;n<a;n++)(s=null==e?t[n]:t[n][e])&&s instanceof Array&&0<s.length&&(r=Math.max(r,i+o.countTreeMax(s,e,i)));return r}},{key:"sort",value:function(t,e){if(!(null==t||t.length<2)){for(var i,s,n,a=void 0,r=0;r<t.length-1;r++){a=!1;for(var o=0;o<t.length-1;o++)i=t[o],s=t[o+1],(e?e(i,s):s<i)&&(n=t[o+1],t[o+1]=t[o],t[o]=n,a=!0);if(!a)return t}return t}}},{key:"int",value:function(t){return"string"==typeof t?parseInt(t):.5+t<<0}},{key:"format",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:3;return Number(Number(t).toFixed(i))}},{key:"randomInt",value:function(t){return o.int((t=t||100)*Math.random())}},{key:"clamp",value:function(t,e,i){return t<e?e:t>Math.max(i,e)?i:t}},{key:"getDegreesFromRadians",value:function(t){return 180*t/Math.PI}},{key:"getRadiansFromDegrees",value:function(t){return t%360/180*Math.PI}},{key:"getAngle",value:function(t,e,i,s){var n=Math.atan2(s-e,i-t);return n<0?n+2*Math.PI:n}},{key:"normalizeRadian",value:function(t){return(t=(t+Math.PI)%(2*Math.PI))+(0<t?-Math.PI:Math.PI)}},{key:"isEquivalent",value:function(t,e){return t-1e-4<e&&e<t+1e-4}},{key:"getSizeScale",value:function(t,e,i,s,n){var a=t/e,r=i/s;return((n=null==n||n)?r<a:a<r)?o.format(i/t,3):o.format(s/e,3)}},{key:"isNumber",value:function(t){return"number"==typeof t&&!isNaN(t)}},{key:"sin",value:function(t){var e=Math.floor(t),i=e+1,s=o.sinInt(e);return(t-e)*o.sinInt(i)+(i-t)*s}},{key:"sinInt",value:function(t){return(t%=360)<0&&(t+=360),t<90?o._sin_map[t]:t<180?o._cos_map[t-90]:t<270?-o._sin_map[t-180]:-o._cos_map[t-270]}},{key:"cos",value:function(t){var e=Math.floor(t),i=e+1,s=o.cosInt(e);return(t-e)*o.cosInt(i)+(i-t)*s}},{key:"cosInt",value:function(t){return(t%=360)<0&&(t+=360),t<90?o._cos_map[t]:t<180?-o._sin_map[t-90]:t<270?-o._cos_map[t-180]:o._sin_map[t-270]}}]),o);function o(){!function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this)}(e.default=n)._sin_map={},n._cos_map={};for(var a=0;a<=90;a++)n._sin_map[a]=Math.sin(n.getRadiansFromDegrees(a)),n._cos_map[a]=Math.cos(n.getRadiansFromDegrees(a))},function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var n=(s(a.prototype,[{key:"clone",value:function(){return new a(this.type,this.params,this.label,this.target)}},{key:"reset",value:function(t,e,i,s){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==e?e:null,r=2<arguments.length&&void 0!==i?i:null,o=3<arguments.length&&void 0!==s?s:null;this.type=n,this.label=r,this.params=a,this.target=o}},{key:"dispose",value:function(){delete this.type,this.target,this.params,this.label}},{key:"toString",value:function(){return this.label.toString()}}]),a);function a(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.type=t,this.label=i,this.params=e,this.target=s}(e.default=n).className="Event",n.PLAY_OVER="play_over",n.COMPLETE="complete",n.RESIZE="resize",n.ERROR="error",n.CLOSE="close",n.INIT="init"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=p(i(1)),a=p(i(14)),o=p(i(12)),l=p(i(10)),h=p(i(16)),u=p(i(11)),c=p(i(23)),d=p(i(2)),_=p(i(0)),f=p(i(25));function p(t){return t&&t.__esModule?t:{default:t}}var v,y,g,m=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(b,o.default),v=b,(y=[{key:"_update_parent_alpha",value:function(){if(!(this._children.length<1))for(var t=void 0,e=void 0,t=0,i=this._children.length;t<i;t++)(e=this._children[t])._parent_alpha=this._alpha*this._parent_alpha,e instanceof b&&e._update_parent_alpha()}},{key:"_update_child_visible",value:function(){for(var t=void 0,e=void 0,t=0,i=this._children.length;t<i;t++)(e=this._children[t])instanceof b?e._update_child_visible():e instanceof a.default&&e._update_visible()}},{key:"addChild",value:function(t){if(!(null==t||!t instanceof o.default))return this.addChildAt(t,this._children.length)}},{key:"addChildAt",value:function(t,e){if(!(null==t||!t instanceof o.default))return t.parent&&t.parent.removeChild(t),this._children.splice(e,0,t),t instanceof h.default?b._num_canvas_target++:t.parentNode=this._parentNode,t.stage=this.stage,t.parent=this,t.updateMatrix=!0,t._parent_alpha=this._alpha*this._parent_alpha,this.autoSize?this._updateSize():(this.width=Math.max(this.width,t.getWidth()),this.height=Math.max(this.height,t.getHeight())),t}},{key:"_updateSize",value:function(){if(null!=this._children&&0!=this._children.length){for(var t,e=void 0,i=d.default.create(l.default),e=0,s=this._children.length;e<s;e++)t=this._children[e].getBounds(this),i=i.union(t);this._minX=Math.floor(i.x),this._minY=Math.floor(i.y),this.width=Math.ceil(i.width),this.height=Math.ceil(i.height),d.default.remove(i)}}},{key:"removeChild",value:function(t){return this.removeChildAt(this._children.indexOf(t))}},{key:"removeChildAt",value:function(t){if(t<0||t>this._children.length-1)return null;var e=this._children[t];return e.stage=e.parent=null,this._children.splice(t,1),e._parent_alpha=1,0==this._children.length?this.width=this.height=0:this.autoSize&&this._updateSize(),e instanceof h.default?b._num_canvas_target--:e.parentNode=null,e}},{key:"getChildByName",value:function(t){if(!_.default.isEmpty(t)){for(var e=void 0,i=this._children.length,e=0;e<i;e++)if(this._children[e].name==t)return this._children[e];return null}}},{key:"getChildAt",value:function(t){return t<0||t>this._children.length-1?null:this._children[t]}},{key:"removeAllChildren",value:function(t){if(!(null==this._children||this._children.length<1)){for(var e=void 0,i=void 0,e=0,s=this._children.length;e<s;e++)if((i=this._children[e]).stage=i.parent=null,i._parent_alpha=1,i instanceof h.default?b._num_canvas_target--:i.parentNode=null,t&&!n.default.gc(i))try{i.dispose()}catch(t){}this._children=[],this.width=this.height=0}}},{key:"contains",value:function(t){return-1!=this._children.indexOf(t)}},{key:"render",value:function(t){if(null!=this._children&&0!=this._children.length){this.updateMatrix&&this.getMatrix(t,!0);for(var e=void 0,e=0;e<this._children.length;e++){var i=this._children[e];!this.visible&&i instanceof h.default||i.render.apply(i,arguments)}this.updateMatrix=!1}}},{key:"swapChildrenAt",value:function(t,e){var i,s=this._children.length;0==s||s<=t||t<0||(e=e<0?0:s<=e?s-1:e,i=this._children[t],this._children[t]=this._children[e],this._children[e]=i)}},{key:"setChildIndex",value:function(t,e){var i=this._children.indexOf(t);null==t||i<0||i==e||(this._children.splice(i,1),this._children.splice(e,0,t))}},{key:"getObjectUnderPoint",value:function(t,e,i,s){var n=void 0;s&&(n=[]);for(var a=this._children.length-1;0<=a;a--){var r=this._children[a];if(null!=r&&r.visible)if(r instanceof b&&r.mouseChildren&&0<r.numChildren){var o=r.getObjectUnderPoint(t,e,i,s);if(o){if(!s)return o;0<o.length&&(n=n.concat(o))}else if(r.mouseEnabled&&r.hitTestPoint(t,e,i)){if(!s)return r;n.push(r)}}else if(r.mouseEnabled&&r.hitTestPoint(t,e,i)){if(!s)return r;n.push(r)}}return s?n:null}},{key:"hitTestPoint",value:function(t,e,i){if(this._children.length<=0)return!1;if(!this.mouseChildren&&this.autoSize)return 0<f.default.hitTestPoint(this,t,e,this.usePolyCollision);for(var s=this._children.length-1;0<=s;s--){var n=this._children[s];if(this.usePolyCollision&&!n.usePolyCollision&&(n.usePolyCollision=!0),n.hitTestPoint(t,e,i))return!0}return!1}},{key:"hitTestObject",value:function(t,e){for(var i,s=void 0,n=void 0,a=void 0,s=this._children.length-1;0<=s;s--)if(n=this._children[s],t instanceof b){for(a=t._children.length-1;0<=a;a--)if(i=t._children[s],n.hitTestObject(i,e))return!0}else if(n.hitTestObject(t,e))return!0;return!1}},{key:"catchAsImage",value:function(){var t,e;this._children.length<=1||(this._updateSize(),t=c.default.containerToImage(this),this.removeAllChildren(!0),(e=Factory.c("do")).setInstance(t),this.addChild(e))}},{key:"reset",value:function(){this.parentNode=null,this.removeAllChildren(!0),this.name=null,this.autoSize=!1,this.mouseChildren=!0,this.use_canvas=n.default.useCanvas,r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"reset",this).call(this)}},{key:"dispose",value:function(){r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"dispose",this).call(this),delete this.use_canvas,this._parentNode,this.autoSize,this._children,this.mouseChildren}},{key:"toString",value:function(){return b.name}},{key:"stage",get:function(){return this._stage},set:function(t){if(this._stage!=t&&(this._stage=t,!(null==this._children||this._children.length<1)))for(var e=void 0,e=0,i=this._children.length;e<i;e++)this._children[e].stage=t}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha!=t&&(this._alpha=t,this.__checkDisplayUpdate(),this._update_parent_alpha())}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible!=t&&(this._visible=t,this.__checkDisplayUpdate(),this._children.length<1||this._update_child_visible())}},{key:"updateMatrix",get:function(){return this._updateMatrix},set:function(t){if(t&&this.__checkDisplayUpdate(),this._updateMatrix!=t&&((this._updateMatrix=t)&&this._bounds&&(this._bounds.width=this._bounds.heigth=0),t&&!(this._children.length<1)))for(var e=void 0,e=0,i=this._children.length;e<i;e++)this._children[e].updateMatrix=!0}},{key:"parentNode",get:function(){return this._parentNode},set:function(t){if(this._parentNode!=t&&(this._parentNode=t,!(this._children.length<1)))for(var e=void 0,i=void 0,e=0,s=this._children.length;e<s;e++)(i=this._children[e])instanceof h.default||(i.parentNode=t)}},{key:"numChildren",get:function(){return this._children.length}}])&&s(v.prototype,y),g&&s(v,g),b);function b(){!function(t){if(!(t instanceof b))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return t.name=u.default.getName("display_object_container"),t.use_canvas=n.default.useCanvas,t.mouseChildren=!0,t.autoSize=!1,t._parentNode=null,t._children=[],t}(e.default=m).className="DisplayObjectContainer",m._num_canvas_target=0},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var a=r(i(3)),n=r(i(9)),c=r(i(2));function r(t){return t&&t.__esModule?t:{default:t}}var o,l,h,u=(o=d,h=[{key:"distance",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:new d;return Math.hypot(t.x-i.x,t.y-i.y,t.hasOwnProperty("z")&&i.hasOwnProperty("z")?t.z-i.z:0)}},{key:"toPoint",value:function(t){if(t&&t instanceof Array&&t.length)return c.default.create(d).set(t[0],1<t.length?t[1]:0,2<t.length?t[2]:0);if(StringUtil.isEmpty(t))return null;t=-1==(t=t.toLocaleLowerCase()).indexOf("x")?'{"x":'+(t=(t=StringUtil.replaceAll(t,["(",")","{","}"],["","","",""])).split(","))[0]+',"y":'+t[1]+(2<t.length?',"z":'+t[2]:"")+"}":StringUtil.replaceAll(t,["(",")","x","y","z","="],["{","}",'"x"','"y"','"z"',":"]);var e=void 0;try{e=JSON.parse(t)}catch(t){}return e?c.default.create(d).set(e.x,e.y,e.z):null}},{key:"getMiddlePoint",value:function(t,e){return new d(.5*(t.x+e.x),.5*(t.y+e.y),.5*(t.z+e.z))}},{key:"clamp",value:function(t,e,i){return 0<e&&(Math.abs(t.x)<e||Math.abs(t.y)<e)&&(Math.abs(t.x)<Math.abs(t.y)?(t.y=t.y*e/Math.abs(t.x),t.x=(0<=t.x?1:-1)*e):(t.x=t.x*e/Math.abs(t.y),t.y=(0<=t.y?1:-1)*e)),0<i&&(Math.abs(t.x)>i||Math.abs(t.y)>i)&&(Math.abs(t.x)>Math.abs(t.y)?(t.y=t.y*i/Math.abs(t.x),t.x=(0<=t.x?1:-1)*i):(t.x=t.x*i/Math.abs(t.y),t.y=(0<=t.y?1:-1)*i)),t}},{key:"rotate",value:function(t,e,i,s,n){if(!t||!e||!i)return t;var a=d.distance(t,e);if(0==a)return t;var r=c.default.create(d).set(t.x-e.x,t.y-e.y),o=e.x+a*Math.cos(r.radians+i*(s?-1:1)),l=e.y+a*Math.sin(r.radians+i*(s?-1:1));return n?r.set(o,l):(c.default.remove(r),t.x=o,t.y=l),n?r:t}},{key:"rotateLine",value:function(t,e,i,s){return d.rotate(c.default.create(d).set(e.x+t,e.y),e,i,s)}},{key:"scale",value:function(t,e,i){if(!t||1==e&&1==i)return t;for(var s,n=0,a=(t=t instanceof Array?t:[t]).length;n<a;n++)(s=t[n])&&(s.x*=e,s.y*=i)}},{key:"offset",value:function(t,e,i){if(!t||0==e&&0==i)return t;for(var s,n=0,a=(t=t instanceof Array?t:[t]).length;n<a;n++)(s=t[n])&&(s.x+=e,s.y+=i)}},{key:"matrix",value:function(t,e){if(t&&e){t=t instanceof Array?t:[t],d.scale(t,e.scaleX,e.scaleY);for(var i,s=0,n=t.length;s<n;s++)(i=t[s])&&(d.rotate(i,e.center,a.default.getRadiansFromDegrees(e.rotation)),i.x=a.default.format(i.x+e.x),i.y=a.default.format(i.y+e.y))}}},{key:"verticalPoint",value:function(t,e,i){var s=e.y-t.y,n=t.x-e.x,a=e.x*t.y-t.x*e.y;if(s*i.x+n*i.y==-a)return i;if(e.y==t.y)return c.default.create(d).set(i.x,t.y);var r=(t.x-e.x)/(e.y-t.y),o=i.y-r*i.x,l=-1*s-r*n,h=(n*o- -1*a)/l,u=(r*a-s*o)/l;return c.default.create(d).set(h,u)}},{key:"interval",value:function(t,e,i,s){if(!s)return i.x>=Math.min(t.x,e.x)&&i.x<=Math.max(t.x,e.x)&&i.y>=Math.min(t.y,e.y)&&i.y<=Math.max(t.y,e.y);var n=e.y-t.y,a=t.x-e.x,r=t.x*e.y-e.x*t.y;return n*i.x+a*i.y==r}}],(l=[{key:"rotation",value:function(t){var e;0!=t&&(t+=this.radians,e=this.length(),this.x=a.default.format(Math.cos(t)*e),this.y=a.default.format(Math.sin(t)*e))}},{key:"clone",value:function(){return c.default.create(d).set(this.x,this.y,this.z)}},{key:"add",value:function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z||0}},{key:"subtract",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}},{key:"multiply",value:function(t){this.x*=t,this.y*=t,this.z*=t}},{key:"offset",value:function(t,e,i){this.x+=t,this.y+=e,this.z+=i}},{key:"abs",value:function(){this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z)}},{key:"length",value:function(){return a.default.format(Math.hypot(this.x,this.y,this.z))}},{key:"normalize",value:function(){var t=this.length();if(t<Number.MIN_VALUE)return 0;var e=1/t;return this.x*=e,this.y*=e,this.z*=e,a.default.format(t)}},{key:"min",value:function(t){this.x=this.x<t.x?this.x:t.x,this.y=this.y<t.y?this.y:t.y,this.z=this.z<t.z?this.z:t.z}},{key:"max",value:function(t){this.x=this.x>t.x?this.x:t.x,this.y=this.y>t.y?this.y:t.y,this.z=this.z>t.z?this.z:t.z}},{key:"set",value:function(t,e,i){return this.x=a.default.format(t||0),this.y=a.default.format(e||0),this.z=a.default.format(i||0),this}},{key:"equals",value:function(t){return this.x==t.x&&this.y==t.y&&this.z==t.z}},{key:"toString",value:function(){return String('{"x":'+this.x+',"y":'+this.y+',"z":'+this.z+"}")}},{key:"reset",value:function(t,e,i){var s=0<arguments.length&&void 0!==t?t:0,n=1<arguments.length&&void 0!==e?e:0,a=2<arguments.length&&void 0!==i?i:0;this.set(s,n,a)}},{key:"data",set:function(t){null!=t&&null!=t&&n.default.copyAttribute(this,t,!0)},get:function(){var t=this.toString();return JSON.parse(t)}},{key:"radians",get:function(){return Math.atan2(this.y,this.x)}}])&&s(o.prototype,l),h&&s(o,h),d);function d(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(t){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this),this.y=this.x=this.z=0,this.set(t,e,i)}(e.default=u).className="Point"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var r=a(i(5)),o=a(i(16)),l=a(i(14)),h=a(i(8)),u=a(i(0)),c=a(i(9)),d=a(i(2)),_=a(i(55)),f=a(i(56)),n=a(i(13)),p=a(i(57)),v=a(i(58)),y=a(i(59)),g=a(i(33)),m=a(i(28)),b=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var O,w,k,x=(O=E,k=[{key:"c",value:function(t,e,i){var s=2<arguments.length&&void 0!==i?i:null;if(u.default.isEmpty(t))return null;s=null==s?b.default.useCanvas:s;var n=void 0;switch(t){case"se":var a=!e||!(e instanceof Array)||e.length<1,n=d.default.create(h.default,a?null:e);if(!a)return n;break;case"dc":n=d.default.create(r.default);break;case"do":n=d.default.create(s?o.default:l.default);break;case"mc":n=d.default.create(s?_.default:f.default);break;case"bs":if((n=d.default.create(y.default)).use_canvas=s,e&&"array"==c.default.getType(e))return n.setup.apply(n,e),n;break;case"tf":if(null==e)return null;e.font&&g.default.has(e.font)?(n=new BitmapText).setup(e.text,e.font,e.lineWidth,e.align):n=s?new p.default(e.text,e.font,e.color,e.size):new v.default(e.isInput,e.multiline,e.tabindex,e.password);break;case"ef":return n=d.default.create(m.default),null==e||null==e.length||0==e.length||n.setup.apply(n,e),n}return n&&e&&c.default.copyAttribute(n,e,!0),n}}],(w=[{key:"newInstance",value:function(){if(null==this.generator)return null;var t=void 0,e=d.default.create(this.generator,this.params);if(null!=this.properties)for(t in this.properties)e[t]=this.properties[t];return e}}])&&s(O.prototype,w),k&&s(O,k),E);function E(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;!function(t){if(!(t instanceof E))throw new TypeError("Cannot call a class as a function")}(this),this.generator="string"==typeof t?n.default.getDefinitionByName(t):t,this.properties=e,this.params=i}(e.default=x).className="Factory"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=o(i(4)),a=o(i(7));function o(t){return t&&t.__esModule?t:{default:t}}var l,h,u,c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,n.default),l=d,(h=[{key:"setup",value:function(t,e,i,s,n,a,r,o,l){return this.type=t,this.label=i,this.params=e,this.target=s,this.length=o,this.touchs=l,this.delta=null==r?0:r,this.mouseY=null==a?0:a,this.mouseX=null==n?0:n,this}},{key:"reset",value:function(){for(var t,e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];(t=r(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"reset",this)).call.apply(t,[this].concat(i)),this.length=this.delta=this.mouseY=this.mouseX=0,this.touchs=null}},{key:"clone",value:function(){return a.default.c("se").setup(this.type,this.params,this.label,this.target,mouseX,mouseY,delta,length,touchs)}},{key:"dispose",value:function(){r(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"dispose",this).call(this),delete this.delta,this.mouseY,this.mouseX,this.length,this.touchs}},{key:"toString",value:function(){return"[StageEvent length="+this.length+", type="+this.type+", mouseX="+this.mouseX+", mouseY="+this.mouseY+", delta="+this.delta+"]"}}])&&s(l.prototype,h),u&&s(l,u),d);function d(t,e,i,s){!function(t){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,t,e,i,s));return n.length=n.delta=n.mouseY=n.mouseX=0,n.touchs=null,n}(e.default=c).className="StageEvent",c.MESSAGE="win_message",c.ENTER_FRAME="enterframe",c.MOUSE_WHEEL="mousewheel",c.MOUSE_CLICK="mouseclick",c.MOUSE_DOWN="mousedown",c.MOUSE_MOVE="mousemove",c.MOUSE_OVER="mouseover",c.MOUSE_TAP="mousetap",c.MOUSE_OUT="mouseout",c.MOUSE_UP="mouseup",c.RESIZE="resize",c.DRAG_MOVE="drag_move",c.KEY_DOWN="keydown",c.KEY_UP="keyup",c.UPDATE="update"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var r=n(i(2)),o=n(i(0));function n(t){return t&&t.__esModule?t:{default:t}}var a,u,c,d=(a=_,c=[{key:"getType",value:function(t){return null==t||null==t?"null":("object"==(e=void 0===t?"undefined":h(t))?null==t?"null":Object.prototype.toString.call(t).slice(8,-1):e).toLowerCase();var e}},{key:"removeUndefinedKeys",value:function(t){for(var e in t)void 0===t[e]&&delete t[e];return t}},{key:"toString",value:function(t){return t?JSON.stringify(t):"boolean"==_.getType(t)?"false":"null"}},{key:"getAttribute",value:function(t,e){if(null==t||o.default.isEmpty(e))return null;for(var i,s=e.split("."),n=0,a=s.length;n<a;n++)if(i=s[n],!o.default.isEmpty(i)){if(!t||!t[i])return null;t=t[i]}return t}},{key:"toArray",value:function(t){if(!t)return null;var e,i=[];for(e in t)i.push({name:e,value:t[e]});return i}},{key:"getLabels",value:function(t){return null==t?null:Object.getOwnPropertyNames(t)}},{key:"clearAttribute",value:function(t,e,i){if(!(null==t||null==e||e.length<1)){var s,n=void 0;for(n in t)(s="function"==typeof t[n])&&(null==i||0<=i.indexOf(n))||!s&&(null==e||0<=e.indexOf(n))||delete t[n]}}},{key:"copyAttribute",value:function(t,e,i,s,n){if(null!=t&&null!=e){var a,r=void 0,o=void 0;for(r in e)if(a=e[r],!(i&&!(r in t)||s&&0<=s.indexOf(r))){try{o=h(t[r])}catch(t){continue}switch(o="null"==o||"undefined"==o?void 0===a?"undefined":h(a):o){case"number":t[r]=isNaN(a)?a:Number(a);break;case"boolean":t[r]=null!=a&&("string"==typeof a?"true"==a:a);break;case"string":t[r]=a;break;default:t[r]=null!=a&&"string"!=typeof a&&n?_.cloneObj(a):a}}return t}}},{key:"cloneObj",value:function(t){if(null==t||null==t)return null;var e=Object.getPrototypeOf(t);return Object.assign(Object.create(e),t)}},{key:"equal",value:function(t,e){if(null==t||null==e)return t==e;if((void 0===t?"undefined":h(t))!=(void 0===e?"undefined":h(e)))return!1;if("object"!=(void 0===t?"undefined":h(t)))return t==e;var i,s,n,a=void 0;if(t instanceof Array&&e instanceof Array){if(t.length!=e.length)return!1;for(a=0,l=t.length;a<l;a++)if(!_.equal(t[a],e[a]))return!1}else{if(t instanceof Array||e instanceof Array)return!1;if(i=Object.getOwnPropertyNames(t),s=Object.getOwnPropertyNames(e),i.length!=s.length)return;for(a=0;a<i.length;a++)if(n=i[a],!_.equal(t[n],e[n]))return!1}return!0}},{key:"remove_attribute",value:function(t,e){if(null!=t&&null!=t&&e&&""!=e&&"object"==(void 0===t?"undefined":h(t)))if(t instanceof Array)for(var i=0,s=t.length;i<s;i++)_.remove_attribute(t[i],e);else for(var n in t.hasOwnProperty(e)&&delete t[e],t)_.remove_attribute(t[n],e)}},{key:"copy",value:function(t,e,i,s){if(!t||"object"!=(void 0===t?"undefined":h(t)))return t;var n=void 0,a=void 0;if(t instanceof t.constructor&&t.constructor!==Object)if(e)for(a in n=r.default.create(e),t)(s||"function"!=typeof t[a])&&n.hasOwnProperty(a)&&(n[a]=t[a]);else n=_.cloneObj(t);else for(a in n={},t)n[a]=t[a];if(i)for(a in i)n[a]=i[a];return n}}],(u=null)&&s(a.prototype,u),c&&s(a,c),_);function _(){!function(t){if(!(t instanceof _))throw new TypeError("Cannot call a class as a function")}(this)}e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var c=a(i(6)),n=a(i(3)),o=a(i(9)),h=(a(i(2)),a(i(0)));function a(t){return t&&t.__esModule?t:{default:t}}var r,l,u,d=(r=_,u=[{key:"toRectangle",value:function(t){if(h.default.isEmpty(t))return null;if(t=t.toLowerCase(),!h.default.exist(t,"x","y","w","h",":","=")){var e=(t=h.default.replaceAll(t,["(",")","{","}"],["","","",""])).split(",");return e.length<4?null:new _(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3]))}t=-1==(t=-1==(t=h.default.replaceAll(t,["(",")"],["{","}"])).indexOf("height")?h.default.replace(t,"h","height"):t).indexOf("width")?h.default.replace(t,"w","width"):t,t=h.default.exist(t,'"',"'",":")?t:h.default.replaceAll(t,["=","x","y","width","height"],[":",'"x"','"y"','"width"','"height"']);var i=void 0;try{i=JSON.parse(t)}catch(t){}return i?o.default.copyAttribute(new _,i,!0):null}},{key:"getRectanglePoint",value:function(t,e,i){return e=e||.5,i=i||.5,t?new c.default(n.default.format(t.x+t.width*e),n.default.format(t.y+t.height*i)):null}},{key:"setRectangleCenter",value:function(t,e,i,s){null!=t&&null!=e&&(i=i||.5,s=s||.5,t.x=n.default.format(e.x-t.width*i),t.y=n.default.format(e.y-t.height*s))}},{key:"innerPoint",value:function(t,e){if(null!=t&&null!=e)return e.x=n.default.clamp(e.x,t.x,t.right),e.y=n.default.clamp(e.y,t.y,t.bottom),e}},{key:"createRectangle",value:function(t,e,i,s){i=i||t,s=s||e;var n=Math.min(t.x,e.x,i.x,s.x),a=Math.max(t.x,e.x,i.x,s.x),r=Math.min(t.y,e.y,i.y,s.y);return{x:n,y:r,width:a-n,height:Math.max(t.y,e.y,i.y,s.y)-r}}},{key:"rectangleByRadians",value:function(t,e,i,s,n,a){var r=t.rotation(e,i,s,n,a);return o.default.copyAttribute(r,_.createRectangle(r[0],r[1],r[2],r[3])),r}},{key:"getPointsBounds",value:function(t){if(!t||!t.length)return null;for(var e,i=0,s=0,n=0,a=0,r=t[0]instanceof Array,o=0,l=t.length;o<l;o++)e=t[o],!h.default.isEmpty(e)&&(r?e.length:e.hasOwnProperty("x"))&&(0!=o?(i=Math.min(i,r?parseFloat(e[0]):e.x),s=Math.min(s,r?parseFloat(e[1]):e.y),n=Math.max(n,r?parseFloat(e[0]):e.x),a=Math.max(a,r?parseFloat(e[1]):e.y)):(i=n=r?parseFloat(e[0]):e.x,s=a=r?parseFloat(e[1]):e.y));return{x:i,y:s,width:n-i,height:a-s}}},{key:"isContainedIn",value:function(t,e){return t.contains(e)}}],(l=[{key:"set",value:function(t,e,i,s){return this.x=n.default.format(t||0),this.y=n.default.format(e||0),this.width=Math.abs(n.default.format(i||0)),this.height=Math.abs(n.default.format(s||0)),this}},{key:"move",value:function(t,e){return this.x=n.default.format(null==e?t.x:t+this.x),this.y=n.default.format(null==e?t.y:e+this.y),this}},{key:"add",value:function(t){this.x=n.default.format(t.x+this.x),this.y=n.default.format(t.y+this.y),this.width=n.default.format(t.width+this.width),this.height=n.default.format(t.height+this.height)}},{key:"multiply",value:function(t,e){t=Math.abs(t),e=Math.abs(e||t),this.x=n.default.format(this.x*t),this.y=n.default.format(this.y*e),this.width=n.default.format(this.width*t),this.height=n.default.format(this.height*e)}},{key:"contains",value:function(t,e){return null!=t&&(t instanceof c.default?this.x<=t.x&&this.y<=t.y&&t.x<=this.right&&t.y<=this.bottom:t instanceof _?this.x<=t.x&&this.y<=t.y&&t.right<=this.right&&t.bottom<=this.bottom:null!=e&&this.x<=t&&this.y<=e&&t<=this.right&&e<=this.bottom)}},{key:"intersects",value:function(t){return this.x<=t.x+t.width&&this.y<=t.y+t.height&&t.x<=this.x+this.width&&t.y<=this.y+this.height}},{key:"intersection",value:function(t){if(!this.intersects(t))return new _;var e=Math.max(this.x,t.x),i=Math.max(this.y,t.y);return new _(e,i,Math.min(this.x+this.width,t.x+t.width)-e,Math.min(this.y+this.height,t.y+t.height)-i)}},{key:"getPoints",value:function(t,e){var i=t?-1:1,s=e?-1:1;return[new c.default(this.x,this.y),new c.default(this.x+this.width*i,this.y),new c.default(this.x+this.width*i,this.y+this.height*s),new c.default(this.x,this.y+this.height*s)]}},{key:"rotation",value:function(t,e,i,s,n){e=e||new c.default;for(var a,r,o,l,h=this.getPoints(s,n),u=void 0,u=0;u<h.length;u++)h[u].subtract(e),l=h[u].length(),o=h[u].radians,a=Math.sin(o+t),r=Math.cos(o+t),h[u].x=e.x+l*r+(i?i.x:0),h[u].y=e.y+l*a+(i?i.y:0);return h}},{key:"union",value:function(t,e){var i=!(1<arguments.length&&void 0!==e)||e,s=Math.min(this.x,t.x),n=Math.min(this.y,t.y),a=Math.max(this.x+this.width,t.x+t.width)-s,r=Math.max(this.y+this.height,t.y+t.height)-n;return i?new _(s,n,a,r):(this.x=s,this.y=n,this.width=a,this.height=r,this)}},{key:"clone",value:function(){return new _(this.x,this.y,this.width,this.height)}},{key:"reset",value:function(t,e,i,s){var n=0<arguments.length&&void 0!==t?t:0,a=1<arguments.length&&void 0!==e?e:0,r=2<arguments.length&&void 0!==i?i:0,o=3<arguments.length&&void 0!==s?s:0;this.set(n,a,r,o)}},{key:"toArray",value:function(t){return[this.x,this.y,t?this.right:this.width,t?this.bottom:this.height]}},{key:"toString",value:function(){return'{"x":'+this.x+',"y":'+this.y+',"width":'+this.width+',"height":'+this.height+"}"}},{key:"data",get:function(){var t=this.toString();return JSON.parse(t)},set:function(t){null!=t&&null!=t&&this.set(t.x,t.y,t.width,t.height)}},{key:"topLeft",get:function(){return new c.default(this.x,this.y)}},{key:"bottomRight",get:function(){return new c.default(this.x+this.width,this.y+this.height)}},{key:"right",get:function(){return this.x+this.width}},{key:"bottom",get:function(){return this.y+this.height}}])&&s(r.prototype,l),u&&s(r,u),_);function _(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(t){if(!(t instanceof _))throw new TypeError("Cannot call a class as a function")}(this),this.x=this.y=this.width=this.height=0,this.set(t,e,i,s)}(e.default=d).className="Rectangle"},function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var n=(s(a,[{key:"getName",value:function(t){return a.dic.hasOwnProperty(t)&&Number.isFinite(a.dic[t])?a.dic[t]++:a.dic[t]=0,t+a.dic[t]}}]),a);function a(){!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this)}(e.default=n).dic={}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=d(i(19)),a=d(i(2)),y=d(i(9)),o=d(i(3)),l=d(i(1)),h=d(i(4)),u=d(i(53)),c=d(i(6));function d(t){return t&&t.__esModule?t:{default:t}}var _,f,p,v=Symbol("draggable"),g=Symbol("x"),m=Symbol("y"),b=Symbol("skewX"),O=Symbol("skewY"),w=Symbol("width"),k=Symbol("height"),x=Symbol("scaleX"),E=Symbol("scaleY"),M=Symbol("rotation"),P=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(S,n.default),_=S,p=[{key:"toString",value:function(t){if(!t)return"";var e="{";return e+='"x":'+t.x+",",e+='"y":'+t.y+",",e+='"width":'+t.width+",",e+='"height":'+t.height+",",e+='"rotation":'+t.rotation+",",e+='"scaleX":'+t.scaleX+",",e+='"scaleY":'+t.scaleY+",",e+='"skewX":'+t.skewX+",",e+='"skewY":'+t.skewY+",",e+='"_minX":'+t._minX+",",e+='"_minY":'+t._minY+",",e+='"origin":'+(t.origin?t.origin.toString():"null")+",",e+='"mouseEnabled":'+t.mouseEnabled+",",e+='"visible":'+t.visible+",",e+='"name":"'+t.name+'",',e+='"breakTouch":"'+t.breakTouch+'",',e+='"alpha":'+t.alpha+",",e+='"draggable":'+t.draggable+",",e+='"_cursor":"'+(t._cursor?t._cursor:"")+'",',this.polyArea&&(e+='"polyArea":'+t.polyArea.toString()+","),e+='"usePolyCollision":'+t.usePolyCollision+",",(e+='"matrix":'+(t._matrix?t._matrix.toString():'""'))+"}"}}],(f=[{key:"__checkDisplayUpdate",value:function(){this._stage&&!this._stage.auto_fresh&&(this._stage.auto_fresh=!0)}},{key:"setSize",value:function(t,e){null==t||Number.isNaN(t)||null==e||Number.isNaN(e)||this[w]==t&&this[k]==e||(this.height=e,this.width=t)}},{key:"getMatrix",value:function(t,e){if(this._matrix&&!this.updateMatrix&&!t&&e)return this._matrix;if(this._temp_matrix?this._temp_matrix.reset():this._temp_matrix=a.default.create(u.default),this._matrix&&!this.updateMatrix&&!t&&!e)return this._temp_matrix.setup(this._matrix.a,this._matrix.b,this._matrix.c,this._matrix.d,this._matrix.tx,this._matrix.ty),this._temp_matrix;if(t==this)return this._temp_matrix;var i,s=this.origin?this.origin.x:0,n=this.origin?this.origin.y:0;return this._temp_matrix.concatTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,s,n,this.skewX,this.skewY),this.parent&&t!=this.parent&&(this._temp_matrix.concat(this.parent.matrix),t&&t.matrix&&(i=t.matrix.clone().invert(),this._temp_matrix.concat(i),a.default.remove(i))),this.updateMatrix&&!t&&e&&(this._matrix?this._matrix.setup(this._temp_matrix.a,this._temp_matrix.b,this._temp_matrix.c,this._temp_matrix.d,this._temp_matrix.tx,this._temp_matrix.ty):this._matrix=this._temp_matrix.clone(),this.updateMatrix=!1),this._temp_matrix}},{key:"localToGlobal",value:function(t,e){null==e&&t instanceof c.default&&(e=t.y,t=t.x);var i=this.getMatrix(),s=a.default.create(u.default);s.setup(1,0,0,1,t,e),s.concat(i);var n=a.default.create(c.default).set(s.tx,s.ty);return a.default.remove(s),n}},{key:"globalToLocal",value:function(t,e){null==e&&t instanceof c.default&&(e=t.y,t=t.x);var i=this.getMatrix();i.invert();var s=a.default.create(u.default);s.setup(1,0,0,1,t,e),s.concat(i);var n=a.default.create(c.default).set(s.tx,s.ty);return a.default.remove(s),n}},{key:"localToTarget",value:function(t,e,i){return null==i||null==i?this.localToGlobal(t,e):i.globalToLocal(this.localToGlobal(t,e))}},{key:"getWidth",value:function(){return Math.ceil(Math.abs(this.width*this.scaleX))}},{key:"getHeight",value:function(){return Math.ceil(Math.abs(this.height*this.scaleY))}},{key:"getBounds",value:function(t){var e=this.getWidth()/Math.abs(this.scaleX),i=this.getHeight()/Math.abs(this.scaleY),s=this._minX,n=this._minY,a=void 0,r=void 0,o=null==t&&this._bounds;if(this.polyArea){if(null==this._bounds)this._bounds=y.default.cloneObj(this.polyArea);else for(a=0;a<this.polyArea.length;a++)this._bounds[a].x=this.polyArea[a].x,this._bounds[a].y=this.polyArea[a].y;r=this._bounds}else if(o){if(0<this._bounds.width&&0<this._bounds.height)return this._bounds;this._bounds[0].x=s,this._bounds[0].y=n,this._bounds[1].x=s+e,this._bounds[1].y=n,this._bounds[2].x=s+e,this._bounds[2].y=n+i,this._bounds[3].x=s,this._bounds[3].y=n+i}var l,h=this.getMatrix(t),r=r||(o?this._bounds:[{x:s,y:n},{x:s+e,y:n},{x:s+e,y:n+i},{x:s,y:n+i}]),u=o?this._bounds:[],c=r.length,d=void 0,_=void 0,f=void 0,p=void 0,d=_=(l=h.transformPoint(r[0],!0,!1)).x,f=p=l.y;u[0]=l;for(var v=1;v<c;v++)d>(l=h.transformPoint(r[v],!0,!1)).x?d=l.x:_<l.x&&(_=l.x),f>l.y?f=l.y:p<l.y&&(p=l.y),u[v]=l;return u.x=d,u.y=f,u.width=_-d,u.height=p-f,null==t&&null==this._bounds&&(this._bounds=u),u}},{key:"getIndex",value:function(){return null!=this.parent&&this.parent.contains(this)?this.parent._children.indexOf(this):-1}},{key:"toTop",value:function(){null!=this.parent&&this.parent.contains(this)&&this.parent.setChildIndex(this,this.parent.numChildren-1)}},{key:"toBottom",value:function(){null!=this.parent&&this.parent.contains(this)&&this.parent.setChildIndex(this,0)}},{key:"moveTo",value:function(t,e){null==e&&t instanceof c.default&&(e=t.y,t=t.x),this[g]==t&&this[m]==e||Number.isNaN(t)||Number.isNaN(e)||(this[g]=t,this[m]=e,this.updateMatrix=!0)}},{key:"removeFromParent",value:function(t){null!=this.parent&&this.parent.contains(this)&&this.parent.removeChild(this),t&&!l.default.gc(this)&&this.dispose()}},{key:"reset",value:function(){this._parent&&this.removeFromParent(!1),this._matrix&&a.default.remove(this._matrix),this._temp_matrix&&a.default.remove(this._temp_matrix),this.register_point&&a.default.remove(this.register_point),r(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"reset",this).call(this),this.stage=null,this._visible=this._updateMatrix=!0,this[E]=this[x]=this._alpha=this._parent_alpha=1,this._minX=this._minY=this[b]=this[O]=this[k]=this[w]=this[m]=this[g]=this[M]=0,this._refresh=this._resize=this.mouseEnabled=this.usePolyCollision=this.breakTouch=this[v]=!1,this._cursor=this._bounds=this._matrix=this._temp_matrix=this.register_point=this.parent=this.polyArea=this.name=null}},{key:"dispose",value:function(){this.reset(),r(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"dispose",this).call(this),delete this._refresh,this._cursor,this._bounds,this._minX,this._minY,this._temp_matrix,this.breakTouch,this._resize,this[b],this[O],this._stage,this._updateMatrix,this.polyArea,this[v],this.usePolyCollision,this._matrix,this.register_point,this[k],this[w],this[m],this[g],this[M],this[E],this[x],this._alpha,this.mouseEnabled,this._visible,this.name,this._parent,this._parent_alpha}},{key:"render",value:function(){}},{key:"buttonMode",set:function(t){this._cursor=t?"pointer":""},get:function(){return"pointer"==this._cursor}},{key:"resize",set:function(t){this._resize=t,this._resize&&(this.dispatchEvent(new h.default(S.RESIZE)),this.__checkDisplayUpdate())},get:function(){return this._resize}},{key:"stage",get:function(){return this._stage},set:function(t){this._stage!=t&&(this._stage=t)}},{key:"visible",set:function(t){t=Boolean(t),this._visible!=t&&(this._visible=t,this.__checkDisplayUpdate())},get:function(){return this._visible}},{key:"parent",set:function(t){this._parent!=t&&(this._parent=t)},get:function(){return this._parent}},{key:"alpha",set:function(t){this._alpha==t||Number.isNaN(t)||(this._alpha=o.default.clamp(t,0,1),this.__checkDisplayUpdate(),this.updateMatrix=!0)},get:function(){return this._alpha}},{key:"updateMatrix",get:function(){return this._updateMatrix},set:function(t){t&&this.__checkDisplayUpdate(),this._updateMatrix!=t&&(this._updateMatrix=t)&&this._bounds&&(this._bounds.width=this._bounds.heigth=0)}},{key:"skewX",get:function(){return this[b]},set:function(t){this[b]==t||Number.isNaN(t)||(this[b]=o.default.format(t),this.updateMatrix=!0)}},{key:"skewY",get:function(){return this[O]},set:function(t){this[O]==t||Number.isNaN(t)||(this[O]=o.default.format(t),this.updateMatrix=!0)}},{key:"x",get:function(){return this[g]},set:function(t){this[g]==t||Number.isNaN(t)||(this[g]=o.default.format(t),this.updateMatrix=!0)}},{key:"y",get:function(){return this[m]},set:function(t){this[m]==t||Number.isNaN(t)||(this[m]=o.default.format(t),this.updateMatrix=!0)}},{key:"width",get:function(){return this[w]},set:function(t){this[w]==t||Number.isNaN(t)||(this[w]=o.default.format(Math.max(0,t)),this.updateMatrix=!0,this.resize=!0)}},{key:"height",get:function(){return this[k]},set:function(t){this[k]==t||Number.isNaN(t)||(this[k]=o.default.format(Math.max(0,t)),this.updateMatrix=!0,this.resize=!0)}},{key:"scaleX",get:function(){return this[x]},set:function(t){this[x]==t||Number.isNaN(t)||(this[x]=o.default.format(t),this.updateMatrix=!0)}},{key:"scaleY",get:function(){return this[E]},set:function(t){this[E]==t||Number.isNaN(t)||(this[E]=o.default.format(t),this.updateMatrix=!0)}},{key:"rotation",get:function(){return this[M]},set:function(t){this[M]==t||Number.isNaN(t)||(this[M]=o.default.format(t),this.updateMatrix=!0)}},{key:"param",get:function(){var t=S.toString(this);return JSON.parse(t)},set:function(t){null!=t&&null!=t&&(t.hasOwnProperty("matrix")&&delete t.matrix,t.hasOwnProperty("name")&&delete t.name,y.default.copyAttribute(this,t,!0),this.updateMatrix=!0,this.resize=!0)}},{key:"origin",get:function(){return this.register_point},set:function(t){null!=t&&null!=t&&(null==this.register_point&&(t instanceof c.default?(this.register_point=t,this.updateMatrix=!0):this.register_point=a.default.create(c.default)),(this.register_point.x!=t.x||this.register_point.y!=t.y||0<t.x&&t.x<=1&&0<t.y&&t.y<=1)&&(this.register_point.x=t.x,this.register_point.y=t.y,t instanceof c.default&&a.default.remove(t),this.updateMatrix=!0))}},{key:"matrix",get:function(){return this.updateMatrix&&(this.getMatrix(null,!0),this._refresh=!0),this._matrix?this._matrix:this.getMatrix()},set:function(t){var e,i;null!=t&&null!=t&&t instanceof u.default&&(e=this.getMatrix().clone(),i=this.getMatrix(this),e.invert(),e.concat(i),t.concat(e),a.default.remove(e),t.applyDisplay(this))}},{key:"scale",get:function(){return this[x]==this[E]?this[x]:NaN},set:function(t){null==t||null==t||Number.isNaN(t)||(this[x]=this[E]=o.default.format(t),this.updateMatrix=!0)}},{key:"cursor",get:function(){return this._cursor},set:function(t){t!=this._cursor&&(this._cursor=t)}},{key:"draggable",get:function(){return this[v]},set:function(t){null!=t&&null!=t&&this[v]!=t&&(this[v]=t,this.breakTouch=this.mouseEnabled=t)}}])&&s(_.prototype,f),p&&s(_,p),S);function S(){!function(t){if(!(t instanceof S))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));return t._cursor=t.name=t.register_point=t._parent=t._temp_matrix=t._matrix=t.polyArea=t._stage=t._bounds=null,t[k]=t[w]=t[m]=t[g]=t[M]=t[b]=t[O]=t._minX=t._minY=0,t[E]=t[x]=t._alpha=t._parent_alpha=1,t._refresh=t._resize=t.mouseEnabled=!1,t.usePolyCollision=!1,t._updateMatrix=!0,t.breakTouch=!1,t[v]=!1,t._visible=!0,t}(e.default=P).className="DisplayBase",P.RESIZE="display_base_resize",P.RESET_INSTANCE="display_reset_instance"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var a=n(i(1)),r=n(i(0));function n(t){return t&&t.__esModule?t:{default:t}}var o,l,h,u=(o=c,h=[{key:"getQualifiedClassName",value:function(t){if(!t)return null;if(t.className)return t.className;if(t.constructor&&t.constructor.name)return"Function"==t.constructor.name?t.name:t.constructor.name;var e=void 0;try{e=t.prototype?t.prototype:Object.getPrototypeOf(t)}catch(t){return void trace("[ERROR] ClassUtil.getQualifiedClassName",t)}if(e.hasOwnProperty("__class__"))return e.__class__;var i=e.constructor.toString(),s=i.indexOf("("),n=i.substring(9,s);return Object.defineProperty(e,"__class__",{value:n,enumerable:!1,writable:!0}),n}},{key:"getQualifiedSuperclassName",value:function(t){var e=t.prototype?t.prototype:Object.getPrototypeOf(t);if(e.hasOwnProperty("__superclass__"))return e.__superclass__;for(var i=void 0,s=c.getQualifiedClassName(t),n=Object.getPrototypeOf(e);n&&n.constructor;)(i=c.getQualifiedClassName(n.constructor))&&""!=i.trim()&&"Object"!=i.trim()&&(s=i.trim()+"."+s),n=n.constructor.prototype?Object.getPrototypeOf(n.constructor.prototype):null;return Object.defineProperty(e,"__superclass__",{value:s,enumerable:!1,writable:!0}),s}},{key:"getDefinitionByName",value:function(t){if(r.default.isEmpty(t))return null;if(s=c.__getDefinitionByName__cache[t])return s;for(var e=t.split("."),i=e.length,s=a.default.root,n=0;n<i;n++)if(!(s=s[e[n]]))return null;return c.__getDefinitionByName__cache[t]=s}}],(l=null)&&s(o.prototype,l),h&&s(o,h),c);function c(){!function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this)}(e.default=u).__getDefinitionByName__cache={}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=O(i(25)),a=O(i(11)),p=O(i(0)),o=O(i(13)),l=O(i(23)),h=O(i(9)),u=O(i(2)),c=O(i(16)),d=(O(i(41)),O(i(3))),_=O(i(21)),f=O(i(12)),v=O(i(4)),y=O(i(1)),g=O(i(17)),m=O(i(30)),b=O(i(6));function O(t){return t&&t.__esModule?t:{default:t}}var w,k,x,E=Symbol("element"),M=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(P,f.default),w=P,(k=[{key:"render",value:function(t){null!=this[E]&&(this._depth=this._layer?this._layer:++P._depth_count,this._transform(t))}},{key:"_render",value:function(){}},{key:"setInstance",value:function(t){if(null==t||null==t||this.instance==t)return this.instance!=t&&(this.element=this.instance=null),t;if(this._rect=null,t instanceof HTMLImageElement)t.style.display="none",this.element=t;else if(t instanceof HTMLCanvasElement)this.element=l.default.toImage(t);else if(t instanceof c.default)this.setInstance(t.canvas?t.canvas:t.instance),this.param=t.param;else if(t instanceof g.default)this.register_point=u.default.create(b.default).set(t.regX,t.regY),this._rect=t,null==this[E]?this.element=_.default.createDOM("div",{id:this.name,style:{width:t.width+"px",height:t.height+"px",backgroundImage:"url("+t.image.src+")",backgroundRepeat:"no-repeat"}}):this.instance.image!=t.image&&(this[E].style.backgroundImage="url("+t.image.src+")");else if(t instanceof m.default)this.setInstance(t.canvas);else if(t instanceof HTMLDivElement)this.element=t;else{if(!(t instanceof SVGSVGElement))return trace("DOMDisplay:: set instance with a invalid value.",o.default.getQualifiedClassName(t),"-",h.default.getType(t)),null;this.element=t}return this.instance=t,this[E]&&this._stage&&this._display(!0),t instanceof g.default&&this._transform(),this.updateMatrix=!0,this.__checkDisplayUpdate(),this.dispatchEvent(new v.default(f.default.RESET_INSTANCE)),this.instance}},{key:"_transform",value:function(t){var e=this._visible&&this._global_visible;if(this[E].style.display=e?"":"none",e){var i,s,n,a,r=this.updateMatrix||this._refresh,o=this.getMatrix(t,!0),l=y.default.cssPrefix,h=p.default.isEmpty(l),u=h?"transformOrigin":l+"TransformOrigin",c=h?"transform":l+"Transform";if(this[E].style.position=y.default.position,this[E].style.opacity=this._alpha*this._parent_alpha,this[E].style.overflow=this.hide_over?"hidden":"visible",this[E].style.zIndex=y.default.layer+this._depth,this._rect&&(this.width=this._rect.width,this.height=this._rect.height,this[E].style.backgroundPosition=-this._rect.x+"px "+-this._rect.y+"px"),null!=this._blendMode&&(this[E].style.mixBlendMode=this._blendMode),r&&(s="width"==(i=0<this.width?"width":"height")?"height":"width",this[E].style[i]=0<this[i]?this[i]+"px":"100%",this[s]<=0&&(this[s]=this[E]["offset"+s.substring(0,1).toUpperCase()+s.substring(1)]),this[E].style[s]=0<this[s]?this[s]+"px":"100%",y.default.supportTransform?(this[E].style[u]="0% 0%",this[E].style.top=this[E].style.left="0px",this[E].style[c]=this._get_transform_css(o)):(this[E].style.top=o.ty+"px",this[E].style.left=o.tx+"px"),this._refresh=!1),this._mask?(n="string"==typeof this._mask||this._mask instanceof ShapeVO,a=this._mask instanceof g.default,n?this[E].style[l+"ClipPath"]=this[E].style.clipPath="url(#"+("string"==typeof this._mask?this._mask:this._mask.id+ShapeVO.CILP)+")":(this[E].style[l+"MaskImage"]="url("+(a?this._mask.image:this._mask).src+")",this[E].style[l+"MaskRepeat"]="no-repeat",this[E].style[l+"MaskPosition"]=o.tx+"px "+o.ty+"px")):this[E].style[l+"ClipPath"]=this[E].style.clipPath=this[E].style[l+"MaskImage"]=this[E].style[l+"MaskPosition"]="",this.filters&&0<this.filters.length)for(var d=void 0,_=0,f=this.filters.length;_<f;_++)null!=(d=this.filters[_])&&d.show(this[E]);else this[E].style[y.default.cssPrefix+"BoxShadow"]=this[E].style.textShadow="";this[E].style.cursor=null==this._cursor?"":this._cursor,this[E].style.pointerEvents=this.mouseEnabled?"auto":"none"}}},{key:"_get_transform_css",value:function(t){return t.toCSS()}},{key:"_update_visible",value:function(){if(null!=this.parent){for(var t=!0,e=(e=this).parent;null!=e&&(t=t&&e.visible);e=e.parent);this._global_visible=t}}},{key:"hitTestPoint",value:function(t,e){return 0<n.default.hitTestPoint(this,t,e,this.usePolyCollision)}},{key:"hitTestObject",value:function(t){return 0<n.default.hitTestObject(this,t,this.usePolyCollision)}},{key:"_display",value:function(t){if(t)try{this[E]&&null==this[E].parentNode&&(this._parent_node?this._parent_node:this.stage.div?this.stage.div:this.stage.canvas.parentNode).appendChild(this[E])}catch(t){trace("[ERROR]DOMDisplay _display()",this.name,t.message)}else this[E]&&(this[E].parentNode&&this[E].parentNode.removeChild(this[E]),this[E].style.display="none")}},{key:"reset",value:function(){r(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"reset",this).call(this),this._parent&&this.removeFromParent(!1),this[E]&&this[E].parentNode&&this[E].parentNode.removeChild(this[E]),this.instance&&this.instance instanceof g.default&&this.instance.isClone&&u.default.remove(this.instance),this._mask&&this._mask instanceof ShapeVO&&u.default.remove(this._mask),this._blendMode=this.instance=this._rect=this._mask=this._parent_node=this[E]=null,this.hide_over=this._global_visible=!0,this._layer=this._depth=0,this.use_canvas=!1,this.filters=[]}},{key:"dispose",value:function(){r(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"dispose",this).call(this),delete this._blendMode,this.hide_over,this._global_visible,this.filters,this._layer,this.instance,this._rect,this._depth,this[E],this._parent_node,this._mask}},{key:"toString",value:function(){return P.name}},{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode!=t&&(this._blendMode=t||"normal",this.__checkDisplayUpdate())}},{key:"layer",get:function(){return this._layer||this._depth},set:function(t){this._layer!=t&&(this._layer=t)}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible!=t&&(this._visible=t,this[E]&&(this[E].style.display=this._visible&&this._global_visible?"":"none"))}},{key:"stage",get:function(){return this._stage},set:function(t){null==t&&(this._global_visible=!0),this._stage!=t&&((this._stage=t)&&(this._update_visible(),this.updateMatrix=!0),this._display(null!=t))}},{key:"element",get:function(){return this[E]},set:function(t){var e;this[E]!=t&&(e=void 0,this[E]&&this[E].parentNode?(e=this[E].parentNode).removeChild(this[E]):this._stage&&(e=this._parent_node?this._parent_node:this._stage.div),t&&t.parentNode&&t.parentNode.removeChild(t),null!=(this[E]=t)?(p.default.isEmpty(this[E].id)&&(this[E].id=this.name),this.width=null==this[E].width||"number"!=typeof this[E].width?p.default.isEmpty(this[E].style.width)?this.width:d.default.int(this[E].style.width):this[E].width,this.height=null==this[E].height||"number"!=typeof this[E].height?p.default.isEmpty(this[E].style.height)?this.height:d.default.int(this[E].style.height):this[E].height,e&&e.appendChild(this[E])):this.width=this.height=0)}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&this._mask instanceof ShapeVO&&this._mask!=t&&u.default.remove(this._mask),this._mask=t,this.__checkDisplayUpdate()}},{key:"parentNode",get:function(){return this._parent_node},set:function(t){this._parent_node!=t&&(this._parent_node=t,null!=this[E]&&this[E].parentNode!=this._parent_node&&this[E]&&this._stage&&(this[E].parentNode&&this[E].parentNode.removeChild(this[E]),this._display(!0)))}}])&&s(w.prototype,k),x&&s(w,x),P);function P(){!function(t){if(!(t instanceof P))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(P.__proto__||Object.getPrototypeOf(P)).call(this));return t._blendMode=t.instance=t._rect=t._mask=t._parent_node=t[E]=null,t.name=a.default.getName("dom_display"),t.hide_over=t._global_visible=!0,t._layer=t._depth=0,t.use_canvas=!1,t.filters=[],t}(e.default=M)._depth_count=0,M.className="DOMDisplay"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var o,l,h,u=(o=c,h=[{key:"getRed",value:function(t){return t>>16&255}},{key:"getGreen",value:function(t){return t>>8&255}},{key:"getBlue",value:function(t){return 255&t}},{key:"getAlpha",value:function(t){return t>>24&255}},{key:"darkenColor",value:function(t,e){var i=Math.min(255,c.getRed(t)*e),s=Math.min(255,c.getGreen(t)*e),n=Math.min(255,c.getBlue(t)*e);return c.toInt(i,s,n)}},{key:"colorToRGBA",value:function(t,e){var i=c.toColor(t),s=c.getGreen(i),n=c.getBlue(i),a=c.getRed(i);return null==e?"rgb("+a+","+s+","+n+")":"rgba("+a+","+s+","+n+","+MathUtil.clamp(e,0,1)+")"}},{key:"toInt",value:function(t,e,i){return t<<16|e<<8|i}},{key:"toInt32",value:function(t,e,i,s){return s<<24|t<<16|e<<8|i}},{key:"toHex",value:function(t){for(var e=c.getGreen(t),i=c.getBlue(t),s=[c.getRed(t).toString(16),e.toString(16),i.toString(16)],n=0;n<3;n++)1==s[n].length&&(s[n]="0"+s[n]);return"#"+s.join("")}},{key:"toColor",value:function(t){if(t=String(t),!n.default.isEmpty(t))return t=n.default.replaceAll(t,["0x","0X","#"],["","",""]),Number("0x"+t)}},{key:"formatColor",value:function(t){return isNaN(Number(t))?t:c.toHex(Number(t))}},{key:"getLinearGradient",value:function(t,e,i){for(var s,n=t.createLinearGradient.apply(t,e),a=void 0,r=i.length,a=0;a<r;a++)null==(s=i[a])||s.length<2||n.addColorStop(s[0],c.formatColor(s[1]));return n}},{key:"getRadialGradient",value:function(t,e,i){for(var s,n=t.createRadialGradient.apply(t,e),a=void 0,r=i.length,a=0;a<r;a++)null==(s=i[a])||s.length<2||n.addColorStop(s[0],c.formatColor(s[1]));return n}},{key:"getGradientColor",value:function(t){if(null==t||null==r.default.context)return t;for(var e=0==t.type?"getLinearGradient":"getRadialGradient",i=0==t.type?[t.xStart,t.yStart,t.xEnd,t.yEnd]:[t.xStart,t.yStart,t.radiusStart,t.xEnd,t.yEnd,t.radiusEnd],s=[],n=void 0,a=t.offsetlist.length,n=0;n<a;n++)s.push([t.offsetlist[n],t.colorList[n]]);return c[e](r.default.context,i,s)}},{key:"interpolateColor",value:function(t,e,i){if(null==t||null==e||null==i)return 0;var s=1-(i=1<i?.01*i:i);return((t=c.toColor(t))>>24&255)*s+((e=c.toColor(e))>>24&255)*i<<24|(t>>16&255)*s+(e>>16&255)*i<<16|(t>>8&255)*s+(e>>8&255)*i<<8|(255&t)*s+(255&e)*i}}],(l=null)&&s(o.prototype,l),h&&s(o,h),c);function c(){!function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this)}e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=y(i(20)),a=y(i(12)),o=y(i(11)),l=y(i(25)),h=y(i(2)),u=y(i(39)),c=y(i(0)),d=y(i(29)),_=y(i(13)),f=y(i(54)),p=(y(i(41)),y(i(4))),v=y(i(17));function y(t){return t&&t.__esModule?t:{default:t}}y(i(6));var g,m,b,O=Symbol("graphics"),w=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(k,a.default),g=k,(m=[{key:"repeat",value:function(t,e,i){null==this.instance||"no-repeat"==i||t<=this.instance.width&&e<=this.instance.height?this._repeat=!1:(i=i||"repeat",this.width=t,this.height=e,this._repeat=!0,this.graphics.reset(),this.graphics.beginBitmapFill(this.instance.image,i),this.graphics.drawRect(0,0,this.width,this.height),this.graphics.endFill())}},{key:"_transform",value:function(t,e){var i=null==e?this.stage.context:e.context,s=this.getMatrix(t,!0);i.transform(s.a,s.b,s.c,s.d,s.tx,s.ty),i.globalAlpha*=this.alpha*this._parent_alpha}},{key:"setInstance",value:function(t){return t&&t instanceof v.default&&!t.image&&(t=null),this.instance!=t&&(this.instance&&this.instance instanceof v.default&&this.instance.isClone&&h.default.remove(this.instance),this.instance=null,this.width=this.height=0),null==t||null==t||this.instance==t?t:((t instanceof Image||"HTMLImageElement"==_.default.getQualifiedClassName(t))&&(e=t,(t=h.default.create(v.default)).image=e,t.isClone=!0,t.width=e.width,t.height=e.height),this.instance&&this.instance instanceof v.default&&this.instance.isClone&&h.default.remove(this.instance),this.instance=t,c.default.isEmpty(t.name)||(this.name=t.name),this.width=this.instance.width,this.height=this.instance.height,this.origin={x:t.regX,y:t.regY},this.updateMatrix=!0,this.__checkDisplayUpdate(),this.dispatchEvent(new p.default(a.default.RESET_INSTANCE)),this.instance);var e}},{key:"do_actions",value:function(t,e,i){var s=2<arguments.length&&void 0!==i&&i;if(t&&t.context&&e){var n,a=s?t:t.context,r=e.getValue();if(r)for(var o in r)a[o]!=r[o]&&(a[o]=r[o]);var l=!0,h=!1,u=void 0;try{for(var c,d=e.actions[Symbol.iterator]();!(l=(c=d.next()).done);l=!0)a[(n=c.value).method].apply(a,n.data)}catch(t){h=!0,u=t}finally{try{!l&&d.return&&d.return()}finally{if(h)throw u}}}}},{key:"_render",value:function(t,e,i){var s=0<arguments.length&&void 0!==t?t:null,n=1<arguments.length&&void 0!==e&&e,a=2<arguments.length&&void 0!==i?i:null;if(this.visible&&!(this.alpha<=0)&&(s||this.stage)){if(null==s&&this.stage.context.save(),n||this._transform(a,s),this._mask&&((s||this.stage.graphics).drawShape(this._mask),(s?s.context:this.stage.context).clip()),null!=this._blendMode&&((s?s.context:this.stage.context).globalCompositeOperation=this._blendMode),this.filters&&0<this.filters.length){var r=void 0,o=!0,l=!1,h=void 0;try{for(var u,c=this.filters[Symbol.iterator]();!(o=(u=c.next()).done);o=!0)null!=(r=u.value)&&r.show(null!=s?s.context:this.stage.context)}catch(t){l=!0,h=t}finally{try{!o&&c.return&&c.return()}finally{if(l)throw h}}}this.canvas?(null!=s?s.context:this.stage.context).drawImage(this.canvas,0,0):this[O]?this.do_actions(s||this.stage.graphics,this.graphics,!0):this.instance?(null!=s?s.context:this.stage.context).drawImage(this.instance.image,this.instance.x,this.instance.y,this.instance.width,this.instance.height,0,0,this.instance.width/this.instance.scale,this.instance.height/this.instance.scale):this.context&&this.do_actions(s||this.stage,this.context),null==s&&this.stage.context.restore()}}},{key:"render",value:function(){this._render.apply(this,arguments)}},{key:"hitTestPoint",value:function(t,e){return 0<l.default.hitTestPoint(this,t,e,this.usePolyCollision)}},{key:"hitTestObject",value:function(t){return null!=t&&t instanceof a.default&&(t==this||l.default.hitTestObject(this,t,this.usePolyCollision))}},{key:"reset",value:function(){r(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"reset",this).call(this),this._parent&&this.removeFromParent(!1),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.instance&&this.instance instanceof v.default&&this.instance.isClone&&h.default.remove(this.instance),this._mask&&this._mask instanceof n.default&&h.default.remove(this._mask),this[O]&&h.default.remove(this[O]),this.context&&h.default.remove(this.context),this._cache&&h.default.remove(this._cache),this.mask=this.instance=this._cache=this[O]=this.colorTransform=this._context=this.canvas=this._blendMode=null,this.use_canvas=!0,this._repeat=!1,this.filters=[]}},{key:"dispose",value:function(){r(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"dispose",this).call(this),delete this._repeat,this._cache,this.filters,this._mask,this.instance,this.colorTransform,this._blendMode,this._context,this.canvas}},{key:"toString",value:function(){return k.name}},{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode!=t&&(this._blendMode=t,this.__checkDisplayUpdate())}},{key:"cache",set:function(t){if(t||this._cache){if(this.canvas=null,!t)return h.default.remove(this._cache),void(this._cache=null);if(t&&t instanceof f.default)return this._cache&&h.default.remove(this._cache),this._cache=t,void(this.canvas=this._cache.canvas);if(this._cache)this._cache.clear();else if(this._cache=f.default.instance,!this._cache)return;this._cache.setSize(this.width,this.height),this._render(this._cache,!0),this.canvas=this._cache.canvas}}},{key:"mask",get:function(){return this._mask},set:function(t){t&&t instanceof n.default&&this.instance?(this._mask=t,this.__checkDisplayUpdate()):this._mask=null}},{key:"graphics",get:function(){return this[O]=this[O]?this[O]:h.default.create(u.default),this[O]},set:function(t){this[O]=!t||t instanceof u.default?t:null}},{key:"context",get:function(){return this._context=this._context?this._context:h.default.create(d.default),this._context},set:function(t){this._context=t}}])&&s(g.prototype,m),b&&s(g,b),k);function k(){!function(t){if(!(t instanceof k))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(k.__proto__||Object.getPrototypeOf(k)).call(this));return t.use_canvas=!0,t._repeat=!1,t._mask=null,t.name=o.default.getName("display_object"),t.colorTransform=null,t[O]=null,t._blendMode=null,t._context=null,t.polyArea=null,t._cache=null,t.canvas=null,t.filters=[],t}(e.default=w).className="DisplayObject"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var r=a(i(0)),o=a(i(23)),n=a(i(2)),l=a(i(3)),h=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var u,c,d,_=(u=f,(c=[{key:"setup",value:function(t,e,i){var s,n,a;t&&(s=!(!(i=1==i)||e.sourceSize.w==e.spriteSourceSize.w&&e.sourceSize.h==e.spriteSourceSize.h),n=String(i&&0<=e.name.indexOf(".")?r.default.replaceAll(e.name,[".png",".jpg",".gif"],["","",""]):e.name).split("|"),this.animation=1<n.length?n[0]:"",this.name=1<n.length?n[1]:n[0],n=r.default.getNumber(this.name),this.label=0<n.length?n[0]:"",this.index=1<n.length?l.default.int(n[1]):0,this.x=l.default.format(i?e.frame.x:e.x),this.y=l.default.format(i?e.frame.y:e.y),this.width=l.default.format(i?e.frame.w:e.width),this.height=l.default.format(i?e.frame.h:e.height),this.frame_width=i?s?e.sourceSize.w:0:e.hasOwnProperty("frameWidth")?l.default.format(e.frameWidth):0,this.frame_height=i?s?e.sourceSize.h:0:e.hasOwnProperty("frameHeight")?l.default.format(e.frameHeight):0,this.regX=l.default.format(i?e.hasOwnProperty("pivot")?Number(e.pivot)*(0<this.frame_width?this.frame_width:this.width):e.spriteSourceSize.x*f.defaultOffset:e.frameX),this.regY=l.default.format(i?e.hasOwnProperty("pivot")?Number(e.pivot)*(0<this.frame_height?this.frame_height:this.height):e.spriteSourceSize.y*f.defaultOffset:e.frameY),this.url=t.src,h.default.useCanvas&&h.default.useCache&&(this.width!=t.width||this.height!=t.height)&&(a=o.default.splitFrames(t,this.x,this.y,this.width,this.height))?(this.image=a,this.x=this.y=0):this.image=t,this.isClone=!1)}},{key:"clone",value:function(){var t=n.default.create(f);return t.animation=this.animation,t.name=this.name,t.label=this.label,t.index=this.index,t.regX=this.regX,t.regY=this.regY,t.x=this.x,t.y=this.y,t.scale=this.scale,t.image=this.image,t.width=this.width,t.height=this.height,t.frame_width=this.frame_width,t.frame_height=this.frame_height,t.url=this.url,t.isClone=!0,t}},{key:"reset",value:function(t,e){var i=0<arguments.length&&void 0!==t?t:null,s=1<arguments.length&&void 0!==e?e:null;this.x=this.y=this.regX=this.regY=this.index=this.width=this.height=this.frame_width=this.frame_height=0,this.image=this.name=this.animation=this.label=this.url=null,this.isClone=!1,this.scale=1,i&&s&&this.setup(i,s)}},{key:"dispose",value:function(){this.reset(),delete this.x,this.y,this.scale,this.name,this.animation,this.label,this.url,this.regX,this.regY,this.frame_width,this.frame_height,this.image,this.index,this.width,this.height,this.isClone}},{key:"toString",value:function(){var t="{";return t+='"name":'+this.name+",",t+='"regX":'+this.regX+",",t+='"regY":'+this.regY+",",t+='"label":'+this.label+",",t+='"index":'+this.index+",",t+='"width":'+this.width+",",t+='"height":'+this.height+",",t+='"animation":'+this.animation+",",t+='"frame_width":'+this.frame_width+",",t+='"frame_height":'+this.frame_height+",",t+='"x":'+this.x+",",t+='"y":'+this.y+",",t+='"url":'+this.url+",",(t+='"scale":'+this.scale)+"}"}}])&&s(u.prototype,c),d&&s(u,d),f);function f(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this),this.x=this.y=this.regX=this.regY=this.index=this.width=this.height=this.frame_width=this.frame_height=0,this.image=this.name=this.animation=this.label=this.url=null,this.isClone=!1,this.scale=1,t&&e&&this.setup(t,e)}(e.default=_).defaultOffset=-1,_.className="Source"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=l(i(60)),a=l(i(61)),r=l(i(22)),o=l(i(8));function l(t){return t&&t.__esModule?t:{default:t}}var h,u,c,d=(h=_,c=[{key:"init",value:function(){_._inited=!0,_.register("easenone",n.default.easeNone),_.register("linear",n.default.easeNone),_.register("easeinquad",n.default.easeInQuad),_.register("easeoutquad",n.default.easeOutQuad),_.register("easeinoutquad",n.default.easeInOutQuad),_.register("easeoutinquad",n.default.easeOutInQuad),_.register("easeincubic",n.default.easeInCubic),_.register("easeoutcubic",n.default.easeOutCubic),_.register("easeinoutcubic",n.default.easeInOutCubic),_.register("easeoutincubic",n.default.easeOutInCubic),_.register("easeinquart",n.default.easeInQuart),_.register("easeoutquart",n.default.easeOutQuart),_.register("easeinoutquart",n.default.easeInOutQuart),_.register("easeoutinquart",n.default.easeOutInQuart),_.register("easeinquint",n.default.easeInQuint),_.register("easeoutquint",n.default.easeOutQuint),_.register("easeinoutquint",n.default.easeInOutQuint),_.register("easeoutinquint",n.default.easeOutInQuint),_.register("easeinsine",n.default.easeInSine),_.register("easeoutsine",n.default.easeOutSine),_.register("easeinoutsine",n.default.easeInOutSine),_.register("easeoutinsine",n.default.easeOutInSine),_.register("easeincirc",n.default.easeInCirc),_.register("easeoutcirc",n.default.easeOutCirc),_.register("easeinoutcirc",n.default.easeInOutCirc),_.register("easeoutincirc",n.default.easeOutInCirc),_.register("easeinexpo",n.default.easeInExpo),_.register("easeoutexpo",n.default.easeOutExpo),_.register("easeinoutexpo",n.default.easeInOutExpo),_.register("easeoutinexpo",n.default.easeOutInExpo),_.register("easeinelastic",n.default.easeInElastic),_.register("easeoutelastic",n.default.easeOutElastic),_.register("easeinoutelastic",n.default.easeInOutElastic),_.register("easeoutinelastic",n.default.easeOutInElastic),_.register("easeinback",n.default.easeInBack),_.register("easeoutback",n.default.easeOutBack),_.register("easeinoutback",n.default.easeInOutBack),_.register("easeoutinback",n.default.easeOutInBack),_.register("easeinbounce",n.default.easeInBounce),_.register("easeoutbounce",n.default.easeOutBounce),_.register("easeinoutbounce",n.default.easeInOutBounce),_.register("easeoutinbounce",n.default.easeOutInBounce),_.register("easeinstrong",n.default.easeInStrong),_.register("easeoutstrong",n.default.easeOutStrong),_.register("easeinoutstrong",n.default.easeInOutStrong)}},{key:"register",value:function(t,e){_._transitionList[t]=e}},{key:"count",value:function(t,e,i,s,n,a,r){_._inited||_.init();var o=_.getEaseName(t,e);return _._tween(o,n,s,s-i,a,r)}},{key:"getEaseName",value:function(t,e){return t==_.LINEAR?_.LINEAR:"ease"+(t==_.NONE?_.NONE:e+t)}},{key:"_tween",value:function(t,e,i,s,n,a){return _._inited||_.init(),_._transitionList.hasOwnProperty(t)?_._transitionList[t](s,e,i,n,a):i}},{key:"to",value:function(t,e,i){if(!(null==t||e<=0||null==i)){0==_._tweens.length&&(!_._locked&&r.default.current?r.default.current.addEventListener(o.default.ENTER_FRAME,_._enterFrame):(null==_._timer&&(_._timer=new a.default),_._timer.addEventListener(a.default.TIME,_._enterFrame),_._timer.start()));var s={target:t,duration:e,vars:i};s.max=Math.ceil(e*a.default.fps),s.min=0,s.vars.hasOwnProperty("delay")&&s.vars.delay?(s.delay=Math.ceil(Number(s.vars.delay)*a.default.fps),delete s.vars.delay):s.delay=0,s.vars.hasOwnProperty("ease")&&s.vars.ease?(s.ease=s.vars.ease,delete s.vars.ease):s.ease="easeoutquad",s.vars.hasOwnProperty("easeParams")&&s.vars.easeParams&&(s.easeParams=s.vars.easeParams,delete s.vars.easeParams),s.vars.hasOwnProperty("onStart")&&s.vars.onStart&&(s.onStart=s.vars.onStart,delete s.vars.onStart),s.vars.hasOwnProperty("onStartParams")&&s.vars.onStartParams&&(s.onStartParams=s.vars.onStartParams,delete s.vars.onStartParams),s.vars.hasOwnProperty("onUpdate")&&s.vars.onUpdate&&(s.onUpdate=s.vars.onUpdate,delete s.vars.onUpdate),s.vars.hasOwnProperty("onUpdateParams")&&s.vars.onUpdateParams&&(s.onUpdateParams=s.vars.onUpdateParams,delete s.vars.onUpdateParams),s.vars.hasOwnProperty("onComplete")&&s.vars.onComplete&&(s.onComplete=s.vars.onComplete,delete s.vars.onComplete),s.vars.hasOwnProperty("onCompleteParams")&&s.vars.onCompleteParams&&(s.onCompleteParams=s.vars.onCompleteParams,delete s.vars.onCompleteParams);var n=void 0;for(n in s.vars)null==s.first&&(s.first={}),s.first[n]=null==t[n]?0:t[n],s.vars[n]-=s.first[n];_._tweens.push(s)}}},{key:"pause",value:function(){_._timer&&_._timer.isStart()?(_._timer.stop(),_._timer.removeEventListener(a.default.TIME,_._enterFrame)):r.default.current&&r.default.current.removeEventListener(o.default.ENTER_FRAME,_._enterFrame)}},{key:"resume",value:function(){_._timer&&0<_._tweens.length&&!_._timer.isStart()?(_._timer.addEventListener(a.default.TIME,_._enterFrame),_._timer.start()):r.default.current&&r.default.current.addEventListener(o.default.ENTER_FRAME,_._enterFrame)}},{key:"remove",value:function(t){if(null!=t&&0!=_._tweens.length){for(var e=void 0,i=_._tweens.length,e=0;e<i;e++)_._tweens[e].target==t&&(_._tweens.splice(e,1),i--,e--);0==_._tweens.length&&_.pause()}}},{key:"_enterFrame",value:function(){if(0!=_._tweens.length)for(var t,e=void 0,i=_._tweens.length,e=0;e<i;e++)t=_._tweens[e],_._setAttribute(t)}},{key:"_setAttribute",value:function(t){if(null!=t){var e=void 0,i=t.target;if(t.delay<=1&&0==t.min&&t.hasOwnProperty("onStart")&&t.onStart&&(t.onStart.apply(null,t.hasOwnProperty("onStartParams")?t.onStartParams:null),delete t.onStartParams,delete t.onStart),0<t.delay)t.delay--;else{for(e in t.min++,t.vars)i[e]=t.min>=t.max?t.vars[e]+t.first[e]:_._tween(t.ease,t.first[e],t.vars[e],t.min,t.max,t.easeParams);if(t.min>=t.max){var s=_._tweens.indexOf(t);return _._tweens.splice(s,1),0==_._tweens.length&&_.pause(),void(t.hasOwnProperty("onComplete")&&t.onComplete&&t.onComplete.apply(null,t.hasOwnProperty("onCompleteParams")?t.onCompleteParams:null))}t.hasOwnProperty("onUpdate")&&t.onUpdate&&t.onUpdate.apply(null,t.hasOwnProperty("onUpdateParams")?t.onUpdateParams:null)}}}}],(u=null)&&s(h.prototype,u),c&&s(h,c),_);function _(){!function(t){if(!(t instanceof _))throw new TypeError("Cannot call a class as a function")}(this)}(e.default=d).NONE="none",d.LINEAR="linear",d.QUAD="quad",d.CUBIC="cubic",d.QUART="quart",d.QUINT="quint",d.SINE="sine",d.CIRC="circ",d.EXPO="expo",d.ELASTIC="elastic",d.BACK="back",d.BOUNCE="bounce",d.STRONG="strong",d.IN="in",d.OUT="out",d.IN_OUT="inout",d.OUT_IN="outin",d._timer,d._tweens=[],d._inited=!1,d._locked=!1,d._transitionList={},d.className="TweenLite"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var r=n(i(0)),l=n(i(1));function n(t){return t&&t.__esModule?t:{default:t}}var a,o,h,u=(a=c,h=[{key:"instance",value:function(){return c._current_instance=c._current_instance||new c}}],(o=[{key:"reset",value:function(){this.caches=null,this.listeners={}}},{key:"hasEventListener",value:function(t,e){return!r.default.isEmpty(e)&&this.caches?null!=this.caches[t+"#"+e]:this.listeners&&null!=this.listeners[t]}},{key:"addEventListener",value:function(t,e,i){"string"==typeof t&&"function"==typeof e&&(!r.default.isEmpty(i)&&this.hasEventListener(t,i)||(null==this.listeners[t]&&(this.listeners[t]=[]),-1==this.listeners[t].indexOf(e)&&this.listeners[t].push(e),i&&(this.caches=this.caches||{},this.caches[t+"#"+i]=e)))}},{key:"removeEventListener",value:function(t,e,i){var s=2<arguments.length&&void 0!==i?i:null;if(null!=this.listeners&&null!=this.listeners[t]){if(null==e){if(r.default.isEmpty(s)||null==this.caches)return void this._remove_listeners(t);e=this.caches[t+"#"+s],delete this.caches[t+"#"+s]}if("function"==typeof e){for(var n=this.listeners[t].length,a=0;a<n;a++)if(this.listeners[t][a]==e){this.listeners[t].splice(a,1),n--,a--;break}0==this.listeners[t].length&&this._remove_listeners(t)}}}},{key:"_remove_listeners",value:function(t){if(delete this.listeners[t],null!=this.caches)for(var e in this.caches)0==e.indexOf(t)&&delete this.caches[e]}},{key:"dispatchEvent",value:function(t){var e=this.listeners;if(null==t||!t.hasOwnProperty("type")||!t.type||null==e||null==e[t.type]){if(t&&!l.default.gc(t))try{t.dispose()}catch(t){}return!1}var i=e[t.type].slice();null==t.target&&(t.target=this);var s=!0,n=!1,a=void 0;try{for(var r,o=i[Symbol.iterator]();!(s=(r=o.next()).done);s=!0)r.value.call(this,t)}catch(t){n=!0,a=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw a}}return t&&!l.default.gc(t)&&t.dispose(),!0}},{key:"dispose",value:function(){if((this.caches=null)!=this.listeners){for(var t in this.listeners)delete this.listeners[t];delete this.listeners,this.caches}}},{key:"toString",value:function(){return'{"listeners":'+ObjectUtil.toString(this.listeners)+"}"}}])&&s(a.prototype,o),h&&s(a,h),c);function c(){!function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),this.caches=null,this.listeners={}}(e.default=u).className="EventDispatcher",u._current_instance=null},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=u(i(2)),a=u(i(9)),r=u(i(11)),o=u(i(0)),l=u(i(40)),h=u(i(10));function u(t){return t&&t.__esModule?t:{default:t}}var c,d,_,f=(c=p,_=[{key:"create",value:function(t,e){if(o.default.isEmpty(t))return null;e=e?1==e?{x:0,y:0}:e:null;var i=n.default.create(p),s=o.default.html2object(t);return s?(s.children&&delete s.children,s.transform&&delete s.transform,i.type=s.tagName,delete s.tagName,i.properties=s,i.rect=n.default.create(h.default),i.rect.data=l.default.getShapeBounds(i),e?l.default.replace(i,e):i):null}},{key:"string",value:function(t){if(!t)return"";var e,i="<"+t.type+" ";for(e in t.properties)i+=e+'="'+("style"==e?o.default.buildParams(t.properties[e],!0):t.properties[e])+'" ';return i+"/>"}}],(d=[{key:"setup",value:function(t,e){return this.type=t.toLowerCase(),this.properties=e,this.rect=n.default.create(h.default),this.rect.data=l.default.getShapeBounds(this),this}},{key:"reset",value:function(t,e){var i=0<arguments.length&&void 0!==t?t:null,s=1<arguments.length&&void 0!==e?e:null;this.id=r.default.getName("shape_vo"),this.rect&&this.rect instanceof h.default&&n.default.remove(this.rect),this.rect=this.type=this.properties=null,i&&s&&this.setup(i,s)}},{key:"clone",value:function(){var t=n.default.create(p);return t.type=this.type,this.rect&&(t.rect=this.rect.clone()),t.properties=a.default.copyAttribute({},this.properties,!1),t}},{key:"dispose",value:function(){this.rect&&n.default.remove(this.rect),delete this.id,this.rect,this.type,this.properties}},{key:"toString",value:function(){return'{"id":"'+this.id+'","type":"'+this.type+'","rect":'+(this.rect?this.rect.toString():"")+'","properties":'+JSON.stringify(this.properties)+"}"}}])&&s(c.prototype,d),_&&s(c,_),p);function p(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;!function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this),this.id=r.default.getName("shape_vo"),this.type=this.rect=this.properties=null,t&&e&&this.setup(t,e)}(e.default=f).CILP="_clip",f.className="ShapeVO"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n,a,r,o=i(0),l=o&&o.__esModule?o:{default:o},h=(n=c,r=[{key:"getDOM",value:function(t){return document.getElementById(t)}},{key:"createDOM",value:function(t,e){var i=document.createElement(t);return null==e?i:c.setAttributes(i,e)}},{key:"setAttributes",value:function(t,e){if(null!=t&&null!=e){for(var i in e){var s=e[i];if("style"==i)for(var n in t.style||(t.style={}),s)t.style[n]=s[n];else s&&(t[i]=s)}return t}}},{key:"createDOMDrawable",value:function(t,e){var i,s,n,a,r=t.tagName||"div",o=e.image,l=t.width||o&&o.width,h=t.height||o&&o.height,u=c.createDOM(r);return t.id&&(u.id=t.id),u.style.position="absolute",u.style.left=(t.left||0)+"px",u.style.top=(t.top||0)+"px",u.style.width=l+"px",u.style.height=h+"px","canvas"==r?(u.width=l,u.height=h,o&&(i=u.getContext("2d"),s=e.rect||[0,0,l,h],i.drawImage(o,s[0],s[1],s[2],s[3],t.x||0,t.y||0,t.width||s[2],t.height||s[3]))):(u.style.opacity=null!=t.alpha?t.alpha:1,u.style.overflow="hidden",o&&o.src&&(u.style.backgroundImage="url("+o.src+")",n=t.rectX||0,a=t.rectY||0,u.style.backgroundPosition=-n+"px "+-a+"px")),u}},{key:"getElementOffset",value:function(t){for(var e=t.offsetLeft,i=t.offsetTop;(t=t.offsetParent)&&t!=document;)e+=t.offsetLeft,i+=t.offsetTop;return{left:e,top:i}}},{key:"contains",value:function(t,e){if(!t||!e)return!1;if(t===e)return!0;if(!("compareDocumentPosition"in document||"contains"in document))return c._contains_manual(t,e);var i=9===t.nodeType?t.documentElement:t,s=e&&e.parentNode;return t===s||!(!s||1!==s.nodeType||!(i.contains?i.contains(s):t.compareDocumentPosition&&16&t.compareDocumentPosition(s)))}},{key:"_contains_manual",value:function(t,e){if(!e)return!1;for(;e=e.parentNode;)if(e===t)return!0;return!1}},{key:"each",value:function(t,e){if(!l.default.isEmpty(t)&&e&&"function"==typeof e){var i=document.createElement("div");return i.innerHTML=t,c._each_do(i,e),i.innerHTML}}},{key:"_each_do",value:function(t,e){for(var i,s=t.childElementCount,n=0;n<s;n++)null!=t&&null!=t.children[n]&&(0<(i=t.children[n]).childElementCount&&c._each_do(i,e),e&&e(i))}},{key:"dispatchEvent",value:function(t,e,i){var s=document.createEvent(t);s.initEvent(e,!0,!1),(i||document).dispatchEvent(s)}}],(a=null)&&s(n.prototype,a),r&&s(n,r),c);function c(){!function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this)}e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=d(i(5)),_=d(i(8)),f=d(i(2)),a=d(i(11)),o=d(i(10)),p=d(i(21)),v=d(i(7)),l=d(i(14)),y=d(i(1)),h=d(i(30)),u=d(i(6)),c=d(i(4));function d(t){return t&&t.__esModule?t:{default:t}}var g,m,b,O=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(w,n.default),g=w,b=[{key:"translationType",value:function(t){switch(t){case"touchstart":return _.default.MOUSE_DOWN;case"touchmove":return _.default.MOUSE_MOVE;case"touchend":return _.default.MOUSE_UP}return""}}],(m=[{key:"initCanvas",value:function(t,e,i,s){var n=!1;if(null==(this.canvas=i)){try{this.canvas=document.createElement("canvas")}catch(t){n=!0,this.canvas={style:{},context:{}},trace("[WARN] Stage initCanvas()",t)}this.canvas.width=t,this.canvas.height=e,s&&(this.canvas.contenteditable=this.canvas.draggable=this.canvas.dropzone=!0),this.canvas.tabindex=0,this.canvas.style.left=this.canvas.style.top="0px",this.canvas.style.position=y.default.position,this.canvas.style.zIndex=y.default.layer,this.canvas.style.padding=0,this.canvas.style.margin=0,null==this.div&&(this.div=p.default.createDOM("div",{id:"container_"+this.name,style:{overflow:"hidden",position:y.default.position,height:e+"px",width:t+"px",padding:"0",margin:"0",cursor:""}}),document.body.appendChild(this.div),this._parentNode=this.div),n||this.div.appendChild(this.canvas)}this.stageWidth=t,this.stageHeight=e,this.context=n?this.canvas.context:this.canvas.getContext("2d"),this.updatePosition(),w.current==this&&(y.default.context=this.context,y.default.canvas=this.canvas,y.default.div=this.div,y.default.height=e,y.default.width=t),n||(this._graphics=new h.default(this.context)),this.enable(!0)}},{key:"size",value:function(t,e){null!=t&&null!=e&&null!=this.div&&(t=Math.floor(t),e=Math.floor(e),this.div&&(this.div.style.height=e+"px",this.div.style.width=t+"px"),this.canvas&&(this.canvas.width=t,this.canvas.height=e),this.stageWidth=t,this.stageHeight=e,y.default.autoShapeSize&&this.dispatchEvent(new c.default(_.default.UPDATE)))}},{key:"enable",value:function(t){var e;this.__enter_frame=this.__enter_frame?this.__enter_frame:y.default.delegate(this._enterFrame,this),(this._enable=t)?y.default.animationFrame?this._enterFrame():(this.timer=this.timer?this.timer:new Timer,this.timer.addEventListener(Timer.TIME,this.__enter_frame,!1),this.timer.start()):this.timer&&(this.timer.removeEventListener(Timer.TIME,this.__enter_frame),this.timer.stop()),this.interactive&&(this.__message_handler=this.__message_handler?this.__message_handler:y.default.delegate(this._message_handler,this),this.__touch_handler=this.__touch_handler?this.__touch_handler:y.default.delegate(this._touchHandler,this),this.__mouse_handler=this.__mouse_handler?this.__mouse_handler:y.default.delegate(this._mouseHandler,this),this.__key_handler=this.__key_handler?this.__key_handler:y.default.delegate(this._keyHandler,this),e=this.div?this.div:document,y.default.supportTouch?t?(e.addEventListener("touchstart",this.__touch_handler,{passive:!1}),e.addEventListener("touchmove",this.__touch_handler,{passive:!1}),document.addEventListener("touchend",this.__touch_handler,{passive:!1})):(e.removeEventListener("touchstart",this.__touch_handler),e.removeEventListener("touchmove",this.__touch_handler),document.removeEventListener("touchend",this.__touch_handler)):(t?(e.addEventListener(y.default.isFirefox?"DOMMouseScroll":"mousewheel",this.__mouse_handler),e.addEventListener("mousedown",this.__mouse_handler),e.addEventListener("mousemove",this.__mouse_handler),e.addEventListener("mouseenter",this.__mouse_handler),e.addEventListener("mouseleave",this.__mouse_handler),document.addEventListener("mouseup",this.__mouse_handler)):(e.removeEventListener(y.default.isFirefox?"DOMMouseScroll":"mousewheel",this.__mouse_handler),e.removeEventListener("mousedown",this.__mouse_handler),e.removeEventListener("mousemove",this.__mouse_handler),e.removeEventListener("mouseenter",this.__mouse_handler),e.removeEventListener("mouseleave",this.__mouse_handler),document.removeEventListener("mouseup",this.__mouse_handler)),t?(y.default.root.addEventListener("message",this.__message_handler),document.addEventListener("keydown",this.__key_handler),document.addEventListener("keyup",this.__key_handler)):(y.default.root.removeEventListener("message",this.__message_handler),document.removeEventListener("keydown",this.__key_handler),document.removeEventListener("keyup",this.__key_handler))))}},{key:"_message_handler",value:function(t){this.dispatchEvent(new c.default(_.default.MESSAGE,t&&t.data?t.data:t))}},{key:"resize",value:function(t,e){this.dispatchEvent(new c.default(_.default.RESIZE,{width:t,height:e}))}},{key:"_enterFrame",value:function(){var t;this.dispatchEvent(new c.default(_.default.ENTER_FRAME)),this.auto_clear&&(0<n.default._num_canvas_target||this.last_fresh)&&(this.auto_fresh&&this.clear(),0<!n.default._num_canvas_target&&this.last_fresh&&(this.last_fresh=!1,this.canvas&&(t=this._parent_node,this._parent_node=this.canvas.parentNode,this._parent_node?this._parent_node.removeChild(this.canvas):this._parent_node=t||this.div))),this._enable&&y.default.animationFrame&&y.default.animationFrame(this.__enter_frame),this.numChildren<=0||this.render()}},{key:"render",value:function(){!this.last_fresh&&0<n.default._num_canvas_target&&(this.last_fresh=!0,this.canvas&&this._parent_node&&this._parent_node.appendChild(this.canvas)),l.default._depth_count=0,this.auto_fresh&&(this.auto_fresh=!1,r(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"render",this).call(this))}},{key:"_dragHandler",value:function(){var t=this._dragMouseX,e=this._dragMouseY,i=this.dragTarget.origin,s=this.dragTarget.localToGlobal(i?i.x:0,i?i.y:0),i=this.dragTarget.localToGlobal(t,e),t=Math.round(this.mouseX-(i.x-s.x)),e=Math.round(this.mouseY-(i.y-s.y)),n=void 0;this._block&&!this._block.contains(t,e)&&(t=(n=this.dragTarget.localToGlobal(0,0)).x+(t-n.x)*this.block_ratio,e=n.y+(e-n.y)*this.block_ratio,f.default.remove(n)),this._area&&(n=f.default.create(u.default).set(t,e),t=(n=o.default.innerPoint(this._area,n)).x,e=n.y,f.default.remove(n)),i&&f.default.remove(i),i=this.dragTarget.parent.globalToLocal(t,e),this.dragTarget.x=i.x,this.dragTarget.y=i.y,this._isTap||this.dragTarget.dispatchEvent(new c.default(_.default.DRAG_MOVE)),s&&f.default.remove(s),i&&f.default.remove(i)}},{key:"clear",value:function(){this.context&&this.canvas&&this.canvas.parentNode&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"_touchHandler",value:function(t){var e,i=t.touches&&0<t.touches.length?t.touches[0]:t.changedTouches&&0<t.changedTouches.length?t.changedTouches[0]:null,s=(i.pageX||i.clientX)-this.stageX,n=(i.pageY||i.clientY)-this.stageY,a=s==this.mouseX&&n==this.mouseY;this.mouseX=s,this.mouseY=n,this.traceMouseTarget&&this._getMouseTarget(t),(i={id:i?i.identifier:0,target:this.mouseTarget||this,mouseX:this.mouseX,mouseY:this.mouseY,button:0}).type=w.translationType(t.type),(i=v.default.c("se",i)).touchs=[],a&&i.type==_.default.MOUSE_MOVE&&(i.type=_.default.MOUSE_OVER),i.type==_.default.MOUSE_DOWN?(this.startPoint.x=s,this.startPoint.y=n,this.startPoint.n=t.touches.length):!a&&t.touches.length==this.startPoint.n&&Math.hypot(this.startPoint.x-s,this.startPoint.y-n)<w.maxTap&&(a=!0),this.mouseTarget&&this.mouseTarget.onMouseEvent&&(this.mouseTarget.onMouseEvent(i),i.type==_.default.MOUSE_UP)&&(e=v.default.c("se",{type:_.default.MOUSE_OUT}),this.mouseTarget.onMouseEvent(e),f.default.remove(e));for(var r,o,l=void 0,h=t.touches.length,l=0;l<h;l++)null!=(r=t.touches[l]).target&&((o=w.translationType(r.type))!=_.default.MOUSE_UP&&!p.default.contains(this.div,r.target)||(s=(r.pageX||r.clientX)-this.stageX,n=(r.pageY||r.clientY)-this.stageY,i.touchs.push({mouseX:s,mouseY:n,type:o,id:r.identifier})));i.length=i.touchs?i.touchs.length:0,i.type==_.default.MOUSE_MOVE&&this.dragTarget&&this._dragHandler();var u=i.target.breakTouch,c=i.target!=this?v.default.c("se",i):null,d=this._checkMouseClick(i,a);i.target.dispatchEvent(i),c&&this.dispatchEvent(c),(y.default.breakTouch||u||d||this.breakTouch)&&i.type!=_.default.MOUSE_UP&&(t.preventDefault(),t.stopPropagation())}},{key:"_mouseHandler",value:function(t){if(null==t.target||"mouseleave"==t.type||!p.default.contains(this.div,t.target)&&"mouseup"!=t.type)return this._activate=!1,void this.dispatchEvent(v.default.c("se",[_.default.MOUSE_OUT,this._activate]));var e=t.pageX-this.stageX,i=t.pageY-this.stageY,s=v.default.c("se",{type:t.type}),n=e==this.mouseX&&i==this.mouseY;"mouseenter"==t.type?(this._activate=!0,s.type=_.default.MOUSE_OVER,this.dispatchEvent(v.default.c("se",[_.default.MOUSE_OVER,this._activate]))):!this.isFullScreen&&this._activate&&(e<0||i<0||e>this.stageWidth||i>this.stageHeight)?(this._activate=!1,this.dispatchEvent(v.default.c("se",[_.default.MOUSE_OUT,this._activate]))):this._activate||"mouseup"==t.type||(this._activate=!0,this.dispatchEvent(v.default.c("se",[_.default.MOUSE_OVER,this._activate]))),n&&t.type==_.default.MOUSE_MOVE&&(s.type=_.default.MOUSE_OVER),"DOMMouseScroll"==t.type&&(s.type=_.default.MOUSE_WHEEL),this.mouseX=e,this.mouseY=i,this.traceMouseTarget&&this._getMouseTarget(t),s.type==_.default.MOUSE_DOWN?(this.startPoint.x=e,this.startPoint.y=i):!n&&Math.hypot(this.startPoint.x-e,this.startPoint.y-i)<w.maxTap&&(n=!0),s.target=this.mouseTarget||this,s.mouseX=this.mouseX,s.mouseY=this.mouseY,s.delta=t.wheelDelta?t.wheelDelta/120:-t.detail/3,this.mouseTarget&&this.mouseTarget.onMouseEvent&&this.mouseTarget.onMouseEvent(s),s.type==_.default.MOUSE_MOVE&&this.dragTarget&&this._dragHandler(),this.setCursor(this.mouseTarget);var a=s.target.breakTouch,r=s.target!=this?v.default.c("se",s):null,o=this._checkMouseClick(s,n);s.target.dispatchEvent(s),r&&this.dispatchEvent(r),(y.default.breakTouch||a||o||this.breakTouch)&&s.type!=_.default.MOUSE_UP&&(t.preventDefault(),t.stopPropagation())}},{key:"_checkMouseClick",value:function(t,e){var i;return t.type==_.default.MOUSE_DOWN&&this.mouseTarget&&(this._mouseDownTarget=this.mouseTarget,this._isTap=!0),t.type==_.default.MOUSE_UP&&(null!=this._mouseDownTarget&&t.target!=this&&t.target==this._mouseDownTarget&&(t.target.dispatchEvent(this.__copyStageEvent(t,this._mouseDownTarget,_.default.MOUSE_CLICK)),this._isTap&&(i=this.__copyStageEvent(t,this._mouseDownTarget,_.default.MOUSE_TAP),this.__transmitEvent(i),t.target.dispatchEvent(i))),this._mouseDownTarget=null,this._isTap=!1),t.type!=_.default.MOUSE_MOVE||e?t.target!=this&&this.__transmitEvent(t):this._isTap=!1}},{key:"__transmitEvent",value:function(t){if(null==t||null==t.target)return!1;for(var e,i=(i=t.target).parent;null!=i&&i!=this;i=i.parent){if(i.breakTouch)return!0;i.mouseEnabled&&(t.type==_.default.MOUSE_OVER||t.type==_.default.MOUSE_OUT?(e=i.hitTestPoint(this.mouseX,this.mouseY),(t.type==_.default.MOUSE_OVER&&e||t.type==_.default.MOUSE_OUT&&!e)&&i.dispatchEvent(this.__copyStageEvent(t,i))):i.dispatchEvent(this.__copyStageEvent(t,i)))}return!1}},{key:"__copyStageEvent",value:function(t,e,i){var s=v.default.c("se",t);return s.target=e,s.type=i||s.type,s}},{key:"_getMouseTarget",value:function(){var t=void 0,e=this.getObjectUnderPoint(this.mouseX,this.mouseY,this.usePixelTrace,!1),i=this.mouseTarget;this.mouseTarget=e,i&&i!=e&&((t=v.default.c("se",[_.default.MOUSE_OUT])).target=i,t.mouseX=this.mouseX,t.mouseY=this.mouseY,this.__transmitEvent(t),i.onMouseEvent&&i.onMouseEvent(t),i.dispatchEvent&&i.dispatchEvent(t),this._mouseDownTarget==i&&(this._mouseDownTarget=null)),e&&i!=e&&((t=v.default.c("se",[_.default.MOUSE_OVER])).target=e,t.mouseX=this.mouseX,t.mouseY=this.mouseY,this.__transmitEvent(t),e.onMouseEvent&&e.onMouseEvent(t),e.dispatchEvent&&e.dispatchEvent(t))}},{key:"startDrag",value:function(t,e,i,s){var n;null!=t&&null!=t.parent&&(this.dragTarget&&this.stopDrag(),this.dragTarget=t,i?(this._layer=t.getIndex(),this.dragTarget.toTop()):this._layer=-1,this._area=e&&e instanceof o.default?e:null,this._block=s&&s instanceof o.default?s:null,n=this.dragTarget.globalToLocal(this.mouseX,this.mouseY),this._dragMouseX=n.x,this._dragMouseY=n.y)}},{key:"stopDrag",value:function(){null!=this.dragTarget&&null!=this.dragTarget&&(0<=this._layer&&this.dragTarget&&this.dragTarget.parent&&this.dragTarget.parent.addChildAt(this.dragTarget,this._layer),this._dragMouseX=this._dragMouseY=0,this.dragTarget=null,this._block=null,this._area=null,this._layer=-1)}},{key:"_keyHandler",value:function(t){this.dispatchEvent(new c.default(t.type,(t||y.default.root.event).keyCode,t,this.mouseTarget))}},{key:"setCursor",value:function(t){this.div.style.cursor=null==this.cursor||""==this.cursor?t&&null!=t.cursor?t.cursor:"":this.cursor}},{key:"updatePosition",value:function(){var t;(null!=this.div&&p.default.contains(document,this.div)||null!=this.canvas&&p.default.contains(document,this.canvas))&&(t=p.default.getElementOffset(this.div||this.canvas),this.stageX=t.left,this.stageY=t.top)}},{key:"toString",value:function(){return w.name}},{key:"dispose",value:function(){this.enable(!1),this.timer&&this.timer.dispose(),this._graphics&&this._graphics.dispose(),w.current==this&&(w.current=null),this.stage=this.context=this.canvas=this.div=null,r(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"dispose",this).call(this),delete this._graphics,this.traceMouseTarget,this._parent_node,this.dragTarget,this.mouseTarget,this._mouseDownTarget,this.timer,delete this.startPoint,this.isFullScreen,this.stageX,this.stageY,this.mouseX,this.mouseY,this._dragMouseX,this._dragMouseY,delete this.__message_handler,this.__touch_handler,this.__mouse_handler,this.__key_handler,this.__enter_frame,delete this._enable,this.interactive,this._activate,this.block_ratio,this._block,this.context,this.canvas,this.div,this.auto_clear,this.last_fresh,this.auto_fresh}},{key:"graphics",get:function(){return this._graphics}}])&&s(g.prototype,m),b&&s(g,b),w);function w(){!function(t){if(!(t instanceof w))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return t.usePixelTrace=!1,t.traceMouseTarget=!0,t.timer=t.dragTarget=t.mouseTarget=t._mouseDownTarget=null,t.stageX=t.stageY=0,t.mouseX=t.mouseY=0,t.isFullScreen=!1,t.auto_clear=!0,t.last_fresh=!0,t.auto_fresh=!0,t.block_ratio=.05,t._dragMouseX=t._dragMouseY=0,t.stageWidth=t.stageHeight=0,t.name=a.default.getName("stage"),t.startPoint={x:0,y:0,n:0},t._parent_node=null,t._activate=!1,t._isTap=!1,t._graphics=null,t._block=null,t._area=null,t._layer=-1,t.interactive=!0,t._enable=!1,(t.stage=t).context,t.canvas,t.div,w.current=t}(e.default=O).maxTap=8,O.current=null,O.className="Stage"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var r=n(i(5)),o=n(i(30)),l=n(i(0)),h=n(i(2)),u=n(i(13)),c=n(i(3));function n(t){return t&&t.__esModule?t:{default:t}}var a,d,_,f=(a=p,_=[{key:"create",value:function(t){var e=t||{};return e.canvas||(e.canvas=document.createElement("canvas"),e.context=e.canvas.getContext("2d")),e}},{key:"getCache",value:function(t,e){var i=p.create();return i.canvas.width=t.width,i.canvas.height=t.height,i.context.drawImage(t,0,0,t.width,t.height),i.canvas.toDataURL(e||"image/png")}},{key:"splitFrames",value:function(t,e,i,s,n){if(!t||!s||!n)return null;var a=document.createElement("canvas"),r=a.getContext("2d");return a.height=n,a.width=s,r.drawImage(t,e,i,s,n,0,0,s,n),a}},{key:"toImage",value:function(t,e){if(null!=t){var i=new Image;try{i.src=t.toDataURL(e||"image/png")}catch(t){return trace("[ERROR]",t),null}return i.height=c.default.int(t.height),i.width=c.default.int(t.width),i}}},{key:"cutImage",value:function(t,e,i,s){if(null==t||t.width==e&&t.height==i)return t;var n=c.default.getSizeScale(t.width,t.height,e,i,s),a=p.create();return a.canvas.width=e,a.canvas.height=i,a.context.scale(n,n),a.context.translate(.5*(e-t.width*n),.5*(i-t.height*n)),a.context.drawImage(t,0,0,t.width,t.height,0,0,t.width,t.height),p.toImage(a.canvas)}},{key:"toCanvas",value:function(t,e,i){if(null!=t)return i=null==i||1==i,e=e||p.create(),i&&e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.canvas.height=t.height,e.canvas.width=t.width,e.context.drawImage(t,0,0),e.canvas}},{key:"getPixelAphla",value:function(t,e,i){return null==t||e>t.width||i>t.height?255:t.getImageData(e,i,1,1).data[3]}},{key:"clearContext",value:function(t){t&&t.clear(0,0,t.width,t.height)}},{key:"containerToImage",value:function(t,e,i,s,n){if(null!=t){var a=h.default.create(o.default);a.canvas.width=Math.ceil(i||t.width),a.canvas.height=Math.ceil(s||t.height),l.default.isEmpty(n)||(a.beginFill(n),a.drawRect(0,0,a.canvas.width,a.canvas.height),a.endFill()),p._renderContainer(a,t,t);var r=void 0;if(e)try{r=a.canvas.toDataURL(e||"image/png")}catch(t){return trace("[ERROR]",t),null}else r=p.toImage(a.canvas,l.default.isEmpty(n)?null:"image/jpg");return h.default.remove(a),r}}},{key:"_renderContainer",value:function(t,e,i){for(var s=void 0,n=void 0,s=0,a=e._children.length;s<a;s++)if((n=e._children[s])instanceof r.default)try{0<=u.default.getQualifiedSuperclassName(n).split(".").indexOf("Sprite")||0==n.name.indexOf("sprite")?n.render(t,i):p._renderContainer(t,n,i)}catch(t){trace("[ERROR]",t)}else t.context.save(),n._render(t,!1,i),t.context.restore()}},{key:"colorTransform",value:function(t,e,i,s,n){for(var a=e.x>>0,r=e.y>>0,o=e.width>>0,l=e.height>>0,h=s&&n?s.getImageData(n.x,n.y,n.width,n.height).data:null,u=t.getImageData(a,r,o,l),c=u.data,d=0,_=c.length;d<_;d+=4){var f=d+1,p=d+2,v=d+3;h&&h[v]<1||c[v]<1||(c[d]=c[d]*i.redMultiplier+i.redOffset,c[f]=c[f]*i.greenMultiplier+i.greenOffset,c[p]=c[p]*i.blueMultiplier+i.blueOffset,c[v]=c[v]*i.alphaMultiplier+i.alphaOffset)}t.putImageData(u,a,r,0,0,o,l)}}],(d=null)&&s(a.prototype,d),_&&s(a,_),p);function p(){!function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this)}e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=o(i(1)),l=o(i(4)),h=o(i(21)),a=o(i(65)),r=o(i(11)),u=o(i(0));function o(t){return t&&t.__esModule?t:{default:t}}var c,d,_,f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,o(i(16)).default),c=p,(d=[{key:"init",value:function(){this.is_init||(this.is_init=!0,this.name=r.default.getName(this._type),this.element=document.createElement(this._type),this.element.id=this.name,this.element.controls="",this.element.preload="auto",this.list=[],p.Container.add(this),this.canvas=this.element,this.__delay_handler=n.default.delegate(this._delay,this),this.__over_handler=n.default.delegate(this._play_over,this),this.__load_handler=n.default.delegate(this._load_handler,this),this.__update_handler=n.default.delegate(this._time_update,this),this.__error_handler=n.default.delegate(this._error_handler,this),this.element.addEventListener("error",this.__error_handler,!1))}},{key:"_delay",value:function(){if(0<this.element.readyState)this._load_complete();else{if(this.delay_count<=0)return trace("[ERROR] MEDIA ERROR !!"),void this.dispatchEvent(new l.default(p.MEDIA_ERROR));this.delay_count--,this.delay_id=setTimeout(this.__delay_handler,this.delay_time)}}},{key:"_load_handler",value:function(t){this.length=null==this.element.duration?0:Math.max(0,this.element.duration),0!=t.type.indexOf("canplay")||this.loaded||this._load_complete()}},{key:"_load_complete",value:function(){this.dispatchEvent(new l.default(p.MEDIA_LOAD_COMPLETE)),this.delay_id&&clearTimeout(this.delay_id),this.delay_id=0,this.loaded=!0,this.loading=!1,this.auto_play&&!this.playing&&(this.once&&(this.auto_play=this.once=!1),this.play())}},{key:"_error_handler",value:function(t){this.loading=!1,this.loadFail=!0,trace("[ERROR] Media",t),this.dispatchEvent(new l.default(p.MEDIA_ERROR)),this.auto_next&&1<this.list.length?(this.current=this.current>=this.list.length?0:this.current+1,this._start_load()):this.close()}},{key:"_play_over",value:function(){this.dispatchEvent(new l.default(p.MEDIA_PLAY_COMPLETE)),this.auto_next&&1<this.list.length?(this.current=this.current>=this.list.length?0:this.current+1,this._start_load()):this.close()}},{key:"_time_update",value:function(){this.length=null==this.element.duration?0:Math.max(0,this.element.duration),this.seed_time=this.element.currentTime}},{key:"setVolume",value:function(t){this.volume!=t&&(this.volume=t,this.playing&&(this.element.volume=this.volume,0<this.volume&&(this.element.muted=!1)))}},{key:"getVolume",value:function(){return this.volume}},{key:"setCurrentTime",value:function(t){if(this.element&&null!=t&&0<=t&&t<this.length)try{this.element.currentTime=t}catch(t){}}},{key:"getCurrentTime",value:function(){return this.element?this.element.currentTime:0}},{key:"load",value:function(i){if(this.is_init||this.init(),"number"!=typeof i){"string"==typeof i&&0<i.indexOf(",")&&(i=i.split(",")),i instanceof Array?ArrayUtil.each(i,function(t,e){"string"==typeof t&&(i[e]={url:t})}):("string"==typeof i&&(i={url:i}),i=[i]);for(var t,e,s,n,a=0,r=i.length;a<r;a++)e=i[a],u.default.isEmpty(e.url)||(s=this._type+"/"+this._fit_name(u.default.getPathExt(e.url))+("codecs"in e?';codecs="'+e.codecs+'"':""),!(n=this.element.canPlayType(s))&&0!=e.url.indexOf("blob:")||(n&&(t=h.default.createDOM("source",{type:s,src:e.url}),this.element.appendChild(t)),this.list.push(e)));!this.loading&&0<this.list.length?this._start_load():0<i.length&&0==this.list.length&&this.dispatchEvent(new l.default(p.MEDIA_ERROR))}else{var o;this.loading||(o=this.current,this.current=i,this._start_load()||(this.current=o))}}},{key:"_fit_name",value:function(t){switch(t){case"mov":return"quicktime";case"3gp":return"3gpp";case"mid":return"midi";case"ogv":return"ogg";case"m4a":return"acc";default:return t}}},{key:"_start_load",value:function(){return!(!this.element||this.current<0||0==this.list.length||this.current>=this.list.length||(this.close(),this.loading=!0,this.element.addEventListener("loadedmetadata",this.__load_handler,!1),this.element.addEventListener("canplaythrough",this.__load_handler,!1),this.element.addEventListener("loadeddata",this.__load_handler,!1),this.element.addEventListener("canplay",this.__load_handler,!1),this.element.src=this.list[this.current].url,this.element.load(),n.default.ios&&(this.delay_count=this.delay_max,this.delay_id=setTimeout(this.__delay_handler,this.delay_time)),0))}},{key:"close",value:function(){this.element&&(this.element.removeEventListener("loadedmetadata",this.__load_handler),this.element.removeEventListener("canplaythrough",this.__load_handler),this.element.removeEventListener("loadeddata",this.__load_handler),this.element.removeEventListener("canplay",this.__load_handler),this.delay_id&&clearTimeout(this.delay_id),this.delay_id=0,this.playing&&this.stop(),this.loadFail=this.loaded=this.loading=this.playing=!1,this.seed_time=0)}},{key:"play",value:function(t){if(this.element)if(this.loaded){if(this.playing&&this.stop(),t&&(this.seed_time=0),0<this.seed_time)try{this.element.currentTime=this.seed_time}catch(t){}this.element.addEventListener("timeupdate",this.__update_handler,!1),this.element.addEventListener("ended",this.__over_handler,!1),0<this.volume?this.element.volume=this.volume:this.element.muted=!0,this.playing=!0,this.element.play()}else!this.loading&&0<this.list.length&&(this.auto_play||(this.once=this.auto_play=!0),this._start_load())}},{key:"stop",value:function(){this.element&&(this.seed_time=this.element.currentTime,this.element.removeEventListener("timeupdate",this.__update_handler),this.element.removeEventListener("ended",this.__over_handler),this.playing=!1,this.element.pause())}},{key:"dispose",value:function(){this.close(),function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0}(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"dispose",this).call(this),this.list=this.canvas=null,p.Container.remove(this),delete this.delay_id,this.delay_max,this.delay_count,this.delay_time,this.loadFail,this.once,this.loaded,this.list,this.loading,this.playing,this.element,this.seed_time,this.length,this.current,this.volume,this.auto_play,this._type,this.auto_next,this.__over_handler,this.__update_handler,this.__load_handler,this.__error_handler}}])&&s(c.prototype,d),_&&s(c,_),p);function p(){!function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return t.__over_handler=t.__update_handler=t.__load_handler=t.__error_handler=null,t.loadFail=t.once=t.auto_play=t.is_init=t.loading=t.loaded=t.playing=!1,t.list=t._type=t.element=null,t.auto_next=!0,t.seed_time=0,t.length=0,t.current=0,t.volume=1,t.delay_id=0,t.delay_max=30,t.delay_count=0,t.delay_time=500,t}(e.default=f).MEDIA_ERROR="mediaError",f.MEDIA_LOAD_COMPLETE="mediaLoadComplete",f.MEDIA_PLAY_COMPLETE="mediaPlayComplete",f.Container=new a.default,f.className="Media"},function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var n=(s(r,[{key:"hitTestPoint",value:function(t,e,i,s){var n=t.getBounds?t.getBounds(t.stage):t,a=n.length,r=e>=n.x&&e<=n.x+n.width&&i>=n.y&&i<=n.y+n.height;if(r&&s&&a){for(var o,l,h=0,u=!1,c=void 0,d=void 0,_=0;_<a;_++){var f,p=n[_],v=n[(_+1)%a];p.y==v.y&&i==p.y&&(o=p.x>v.x?(c=v.x,p.x):(c=p.x,v.x),c<=e&&e<=o)?u=!0:(l=p.y>v.y?(d=v.y,p.y):(d=p.y,v.y),i<d||l<i||(e<(f=(i-p.y)*(v.x-p.x)/(v.y-p.y)+p.x)?h++:f==e&&(u=!0)))}return u?0:h%2==1?1:-1}return r?1:-1}},{key:"hitTestObject",value:function(t,e,i){var s=t.getBounds(t.stage),n=e.getBounds(e.stage),a=s.x<=n.x+n.width&&n.x<=s.x+s.width&&s.y<=n.y+n.height&&n.y<=s.y+s.height;return a&&i?!1!==(a=r.polygonCollision(s,n)):a}},{key:"polygonCollision",value:function(t,e){var i=r._doSATCheck(t,e,{overlap:-1/0,normal:{x:0,y:0}});return!!i&&r._doSATCheck(e,t,i)}},{key:"_doSATCheck",value:function(t,e,i){for(var s,n,a,r=t.length,o=e.length,l=void 0,h=void 0,u=void 0,c=void 0,d=void 0,_=void 0,f={x:0,y:0},p=0;p<r;p++){s=t[p],n=t[p<r-1?p+1:0],f.x=s.y-n.y,f.y=n.x-s.x,a=Math.sqrt(f.x*f.x+f.y*f.y),f.x/=a,f.y/=a,l=h=t[0].x*f.x+t[0].y*f.y;for(var v=1;v<r;v++)h<(d=t[v].x*f.x+t[v].y*f.y)?h=d:d<l&&(l=d);for(u=c=e[0].x*f.x+e[0].y*f.y,j=1;j<o;j++)c<(d=e[j].x*f.x+e[j].y*f.y)?c=d:d<u&&(u=d);if(l<u?(_=u-h,f.x=-f.x,f.y=-f.y):_=l-c,0<=_)return!1;_>i.overlap&&(i.overlap=_,i.normal.x=f.x,i.normal.y=f.y)}return i}},{key:"isInPolygon",value:function(t,e){for(var i,s,n=0,a=void 0,r=void 0,o=e.length,r=e[0],a=1;a<=o;a++)s=e[a%o],t.x>Math.min(r.x,s.x)&&t.x<=Math.max(r.x,s.x)&&t.y<=Math.max(r.y,s.y)&&r.x!=s.x&&(i=(t.x-r.x)*(s.y-r.y)/(s.x-r.x)+r.y,(r.y==s.y||t.y<=i)&&n++),r=s;return n%2!=0}}]),r);function r(){!function(t){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this)}e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var l=n(i(0)),h=n(i(3));function n(t){return t&&t.__esModule?t:{default:t}}function a(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var r,o,u,c=(r=d,u=[{key:"indexByProperty",value:function(t,s,n){return null==t||t.length<1||l.default.isEmpty(s)?-1:t.findIndex(function(t,e,i){return t[s]==n})}},{key:"sort",value:function(t,a,r,o){if(!(null==t||t.length<2))return h.default.sort(t,function(t,e){var i=l.default.isEmpty(a)?t:t[a],s=l.default.isEmpty(a)?e:e[a],n=!isNaN(parseFloat(i)),i=n?parseFloat(i):l.default.trim(i),s=n?parseFloat(s):l.default.trim(s);return n||(i=0<i.length?i.toLowerCase():"",s=0<s.length?s.toLowerCase():"",i=o&&i.length>o?i.substr(0,o):i,s=o&&s.length>o?s.substr(0,o):s),r?i<s:s<i})}},{key:"createUniqueCopy",value:function(t){return[].concat(a(new Set(t)))}},{key:"buildNumberArray",value:function(t,e){if(null==t||isNaN(Number(t)))return null;t=h.default.int(t);for(var i=[],s=e?t-1:0;e?0<s:s<t;)i.push(s),s=e?s-1:s+1;return i}},{key:"mixArray",value:function(t){if(null!=t){for(var e,i=void 0,s=t.length,n=h.default.randomInt(s),i=0;i<s;i++)n!=i&&(e=t[n],t[n]=t[i],t[i]=e),n=h.default.randomInt(s);return t}}},{key:"sameItems",value:function(t,e,i){if(null==t||null==e)return null;if(1==i)return t.join(",")==e.join(",");if(t.length!=e.length)return!1;for(var s in t)if(e.indexOf(t[s])<0)return!1;return!0}},{key:"copyArray",value:function(t,e){var i=0<arguments.length&&void 0!==t?t:[];return i.push.apply(i,a(e)),i}},{key:"each",value:function(t,e,i){if(!t||!t.length)return t;var s=!0,n=!1,a=void 0;try{for(var r,o=t.entries()[Symbol.iterator]();!(s=(r=o.next()).done);s=!0){var l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],s=!0,n=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(t){n=!0,a=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw a}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(r.value,2),h=l[0],u=l[1];e.apply(i,[u,h,t])}}catch(t){n=!0,a=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw a}}return t}},{key:"format",value:function(t){if(!t||!t.length)return[];for(var e,i=0,s=t.length,i=0;i<s;i++)e=t[i],l.default.isEmpty(e)&&(t.splice(i,1),s--,i--);return t}}],(o=null)&&s(r.prototype,o),u&&s(r,u),d);function d(){!function(t){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this)}e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var r=a(i(3)),n=a(i(2)),o=a(i(10));function a(t){return t&&t.__esModule?t:{default:t}}var l,h,u,c=(l=d,u=[{key:"getRect",value:function(t){if(null==t)return null;var e=t.documentElement?t.documentElement:t,i=e.width,s=e.height,n=i instanceof SVGAnimatedLength,a=s instanceof SVGAnimatedLength;return new o.default(n?i.baseVal.value:0,a?s.baseVal.value:0,n?i.animVal.value:r.default.int(i),a?s.animVal.value:r.default.int(s))}},{key:"getElement",value:function(t){if(null==t)return null;var e=n.default.create(DOMDisplay),i=d.getRect(t),s=DOMUtil.createDOM("div",{style:{width:i.width+"px",height:i.height+"px"}});try{s.innerHTML=(new XMLSerializer).serializeToString(t)}catch(e){s.innerHTML=t}return e.element=s,e}},{key:"create",value:function(t,e){if(null!=t){var i=document.createElementNS(d.ns,t);return null==e&&(e={}),"svg"!=t.toLowerCase()||e.hasOwnProperty("xmlns")||(e.xmlns=d.ns),d.setAttributes(i,e),i}}},{key:"setAttributes",value:function(t,e){if(null!=t&&null!=e)for(var i in e){var s=e[i];if(null!=s)if("style"==i)for(var n in s)t.style[n]=s[n];else"innerHTML"==i||"outerHTML"==i?t.innerHTML=s:t.setAttribute(i,s)}}},{key:"getElementsById",value:function(t,e,i){var s=t.getElementsByTagName(e);if(!s.length)return null;for(var n,a=0,r=s.length;a<r;a++)if((n=s[a]).id==i)return n}},{key:"supported",get:function(){return null!=document.createElementNS&&null!=document.createElementNS(d.ns,"svg").createSVGRect}}],(h=null)&&s(l.prototype,h),u&&s(l,u),d);function d(){!function(t){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this)}(e.default=c).ns="http://www.w3.org/2000/svg",c.xlink="http://www.w3.org/1999/xlink",c.xmlns="http://www.w3.org/2000/xmlns/"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var h=a(i(5)),u=a(i(42)),c=a(i(18)),n=a(i(2)),d=a(i(15)),_=a(i(13)),f=a(i(3)),p=a(i(6));function a(t){return t&&t.__esModule?t:{default:t}}var r,o,l,v=(r=y,l=[{key:"run",value:function(t,e){if(null!=t&&null!=e)if(c.default.remove(t),e instanceof y)y._execute(t,e);else if(e instanceof Array)for(var i=void 0,i=0,s=e.length;i<s;i++)y._execute(t,e[i])}},{key:"_execute",value:function(l,t){if(null!=l&&null!=t){t.align==y.CENTER&&(l.origin={x:.5*l.width,y:.5*l.height});var e,i=void 0,s=void 0,n=t.type==y.SHADOW;if(t.type!=y.MOVE&&t.type!=y.OFFSET||(s=p.default.toPoint(t.value),t.type==y.OFFSET&&s.offset(l.x,l.y),n=!0),(null!=l[t.type]||n)&&(t.time<=0&&(n?l.moveTo(s.x,s.y):l[t.type]=t.value),l.parent&&l.parent.autoSize&&l._parent._updateSize(),!(t.time<=0))){if(t.type==y.COLOR)return e=l.color,l.__temp_num=0,void c.default.to(l,t.time,{ease:t.tween,__temp_num:1,onUpdate:function(){l.__checkDisplayUpdate(),l.color=d.default.formatColor(d.default.interpolateColor(e,t.value,l.__temp_num))},onComplete:function(){l.__checkDisplayUpdate(),l.color=t.value}});if(t.type==y.SHADOW){if(null==l.filters){if(!(l instanceof h.default&&1==l.numChildren&&l.getChildAt(0).filters))return;l=l.getChildAt(0)}if(s="string"==typeof t.value?JSON.parse(t.value):t.value,0==l.filters.length)i=new u.default(0,0,0),l.filters.push(i);else for(var a,r=0,o=l.filters.length;r<o;r++)(a=l.filters[r])&&"DropShadowFilter"==_.default.getQualifiedClassName(a)&&(i=a);if(null==i||null==s||null==s.length||s.length<1)return;if(1==s.length&&s[0]==i.distance||2==s.length&&s[0]==i.distance&&s[1]==i.angle||3==s.length&&s[0]==i.distance&&s[1]==i.angle&&s[2]==i.shadowBlur||4==s.length&&s[0]==i.distance&&s[1]==i.angle&&s[2]==i.shadowBlur&&s[3]==i.shadowColor||5==s.length&&s[0]==i.distance&&s[1]==i.angle&&s[2]==i.shadowBlur&&s[3]==i.shadowColor&&s[4]==i.alpha||6==s.length&&s[0]==i.distance&&s[1]==i.angle&&s[2]==i.shadowBlur&&s[3]==i.shadowColor&&s[4]==i.alpha&&s[5]==i.radius)return;return l.__temp_num=0,void c.default.to(l,t.time,{ease:t.tween,__temp_num:1,onUpdateParams:[i,s,i.distance,i.angle,i.shadowColor,i.shadowBlur,i.alpha,i.radius],onUpdate:function(t,e,i,s,n,a,r,o){t.distance=f.default.format(i+(e[0]-i)*l.__temp_num),1<e.length&&(t.angle=f.default.format(s+(e[1]-s)*l.__temp_num)),2<e.length&&(t.shadowBlur=f.default.format(a+(e[2]-a)*l.__temp_num)),3<e.length&&(t.shadowColor=d.default.formatColor(d.default.interpolateColor(n,e[3],l.__temp_num))),4<e.length&&(t.alpha=f.default.format(r+(e[4]-r)*l.__temp_num)),5<e.length&&(t.radius=f.default.format(o+(e[5]-o)*l.__temp_num)),1<e.length&&t.setShadowOffset(),l.__checkDisplayUpdate()},onCompleteParams:[i,s],onComplete:function(t,e){t.distance=e[0],1<e.length&&(t.angle=e[1]),2<e.length&&(t.shadowBlur=e[2]),3<e.length&&(t.shadowColor=e[3]),4<e.length&&(t.alpha=e[4]),5<e.length&&(t.radius=e[5]),1<e.length&&t.setShadowOffset(),l.__checkDisplayUpdate()}})}i={ease:t.tween},!n&&t.type!=y.SCALE||(i.onUpdate=function(){l.parent&&l.parent.autoSize&&l._parent._updateSize()}),n?(i.x=s.x,i.y=s.y):i[t.type]=t.value,c.default.to(l,t.time,i)}}}}],(o=[{key:"setup",value:function(t,e,i,s,n){this.type=t,this.time=i||0,this.value=e,this.align=s||0,this.tween=n}},{key:"clone",value:function(){var t=n.default.create(y);return t.value=this.value,t.align=this.align,t.tween=this.tween,t.type=this.type,t.time=this.time,t}},{key:"reset",value:function(t,e,i,s,n){var a=0<arguments.length&&void 0!==t?t:null,r=1<arguments.length&&void 0!==e?e:null,o=2<arguments.length&&void 0!==i?i:0,l=3<arguments.length&&void 0!==s?s:0,h=4<arguments.length&&void 0!==n?n:null;this.setup(a,r,o,l,h)}},{key:"dispose",value:function(){delete this.type,this.value,this.time,this.align,this.tween}}])&&s(r.prototype,o),l&&s(r,l),y);function y(t,e,i,s,n){!function(t){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this),this.type=this.value=this.time=this.align=this.tween=null,this.setup(t,e,i,s,n)}(e.default=v).className="Effect",v.MOVE="move",v.COLOR="color",v.SCALE="scale",v.ALPHA="alpha",v.OFFSET="offset",v.SHADOW="shadow",v.CENTER=1},function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var n,a,r=(a=[{key:"INIT_CLASS",value:function(){if(!o.IS_INIT){var t,e=o.IS_INIT=!0,i=!1,s=void 0;try{for(var n,a=o.LIST[Symbol.iterator]();!(e=(n=a.next()).done);e=!0)t=n.value,o.prototype[t]=o.create_func(t)}catch(t){i=!0,s=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw s}}}}},{key:"create_func",value:function(t){return function(){this.actions.push({method:t,data:arguments})}}}],s((n=o).prototype,[{key:"getValue",value:function(){if(this.value)return this.value;this.value={};var t=void 0;for(t in this)0<=o.LIST.indexOf(t)||"function"==typeof this[t]||"actions"==t||"type_id"==t||"value"==t||(this.value[t]=this[t],delete this[t]);return this.value}},{key:"reset",value:function(){if(!this.value){var t=void 0;for(t in this)0<=o.LIST.indexOf(t)||"function"==typeof this[t]||"actions"==t||"type_id"==t||"value"==t||delete this[t]}this.type_id=0,this.actions=[],this.value=null}}]),s(n,a),o);function o(){!function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.actions=[],this.type_id=0,this.value=null}(e.default=r).LIST=["save","restore","scale","rotate","translate","transform","setTransform","getTransform","resetTransform","createLinearGradient","createRadialGradient","createPattern","clearRect","fillRect","strokeRect","beginPath","fill","stroke","drawFocusIfNeeded","clip","isPointInPath","isPointInStroke","fillText","strokeText","measureText","drawImage","getImageData","putImageData","createImageData","setLineDash","getLineDash","closePath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","arcTo","rect","arc","ellipse","drawSvg"],r.IS_INIT=!1,r.className="ContextVO"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var p=l(i(0)),n=l(i(11)),a=l(i(23)),v=l(i(2)),y=l(i(26)),u=l(i(40)),r=l(i(10)),c=l(i(31)),d=l(i(20)),o=l(i(1)),g=l(i(6));function l(t){return t&&t.__esModule?t:{default:t}}var h,_,f,m=(h=b,(_=[{key:"lineStyle",value:function(t,e,i,s,n,a){var r=0<arguments.length&&void 0!==t?t:1,o=1<arguments.length&&void 0!==e?e:"#000000",l=2<arguments.length&&void 0!==i?i:1,h=3<arguments.length&&void 0!==s?s:"butt",u=4<arguments.length&&void 0!==n?n:"miter",c=5<arguments.length&&void 0!==a?a:10;this.line_cap=h,this.stroke_style=o,this.line_join=u,this.line_alpha=l,this.line_width=r,this.miter_limit=c,this.line_width=this.line_width<=0?.1:this.line_width,this.stroke_style=this.stroke_style+"",this.context.lineCap=this.line_cap,this.context.lineJoin=this.line_join,this.context.lineWidth=this.line_width,this.context.miterLimit=this.miter_limit,this.context.strokeStyle=this.stroke_style}},{key:"clear",value:function(){this.context&&(this.rectangle=this.rectangle||v.default.create(r.default).set(0,0,this.context.canvas.width,this.context.canvas.height),this.context.clearRect(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),this.context.restore())}},{key:"beginFill",value:function(t,e){return this.fill_alpha=null==e?1:e,this.fill_style=t||"#FFFFFF",this.context.fillStyle=this.fill_style,this}},{key:"endFill",value:function(){var t=this.context.globalAlpha;this.fill_style&&(this.context.fillStyle=this.fill_style,this.context.globalAlpha=t*this.fill_alpha,this.context.fill()),this.stroke_style&&(this.context.strokeStyle=this.stroke_style,this.context.globalAlpha=t*this.line_alpha,this.context.stroke()),this.context.globalAlpha=t}},{key:"beginBitmapFill",value:function(t,e,i){this.fill_style=this.createPattern(t,e||"no-repeat"),this.fill_alpha=null==i?1:i,this.context.fillStyle=this.fill_style}},{key:"linearGradientFill",value:function(t,e,i,s,n,a){for(var r=this.createLinearGradient(t,e,i,s),o=Math.min(n.length,a.length),l=0;l<o;l++)r.addColorStop(n[l],a[l]+"");return this.fill_style=r}},{key:"radialGradientFill",value:function(t,e,i,s,n,a,r,o){for(var l=this.createRadialGradient(t,e,i,s,n,a),h=Math.min(r.length,o.length),u=0;u<h;u++)l.addColorStop(r[u],o[u]+"");return this.fill_style=l}},{key:"drawRect",value:function(t,e,i,s){this.beginPath(),this.rect(t,e,i,s),this.closePath()}},{key:"drawRoundRect",value:function(t,e,i,s,n,a){a=a||n,this.beginPath(),this.moveTo(t+i,e+s-a),this.curveTo(t+i,e+s,t+i-n,e+s),this.lineTo(t+n,e+s),this.curveTo(t,e+s,t,e+s-a),this.lineTo(t,e+a),this.curveTo(t,e,t+n,e),this.lineTo(t+i-n,e),this.curveTo(t+i,e,t+i,e+a),this.lineTo(t+i,e+s-a),this.closePath()}},{key:"drawPath",value:function(t,e){if(!(null==t||t.length<2)){this.beginPath();var i=t[0]instanceof Array;this.moveTo(i?t[0][0]:t[0].x,i?t[0][1]:t[0].y);for(var s=1;s<t.length;s++)this.lineTo(i?t[s][0]:t[s].x,i?t[s][1]:t[s].y);e&&this.closePath()}}},{key:"drawCircle",value:function(t,e,i){this.beginPath(),this.arc(t,e,i,0,2*Math.PI,0),this.closePath()}},{key:"drawEllipse",value:function(t,e,i,s){if(i==s)return this.drawCircle(t,e,i/2);var n=.5522847498307933*(i/=2),a=.5522847498307933*(s/=2);t+=i,e+=s,this.beginPath(),this.moveTo(t+i,e),this.bezierCurveTo(t+i,e-a,t+n,e-s,t,e-s),this.bezierCurveTo(t-n,e-s,t-i,e-a,t-i,e),this.bezierCurveTo(t-i,e+a,t-n,e+s,t,e+s),this.bezierCurveTo(t+n,e+s,t+i,e+a,t+i,e),this.closePath()}},{key:"createPolygon",value:function(t,e,i,s){if(!(s<3)){var n,a,r=void 0;this.beginPath(),Math.sin(0),Math.cos(0);for(var o=Math.PI/s*(s%2==0?2:s-1),r=0;r<s;r++)n=Math.sin(r*o),a=Math.cos(r*o),this.lineTo(t+n*i,e+a*i);this.closePath()}}},{key:"drawSVGPath",value:function(t,e){var i=void 0,s=void 0,n=v.default.create(g.default),a=0,r=t.split(/(?=[a-zA-Z])/);this.beginPath();for(var o,l,h,u=0,c=r.length;u<c;u++)switch(i=(o=p.default.trim(r[u]))[0].toUpperCase(),h=y.default.format(o.substring(1).split(/,| |-/)),p.default.isEmpty(i)?i=s:s=i,i){case"M":n.set(e?e[a].x:h[0],e?e[a].y:h[1]),this.moveTo(n.x,n.y),a++;break;case"L":l=0;for(var d=Math.floor(.5*h.length);l<d;l++)e?(this.lineTo(e[a].x,e[a].y),a++):this.lineTo(h[2*l],h[2*l+1]);l--,n.set(e?e[a-1].x:h[2*l],e?e[a-1].y:h[2*l+1]);break;case"Q":l=0;for(var _=Math.floor(h.length/4);l<_;l++)e?(this.curveTo(e[a].x,e[a].y,e[a+1].x,e[a+1].y),a+=2):this.curveTo(h[4*l],h[4*l+1],h[4*l+2],h[4*l+3]);l--,n.set(e?e[a-1].x:h[4*l+2],e?e[a-1].y:h[4*l+3]);break;case"C":l=0;for(var f=Math.floor(h.length/6);l<f;l++)e?(this.bezierCurveTo(e[a].x,e[a].y,e[a+1].x,e[a+1].y,e[a+2].x,e[a+2].y),a+=3):this.bezierCurveTo(h[6*l],h[6*l+1],h[6*l+2],h[6*l+3],h[6*l+4],h[6*l+5]);l--,n.set(e?e[a-1].x:h[6*l+4],e?e[a-1].y:h[6*l+5]);break;case"H":case"V":n.set("H"==i?parseFloat(h[0]):n.x,"H"==i?n.y:parseFloat(h[0])),this.lineTo(n.x,n.y);break;case"Z":this.closePath();break;default:trace("[Graphics]drawSVGPath() miss",o)}return v.default.remove(n),this}},{key:"drawShape",value:function(t,e,i){var s,n=1<arguments.length&&void 0!==e?e:null,a=2<arguments.length&&void 0!==i&&i;if(t&&t instanceof d.default){a&&t.properties.style&&((s=t.properties.style).fill&&(0==s.fill.indexOf("#")?this.beginFill(s.fill,s.fillOpacity||s.opacity):AssetManager.getSource(s.fill)&&this.beginBitmapFill(AssetManager.getSource(s.fill).image)),s.stroke&&0==s.stroke.indexOf("#")&&this.lineStyle(s.strokeWidth,s.stroke,s.strokeOpacity||s.opacity));var r,o,l=void 0,h=void 0;switch(t.type){case c.default.LINE:h=[[t.properties.x1,t.properties.y1],[t.properties.x2,t.properties.y2]],n?l=u.default.pointsToPath(h):this.drawPath(h,!1);break;case c.default.POLYLINE:case c.default.POLYGON:h=y.default.each(t.properties.points.split(/ /),function(t,e,i){i[e]=t.split(/,/)}),n?l=u.default.pointsToPath(h,t.type==c.default.POLYGON):this.drawPath(h,t.type==c.default.POLYGON);break;case c.default.RECT:n?l=u.default.rectToPath(t.properties):this.drawRoundRect(t.properties.x||0,t.properties.y||0,t.properties.width,t.properties.height,t.properties.rx||0,t.properties.ry||0);break;case c.default.CIRCLE:n?l=u.default.ellipseToPath(t.properties):this.drawCircle(t.properties.cx||0,t.properties.cy||0,t.properties.r);break;case c.default.ELLIPSE:n?l=u.default.ellipseToPath(t.properties):this.drawEllipse((t.properties.cx||0)-t.properties.rx,(t.properties.cy||0)-t.properties.ry,2*t.properties.rx,2*t.properties.ry);break;case c.default.PATH:n?l=t.properties.d:this.drawSVGPath(t.properties.d);break;default:return}p.default.isEmpty(l)||(r=v.default.create(d.default).setup(c.default.PATH,{d:l}),o=u.default.getShapeBounds(r,!0),g.default.matrix(o,n),this.drawSVGPath(l,o),v.default.remove(r)),a&&t.properties.style&&this.endFill()}}},{key:"reset",value:function(t){var e=0<arguments.length&&void 0!==t?t:null;this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.rectangle&&v.default.remove(this.rectangle),this.fill_style=this.rectangle=null,this.fill_alpha=1,e&&(this.context=e,this.canvas=e.canvas,this.canvas.width!=o.default.width&&(this.canvas.width=o.default.width),this.canvas.height!=o.default.height&&(this.canvas.height=o.default.height)),this.clear(),this.line_alpha=1,this.line_width=1,this.miter_limit=10,this.line_cap="butt",this.line_join="miter",this.stroke_style="#000000"}},{key:"dispose",value:function(){this.reset(),delete this.name,this.rectangle,this.line_cap,this.line_join,this.line_alpha,this.stroke_style,this.line_width,this.miter_limit,this.fill_alpha,this.fill_style,this.context,this.canvas}},{key:"toString",value:function(){return"Graphics"}}])&&s(h.prototype,_),f&&s(h,f),b);function b(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;!function(t){if(!(t instanceof b))throw new TypeError("Cannot call a class as a function")}(this),t?(this.context=t,this.canvas=t.canvas):(a.default.create(this),this.canvas.width=o.default.width,this.canvas.height=o.default.height),this.name=n.default.getName("Graphics"),o.default.proxy(this,this.context,"arc"),o.default.proxy(this,this.context,"rect"),o.default.proxy(this,this.context,"clip"),o.default.proxy(this,this.context,"fill"),o.default.proxy(this,this.context,"arcTo"),o.default.proxy(this,this.context,"stroke"),o.default.proxy(this,this.context,"moveTo"),o.default.proxy(this,this.context,"lineTo"),o.default.proxy(this,this.context,"beginPath"),o.default.proxy(this,this.context,"closePath"),o.default.proxy(this,this.context,"createPattern"),o.default.proxy(this,this.context,"bezierCurveTo"),o.default.proxy(this,this.context,"createLinearGradient"),o.default.proxy(this,this.context,"createRadialGradient"),o.default.proxy(this,this.context,"quadraticCurveTo","curveTo")}(e.default=m).className="Graphics"},function(t,e,i){"use strict";function s(){!function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this)}Object.defineProperty(e,"__esModule",{value:!0}),(e.default=s).LINE="line",s.POLYLINE="polyline",s.RECT="rect",s.CIRCLE="circle",s.ELLIPSE="ellipse",s.POLYGON="polygon",s.PATH="path"},function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var n=(s(h.prototype,[{key:"setup",value:function(t,e,i,s,n,a,r,o,l){this.type=t,this.xStart=e,this.yStart=i,this.xEnd=s,this.yEnd=n,this.offsetlist=a,this.colorList=r,this.radiusStart=o,this.radiusEnd=l}},{key:"dispose",value:function(){delete this.type,this.xStart,this.yStart,this.xEnd,this.yEnd,this.offsetlist,this.colorList,this.radiusStart,this.radiusEnd}}]),h);function h(t,e,i,s,n,a,r,o,l){!function(t){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),this.setup(t,e,i,s,n,a,r,o,l)}(e.default=n).className="GColor"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n,a,r,o=i(0),l=o&&o.__esModule?o:{default:o},h=(n=u,r=[{key:"add",value:function(t){null!=t&&null!=t&&(u.remove(t.name),u._cache[t.name]=t)}},{key:"remove",value:function(t){u._cache.hasOwnProperty(t)&&(u._cache[t].dispose(),delete u._cache[t])}},{key:"has",value:function(t){return!l.default.isEmpty(t)&&null!=u._cache[t]}},{key:"get",value:function(t,e){if(l.default.isEmpty(t))for(t in u._cache)break;return l.default.isEmpty(t)?null:null==e||e<0?u._cache[t]:u._cache[t].chars[e]}},{key:"clear",value:function(){var t=void 0;for(t in u._cache)u._cache[t].dispose(),delete u._cache[t]}}],(a=null)&&s(n.prototype,a),r&&s(n,r),u);function u(){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this)}(e.default=h).className="FontManager",h._cache={}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=h(i(19)),a=h(i(0)),r=h(i(4)),o=h(i(1)),l=h(i(45));function h(t){return t&&t.__esModule?t:{default:t}}var u,c,d,_=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,n.default),u=f,d=[{key:"parseXML",value:function(t,e){var i=null;if(o.default.root.DOMParser)try{i=(new DOMParser).parseFromString(t,e)}catch(t){}else if(o.default.root.ActiveXObject){for(var s=["MSXML.2.DOMDocument.6.0","MSXML.2.DOMDocument.3.0","Microsoft.XMLDOM"],n=0;n<s.length;n++)try{i=new ActiveXObject(s[n]);break}catch(t){}i&&(i.async=!1,i.loadXML(t))}return i}}],(c=[{key:"load",value:function(t){var e=void 0,i=this,s=a.default.getPathExt(t);"txt"==s?e=f.TYPE_TEXT:"json"==s?e=f.TYPE_JSON:"js"==s?e=f.TYPE_JS:"prop"==s?e=f.TYPE_PROP:"css"==s?e=f.TYPE_CSS:retrun,(this.type=e)==f.TYPE_TEXT||e==f.TYPE_JSON||e==f.TYPE_PROP?(new l.default).get(t).then(function(t){i.content=t,i.dispatchEvent(new r.default(r.default.COMPLETE)),i.removeEventListener(r.default.COMPLETE),i.removeEventListener(r.default.ERROR)}).catch(function(t){console.log("[ERROR]",t),i.content=null,i.dispatchEvent(new r.default(r.default.ERROR)),i.removeEventListener(r.default.COMPLETE),i.removeEventListener(r.default.ERROR)}):e==f.TYPE_JS?(i.content=document.createElement("script"),i.content.onload=function(){i.dispatchEvent(new r.default(r.default.COMPLETE)),i.removeEventListener(r.default.COMPLETE),i.removeEventListener(r.default.ERROR)},i.content.onerror=function(){i.dispatchEvent(new r.default(r.default.ERROR)),i.removeEventListener(r.default.COMPLETE),i.removeEventListener(r.default.ERROR)},i.content.src=t,i.content.type="text/javascript",document.querySelector("head").appendChild(i.content)):e==f.TYPE_CSS&&(i.content=document.createElement("link"),i.content.rel="stylesheet",i.content.type="text/css",i.content.onload=function(){i.dispatchEvent(new r.default(r.default.COMPLETE)),i.removeEventListener(r.default.COMPLETE),i.removeEventListener(r.default.ERROR)},i.content.onerror=function(){i.dispatchEvent(new r.default(r.default.ERROR)),i.removeEventListener(r.default.COMPLETE),i.removeEventListener(r.default.ERROR)},i.content.href=t,document.querySelector("head").appendChild(i.content))}}])&&s(u.prototype,c),d&&s(u,d),f);function f(){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return t.content=null,t.type=null,t}(e.default=_).TYPE_TEXT="text",_.TYPE_JSON="json",_.TYPE_PROP="prop",_.TYPE_CSS="css",_.TYPE_JS="js",_.className="URLLoader"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=c(i(5)),l=c(i(25)),a=c(i(11)),_=c(i(10)),o=c(i(21)),f=c(i(20)),p=c(i(2)),v=c(i(3)),y=c(i(14)),g=c(i(1)),h=c(i(31)),u=c(i(68)),m=c(i(6));function c(t){return t&&t.__esModule?t:{default:t}}var d,b,O,w=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(k,n.default),d=k,(b=[{key:"addChildAt",value:function(t,e){var i=r(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"addChildAt",this).call(this,t,e);return this.use_canvas||(null==this.div&&(this.div=o.default.createDOM("div",{id:"sprite_"+this.name})),i&&(i.parentNode=this.div)),i}},{key:"render",value:function(t,e){if(null!=this._children&&0!=this._children.length)if(this.visible){var i,s,n,a,r,o,l,h=this.updateMatrix||this._refresh,u=this.getMatrix(t,!0);this._mask&&this.use_canvas&&(a=void 0,(i=(e?this.getMatrix(e):u).applyDisplay()).center=p.default.create(m.default),this._mask instanceof _.default&&((s=this._mask.clone()).multiply(i.scaleX,i.scaleY),n=v.default.getRadiansFromDegrees(i.rotation),a=s.rotation(n,i.center,i,i.scaleX<0,i.scaleY<0),p.default.remove(s)),(t?t.context:this.stage.context).save(),this._mask instanceof _.default?(t||this.stage.graphics).drawPath(a,!0):this._mask instanceof f.default&&(t||this.stage.graphics).drawShape(this._mask,i),(t?t.context:this.stage.context).clip(),p.default.remove(i.center),i.center=null),this.use_canvas||(y.default._depth_count++,this.div&&(""!=this.div.style.display&&(this.div.style.display=""),this.div.style.zIndex=g.default.layer+y.default._depth_count,null!=this._blendMode&&(this.div.style.mixBlendMode=this._blendMode?this._blendMode:"normal"),h&&(this._refresh=!1,o=""===(r=g.default.cssPrefix)?"transform":r+"Transform",l=""===r?"transformOrigin":r+"TransformOrigin",this.div.style[r+"ClipPath"]=this.div.style.clipPath=this._mask&&this._mask instanceof f.default?"url(#"+this._mask.id+f.default.CILP+")":"",g.default.supportTransform?(this.div.style[l]="0% 0%",this.div.style.top=this.div.style.left="0px",this.div.style[o]=u.toCSS()):(this.div.style.top=u.ty+"px",this.div.style.left=u.tx+"px"))));for(var c=void 0,d=this._children.length,c=0;c<d;c++)this._children[c].render.apply(this._children[c],this.use_canvas?[t,!1,e]:[this]);this._mask&&this.use_canvas&&(t?t.context:this.stage.context).restore()}else this.div&&(this.div.style.display="none")}},{key:"getObjectUnderPoint",value:function(t,e,i,s){return this.maskRect&&this._checkTouch(t,e,i)?null:r(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"getObjectUnderPoint",this).call(this,t,e,i,s)}},{key:"hitTestPoint",value:function(t,e,i){return(!this.maskRect||!this._checkTouch(t,e,i))&&r(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"hitTestPoint",this).call(this,t,e,i)}},{key:"_checkTouch",value:function(t,e,i){var s=this.maskRect.clone(),n=this.getMatrix().applyDisplay();s.multiply(n.scaleX,n.scaleY);var a,r=void 0,o=v.default.getRadiansFromDegrees(n.rotation);return i?(r=_.default.rectangleByRadians(s,o,null,n,n.scaleX<0,n.scaleY<0),p.default.remove(s)):0==o?(s.x=n.x,s.y=n.y,r=s):(a=s.rotation(o,null,n,n.scaleX<0,n.scaleY<0),r=_.default.createRectangle(a[0],a[1],a[2],a[3]),p.default.remove(s)),l.default.hitTestPoint(r,t,e,i)<0}},{key:"reset",value:function(){this._mask&&this._mask instanceof f.default&&p.default.remove(this._mask),this.div&&this.div.parentNode&&this.div.parentNode.removeChild(this.div),this._rect&&p.default.remove(this._rect),r(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"reset",this).call(this),this._blendMode=this._defs=this._rect=this._mask=this.div=null}},{key:"dispose",value:function(){r(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"dispose",this).call(this),delete this._blendMode,this._defs,this._mask,this.div,this.svg,this._rect}},{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode!=t&&(this._blendMode=t,this.__checkDisplayUpdate())}},{key:"maskRect",get:function(){return this._mask?this._mask instanceof _.default?this._mask:this._rect:null},set:function(t){t?(this._rect=new _.default(t.x,t.y,t.width,t.height),this.setSize(this._rect.width,this._rect.height)):this._rect=t}},{key:"defs",get:function(){return this._defs||this.use_canvas||(this._defs=p.default.create(u.default).init(),this.addChild(this._defs)),this._defs}},{key:"parentNode",get:function(){return this._parentNode},set:function(t){this._parentNode!=t&&(this._parentNode=t,this._parentNode&&this.div&&(this.div.parentNode&&this.div.parentNode.removeChild(this.div),this._parentNode.appendChild(this.div)))}},{key:"parent",get:function(){return this._parent},set:function(t){var e;this._parent!=t&&(this._parent=t,this.use_canvas||(null!=this._parent?(null==this.div&&(this.div=o.default.createDOM("div",{id:"sprite_"+this.name})),this.div.style.position=g.default.position,(e=this._parentNode?this._parentNode:this._parent.parentNode?this._parent.parentNode:this._parent.div?this._parent.div:this.stage?this.stage.div:null)&&e.appendChild(this.div),this._mask&&this._mask instanceof _.default&&this.div&&(this.width=Math.ceil(this._mask.width),this.height=Math.ceil(this._mask.height),this.div.style.width=this.width+"px",this.div.style.height=this.height+"px",this.div.style.overflow="hidden")):this.div&&this.div.parentNode&&this.div.parentNode.removeChild(this.div)))}},{key:"mask",get:function(){return this._mask},set:function(t){t&&t instanceof f.default&&(t=[h.default.RECT,h.default.CIRCLE,h.default.ELLIPSE,h.default.POLYGON,h.default.PATH].indexOf(t.type)<0?null:t),this._mask&&this._mask!=t&&this._mask instanceof _.default&&this.div&&(this.div.style.overflow="auto",p.default.remove(this._mask)),this._mask&&this._mask instanceof f.default&&this._mask!=t&&(this.use_canvas||this.defs.removeClipPath(this._mask),p.default.remove(this._mask));var e=null!=this._mask&&null!=this._mask&&""!=this._mask;this._mask=t,this.maskRect=this._mask&&this._mask instanceof f.default&&this._mask.rect?this._mask.rect:null,this._mask&&this._mask instanceof f.default&&!this.use_canvas&&this.defs.addClipPath(this._mask),this.updateMatrix=!0,this._mask&&this._mask instanceof _.default?(this.autoSize=!1,this.width=Math.ceil(this._mask.width),this.height=Math.ceil(this._mask.height),this.use_canvas||(this._mask.x=this._mask.y=0,null!=this.div&&(this.div.style.overflow="hidden",this.div.style.width=this.width+"px",this.div.style.height=this.height+"px"))):!this._mask&&e&&(this.use_canvas||(this.x+=1e-5),this.__checkDisplayUpdate())}},{key:"stage",get:function(){return this._stage},set:function(t){if(this._stage!=t){this._stage=t;var e=this._parentNode?this._parentNode:this._parent&&this._parent.parentNode?this._parent.parentNode:this._parent&&this._parent.div?this._parent.div:this.stage?this.stage.div:null;if(this.div&&(this.div.parentNode&&(!t||e&&this.div.parentNode!=e)&&this.div.parentNode.removeChild(this.div),e&&!this.div.parentNode&&t&&this._parent&&e.appendChild(this.div)),!(null==this._children||this._children.length<1))for(var i=void 0,i=0,s=this._children.length;i<s;i++)this._children[i].stage=t}}}])&&s(d.prototype,b),O&&s(d,O),k);function k(){!function(t){if(!(t instanceof k))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(k.__proto__||Object.getPrototypeOf(k)).call(this));return t.name=a.default.getName("sprite"),t._blendMode=t._defs=t._rect=t._mask=t.div=null,t}(e.default=w).className="Sprite"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=_(i(5)),a=_(i(12)),o=_(i(0)),l=_(i(2)),h=_(i(7)),u=_(i(28)),c=_(i(17)),d=_(i(4));function _(t){return t&&t.__esModule?t:{default:t}}var p,v,y,g=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(m,n.default),p=m,(v=[{key:"setup",value:function(t,e,i,s){t&&this.setupState(t,m.state.UP),e&&this.setupState(e,m.state.OVER),i&&this.setupState(i,m.state.DOWN),s&&this.setupState(s,m.state.DISABLED),this.setState(m.state.UP)}},{key:"setLabel",value:function(t,e,i,s){this.tf&&this.tf.removeFromParent(!0),t&&(this.tf=t instanceof a.default?f:h.default.c("tf",t),this.tf.mouseEnabled=!1,this.addChild(this.tf),this.out_color=t.color,this.over_color=e,this.down_color=s,this.disabled_color=i)}},{key:"getLabel",value:function(){return this.tf?this.tf.text:""}},{key:"setupState",value:function(t,e){if(null!=this.frames&&null!=t&&!o.default.isEmpty(e)&&(t instanceof c.default||t instanceof Image||t instanceof a.default||t instanceof u.default||t instanceof Array)){var i,s=this.frames[e];if(s)if(s instanceof a.default){if(t instanceof c.default)return void s.setInstance(t);s.removeFromParent(!0)}else if(s instanceof u.default)l.default.remove(s);else if(s instanceof Array)for(j=0;j<s.length;j++)l.default.remove(s[j]);(t instanceof c.default||t instanceof Image)&&((i=h.default.c("do")).setInstance(t),t=i),this.frames[e]=t}}},{key:"setState",value:function(t,e){if(this.state==t&&(null==e||!e))return!1;var i;if(this.state=t,this.tf&&(i=this.state==m.state.DISABLED?this.disabled_color:this.state==m.state.DOWN?this.down_color||this.over_color:this.state==m.state.OVER&&this.over_color||this.out_color,o.default.isEmpty(i)||(this.tf.color=i),this.tf.dispatchEvent(new d.default(m.STATE_CHANGE,this.state))),this.frames.hasOwnProperty(this.state)&&this.frames[t])if(this.frames[t]instanceof a.default)this.instance=this.frames[t];else{if(null==this.instance)return;(this.frames[t]instanceof u.default||this.frames[t]instanceof Array)&&u.default.run(this.instance,this.frames[t])}else if(!this.tf)return!1;return this.__checkDisplayUpdate(),!0}},{key:"onMouseEvent",value:function(t){if(t&&this._enable)switch(t.type){case"mousemove":this.setState(m.state.OVER);break;case"mouseout":this.setState(m.state.UP);break;case"mousedown":this.setState(m.state.DOWN)||this.setState(m.state.OVER);break;case"mouseup":this.state!=m.state.OVER&&this.setState(m.state.UP)}}},{key:"reset",value:function(){if(this._register_instance.removeFromParent(!0),this._register_instance=null,this.frames){var t=void 0,e=void 0,i=void 0;for(t in this.frames){if(i=this.frames[t])if(i instanceof a.default)i.removeFromParent(!0);else if(i instanceof u.default)l.default.remove(i);else if(i instanceof Array)for(e=0;e<i.length;e++)l.default.remove(i[e]);delete this.frames[t]}}this.state=this._register_instance=this.disabled_color=this.down_color=this.over_color=this.out_color=this.tf=null,this._enable=this.autoSize=this.mouseEnabled=this.buttonMode=!0,this.mouseChildren=!1,this.frames={},r(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"reset",this).call(this)}},{key:"dispose",value:function(){r(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"dispose",this).call(this),delete this._register_instance,this.frames,this.tf,this.is_reversal,this.state,this.disabled_color,this.down_color,this.over_color,this.out_color}},{key:"toString",value:function(){return m.name}},{key:"instance",get:function(){return this._register_instance},set:function(t){var e=null;null!=this._register_instance&&(this._register_instance.parent&&(e=this._register_instance.getIndex(),e=Math.max(0,e),this._register_instance.removeFromParent(!1)),this._register_instance=null),null!=t&&(t instanceof a.default?this._register_instance=t:(this._register_instance=h.default.c("do"),this._register_instance.setInstance(t)),null==e||isNaN(""+e)?this.addChild(this._register_instance):this.addChildAt(this._register_instance,e),this._updateSize())}},{key:"enable",get:function(){return this._enable},set:function(t){null!=t&&null!=t&&t!=this._enable&&(this._enable=t,this.mouseEnabled=this.buttonMode=t,this._enable?this.setState(m.state.UP):this.setState(m.state.DISABLED)||this.setState(m.state.DOWN)||this.setState(m.state.OVER))}}])&&s(p.prototype,v),y&&s(p,y),m);function m(){!function(t){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this));return t.autoSize=!0,t.name="button_"+t.name,t.state="",t._register_instance=null,t.mouseChildren=!1,t.mouseEnabled=!0,t.buttonMode=!0,t._enable=!0,t.disabled_color,t.down_color,t.over_color,t.out_color,t.tf=null,t.frames={},t}(e.default=g).className="Button",g.STATE_CHANGE="stateChange",g.state={UP:"up",OVER:"over",DOWN:"down",DISABLED:"disabled"}},function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var n=(s(v,[{key:"tile",value:function(t,e,i,s,n,a,r){null==t||t.length<1||null==e||e<1||(1==i?v._row(t,e,s,n,a,r):v._tier(t,e,s,n,a,r))}},{key:"_row",value:function(t,e,i,s,n,a){n=null==n?{x:0,y:0}:n;for(var r,o,l=void 0,h=void 0,u=t.length,c=i&&i.x||0,d=i&&i.y||0,_=s&&s.x||0,f=s&&s.y||0,p=null!=a&&a?v._countSize(t,i,e-1,f):0,l=0;l<u;l++)h=t[l],r=null==i||0==i.width?h?h.getWidth():0:i.width,o=null==i||0==i.height?h?h.getHeight():0:i.height,0==r&&0==o||(null!=h&&"x"in h&&"y"in h&&(h.x=Math.round(c+r*n.x),h.y=Math.round(0==p?d:d+p)),d+=0==p?Math.round(o+f):Math.round(-1*(o+f)),(l+1)%e==0&&(d=null==i?0:i.y,c+=Math.round(r+_)))}},{key:"_tier",value:function(t,e,i,s,n,a){n=null==n?{x:0,y:0}:n;for(var r,o,l=void 0,h=void 0,u=t.length,c=i&&i.x||0,d=i&&i.y||0,_=s&&s.x||0,f=s&&s.y||0,p=null!=a&&a?v._countSize(t,i,e-1,_,!0):0,l=0;l<u;l++)h=t[l],r=null==i||0==i.width?h?h.getWidth():0:i.width,o=null==i||0==i.height?h?h.getHeight():0:i.height,0==r&&0==o||(null!=h&&"x"in h&&"y"in h&&(h.x=Math.round(0==p?c:c+p),h.y=Math.round(d+o*n.y)),c+=0==p?Math.round(r+_):Math.round(-1*(r+_)),(l+1)%e==0&&(c=null==i?0:i.x,d+=Math.round(o+f)))}},{key:"_countSize",value:function(t,e,i,s,n){if(i<1)return 0;if(n&&e&&0!=e.width)return Math.round(Math.abs(e.width*i+(i-1)*s));if(!n&&e&&0!=e.height)return Math.round(Math.abs(e.height*i+(i-1)*s));for(var a=void 0,r=0,a=0;a<i;a++)r+=n?Math.round(t[a].width):Math.round(t[a].height),r+=s;return r}}]),v);function v(){!function(t){if(!(t instanceof v))throw new TypeError("Cannot call a class as a function")}(this)}e.default=n},function(t,e,i){"use strict";function s(){!function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this)}Object.defineProperty(e,"__esModule",{value:!0}),(e.default=s).OS_PC="pc",s.OS_IPHONE="iphone",s.OS_IPOD="ipod",s.OS_IPAD="ipad",s.OS_ANDROID="android",s.OS_BLACK_BERRY="blackberry",s.OS_WINDOWS_PHONE="windows phone",s.LANDSCAPE="landscape",s.PORTRAIT="portrait",s.NONE="none"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n,a,r,o=i(29),l=o&&o.__esModule?o:{default:o},h=(n=u,r=[{key:"INIT_CLASS",value:function(){if(!u.IS_INIT){var t,e=u.IS_INIT=!0,i=!1,s=void 0;try{for(var n,a=u.LIST[Symbol.iterator]();!(e=(n=a.next()).done);e=!0)t=n.value,u.prototype[t]=l.default.create_func(t)}catch(t){i=!0,s=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw s}}}}}],(a=[{key:"getValue",value:function(){if(this.value)return this.value;this.value={};var t=void 0;for(t in this)0<=u.LIST.indexOf(t)||"function"==typeof this[t]||"actions"==t||"type_id"==t||"value"==t||(this.value[t]=this[t],delete this[t]);return this.value}},{key:"reset",value:function(){if(!this.value){var t=void 0;for(t in this)0<=u.LIST.indexOf(t)||"function"==typeof this[t]||"actions"==t||"type_id"==t||"value"==t||delete this[t]}this.type_id=1,this.actions=[],this.value=null}}])&&s(n.prototype,a),r&&s(n,r),u);function u(){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.actions=[],this.type_id=1,this.value=null}(e.default=h).LIST=["beginPath","closePath","stroke","fill","moveTo","lineTo","arcTo","arc","rect","clip","curveTo","createPattern","bezierCurveTo","createLinearGradient","createRadialGradient","lineStyle","clear","beginFill","endFill","beginBitmapFill","linearGradientFill","radialGradientFill","drawRect","drawRoundRect","drawPath","drawCircle","drawEllipse","createPolygon","drawSVGPath","drawShape","dispose"],h.IS_INIT=!1,h.className="GraphicsVO"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var d=n(i(3)),c=n(i(6)),_=n(i(26)),f=n(i(2)),p=n(i(0)),v=n(i(31)),r=n(i(20)),y=n(i(10));function n(t){return t&&t.__esModule?t:{default:t}}var a,o,l,h=(a=g,l=[{key:"pointsToPath",value:function(t,e,i){if(!t||t.length<2)return"";for(var s=void 0,n="",a=0,r=t.length;a<r;a++)n+=(0==a?"M ":1==a?" L ":", ")+((s=t[a])instanceof Array?s[0]:s.x)+" "+(s instanceof Array?s[1]:s.y);return s=t[0],n+=e?" Z":"",i?'<path d="'+n+'" />':n}},{key:"rectToPath",value:function(t,e){var i=Number(t.x||0),s=Number(t.y||0),n=Number(t.width),a=Number(t.height),r=Number(t.rx||0),o=Number(t.ry||r||0),l=n-2*(r=.5*n<r?.5*n:r),h=a-2*(o=.5*a<o?.5*a:o),u=.5522847498307933,c=u*r,d=u*o,_=0==r||0==o?"M"+i+" "+s+" L"+(i+n)+" "+s+" L"+(i+n)+" "+(s+a)+" L"+i+" "+(s+a)+" Z":"M"+(i+n)+" "+(s+o)+" C"+(i+n)+" "+(s+o-d)+" "+(i+l+r+c)+" "+s+" "+(i+l+r)+" "+s+" L"+(i+r)+" "+s+" C"+(i+r-c)+" "+s+" "+i+" "+(s+o-d)+" "+i+" "+(s+o)+" L"+i+" "+(s+h+o)+" C"+i+" "+(s+h+o+d)+" "+(i+r-c)+" "+(s+a)+" "+(i+r)+" "+(s+a)+" L"+(i+r+l)+" "+(s+a)+" C"+(i+l+r+c)+" "+(s+a)+" "+(i+n)+" "+(s+h+o+d)+" "+(i+n)+" "+(s+h+o)+" Z";return e?'<path d="'+_+'" />':_}},{key:"ellipseToPath",value:function(t,e){var i=Number(t.cx||0),s=Number(t.cy||0),n=Number(t.r||0),a=Number(t.rx||0),r=Number(t.ry||0),o=0==n?a:n,l=0==n?r:n,h=.5522848*o,u=.5522848*l,c="M"+d.default.format(i-o)+" "+s+" C"+d.default.format(i-o)+" "+d.default.format(s-u)+" "+d.default.format(i-h)+" "+d.default.format(s-l)+" "+i+" "+d.default.format(s-l)+" C"+d.default.format(i+h)+" "+d.default.format(s-l)+" "+d.default.format(i+o)+" "+d.default.format(s-u)+" "+d.default.format(i+o)+" "+s+" C"+d.default.format(i+o)+" "+d.default.format(s+u)+" "+d.default.format(i+h)+" "+d.default.format(s+l)+" "+i+" "+d.default.format(s+l)+" C"+d.default.format(i-h)+" "+d.default.format(s+l)+" "+d.default.format(i-o)+" "+d.default.format(s+u)+" "+d.default.format(i-o)+" "+s+" Z";return e?'<path d="'+c+'" />':c}},{key:"getShapeBounds",value:function(t,e){if(!t)return null;var i=[];switch(t.type){case v.default.LINE:i.push([t.properties.x1,t.properties.y1]),i.push([t.properties.x2,t.properties.y2]);break;case v.default.POLYLINE:case v.default.POLYGON:i=_.default.each(t.properties.points.split(/ /),function(t,e,i){i[e]=t.split(/,/)});break;case v.default.RECT:i.push([t.properties.x||0,t.properties.y||0]),i.push([(t.properties.x||0)+t.properties.width,(t.properties.y||0)+t.properties.height]);break;case v.default.CIRCLE:i.push([(t.properties.cx||0)-t.properties.r,(t.properties.cy||0)-t.properties.r]),i.push([(t.properties.cx||0)+t.properties.r,(t.properties.cy||0)+t.properties.r]);break;case v.default.ELLIPSE:i.push([(t.properties.cx||0)-t.properties.rx,(t.properties.cy||0)-t.properties.ry]),i.push([(t.properties.cx||0)+t.properties.rx,(t.properties.cy||0)+t.properties.ry]);break;case v.default.PATH:for(var s,n,a,r,o,l=t.properties.d.split(/[a-zA-Z]/),h=0,u=l.length;h<u;h++)if(r=l[h],!p.default.isEmpty(r))for(s=0,o=(r=_.default.format(p.default.trim(r).split(/,| |-/))).length;s<o;s+=2)n=r[s],a=r[s+1],p.default.isEmpty(n)||p.default.isEmpty(a)||i.push(e?f.default.create(c.default).set(n,a):[n,a])}return e?i:y.default.getPointsBounds(i)}},{key:"replace",value:function(t,e){if(!(t&&e&&t.rect&&(e.x!=t.rect.x||e.y!=t.rect.y||e.s&&1!=e.s)))return t;if(t.type==v.default.PATH&&/A|V|S|T|H/.test(t.properties.d.toUpperCase()))return trace("[ERROR] ShapeUtil.replace path won't support some attributes."),t;var n=e.s?e.s:1;t.rect.multiply(n);var i=void 0,a=e.x-t.rect.x,r=e.y-t.rect.y;switch(t.rect.x=e.x,t.rect.y=e.y,t.type){case v.default.LINE:t.properties.x1=d.default.format(parseFloat(t.properties.x1)*n+a),t.properties.y1=d.default.format(parseFloat(t.properties.y1)*n+r),t.properties.x2=d.default.format(parseFloat(t.properties.x2)*n+a),t.properties.y2=d.default.format(parseFloat(t.properties.y2)*n+r);break;case v.default.POLYLINE:case v.default.POLYGON:i=_.default.each(_.default.format(t.properties.points.split(/ /)),function(t,e,i){var s=t.split(/,/);i[e]=d.default.format(parseFloat(s[0])*n+a)+","+d.default.format(parseFloat(s[1])*n+r)}),t.properties.points=i.join(" ");break;case v.default.RECT:t.properties.x=d.default.format(parseFloat(t.properties.x||0)*n+a),t.properties.y=d.default.format(parseFloat(t.properties.y||0)*n+r),t.properties.height=t.properties.height*n,t.properties.width=t.properties.width*n,t.properties.hasOwnProperty("rx")&&t.properties.rx&&(t.properties.rx=t.properties.rx*n),t.properties.hasOwnProperty("ry")&&t.properties.ry&&(t.properties.ry=t.properties.ry*n);break;case v.default.CIRCLE:case v.default.ELLIPSE:t.properties.cx=d.default.format(parseFloat(t.properties.cx||0)*n+a),t.properties.cy=d.default.format(parseFloat(t.properties.cy||0)*n+r),t.properties.hasOwnProperty("r")&&t.properties.r&&(t.properties.r=t.properties.r*n),t.properties.hasOwnProperty("rx")&&t.properties.rx&&(t.properties.rx=t.properties.rx*n),t.properties.hasOwnProperty("ry")&&t.properties.ry&&(t.properties.ry=t.properties.ry*n);break;case v.default.PATH:i=g.getShapeBounds(t,!0),i=_.default.each(i,function(t){t.x=d.default.format(t.x*n+a),t.y=d.default.format(t.y*n+r)});for(var s,o="",l=_.default.format(t.properties.d.split(/,| |-|(?=[a-zA-Z])/)),h=0,u=0,c=l.length;h<c;h++)s=l[h],/[a-zA-Z]/.test(s)&&(o+=s[0]+" ",1==s.length&&(l.splice(h,1),s=l[h],c--)),u>=i.length||(o+=(s=i[u])[h%2==0?"x":"y"]+" ",h%2==1&&u++);t.properties.d=o}return t}},{key:"getRect",value:function(t,e,i,s,n,a){return n=n||0,a=a||n||0,f.default.create(r.default).setup(v.default.RECT,{x:t,y:e,width:i,height:s,rx:n,ry:a})}},{key:"getCircle",value:function(t,e,i,s){return s=s||i,f.default.create(r.default).setup(s==i?v.default.CIRCLE:v.default.ELLIPSE,s==i?{cx:t,cy:e,r:i}:{cx:t,cy:e,rx:i,ry:s})}},{key:"getPolygon",value:function(s){if(s&&s instanceof Array&&!(s.length<3)){var n="";return _.default.each(s,function(t,e){var i=t instanceof Array;n+=(i?t.join(","):t.x+","+t.y)+(e<s.length-1?" ":"")}),f.default.create(r.default).setup(v.default.POLYGON,{points:n})}}},{key:"getLine",value:function(s){if(s&&s instanceof Array&&!(s.length<2)){var n="";return _.default.each(s,function(t,e){var i=t instanceof Array;n+=(i?t.join(","):t.x+","+t.y)+(e<s.length-1?" ":"")}),f.default.create(r.default).setup(v.default.POLYLINE,{points:n})}}}],(o=null)&&s(a.prototype,o),l&&s(a,l),g);function g(){!function(t){if(!(t instanceof g))throw new TypeError("Cannot call a class as a function")}(this)}e.default=h},function(t,e,i){"use strict";function s(){!function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this)}Object.defineProperty(e,"__esModule",{value:!0}),(e.default=s).NORMAL="",s.MULTIPLY="multiply",s.SCREEN="screen",s.OVERLAY="overlay",s.DARKEN="darken",s.LIGHTEN="lighten",s.COLOR_DODGE="color-dodge",s.COLOR_BURN="color-burn",s.HARD_LIGHT="hard-light",s.SOFT_LIGHT="soft-light",s.DIFFERENCE="difference",s.EXCLUSION="exclusion",s.HUE="hue",s.SATURSTION="saturation",s.COLOR="color",s.LUMINOSITY="luminosity"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var r=a(i(13)),o=a(i(15)),n=a(i(3)),l=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var h,u,c,d=(h=_,(u=[{key:"setDistance",value:function(t){this.distance=t,this.setShadowOffset()}},{key:"setShadowOffset",value:function(){var t=n.default.getRadiansFromDegrees(this.angle);this.shadowOffsetX=n.default.format(this.distance*Math.cos(t)),this.shadowOffsetY=n.default.format(this.distance*Math.sin(t))}},{key:"show",value:function(t){var e=void 0;if(null==t||0==this.alpha||0==this.distance&&0==this.shadowBlur)!t||t instanceof CanvasRenderingContext2D||(e=r.default.getQualifiedClassName(t),t.style["HTMLSpanElement"==e||"HTMLParagraphElement"==e||"HTMLInputElement"==e||"HTMLTextAreaElement"==e?"textShadow":l.default.cssPrefix+"BoxShadow"]="");else{var i=this.alpha<1?o.default.colorToRGBA(this.shadowColor,this.alpha):this.shadowColor,e=r.default.getQualifiedClassName(t);if(t instanceof CanvasRenderingContext2D){if(0==this.distance&&0==this.shadowBlur)return;t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur,t.shadowColor=i}else{var s,n="HTMLSpanElement"==e||"HTMLParagraphElement"==e||"HTMLInputElement"==e||"HTMLTextAreaElement"==e;"SVGSVGElement"!=e||(s=t.getElementsByTagName("text"))&&0<s.length&&(n=!0);var a=n?"textShadow":l.default.cssPrefix+"BoxShadow";n||(t.style[l.default.cssPrefix+"BorderRadius"]=this.radius+"px"),t.style[a]=this.shadowOffsetX+"px "+this.shadowOffsetY+"px "+this.shadowBlur+"px "+i}}}},{key:"clone",value:function(){return new _(this.distance,this.angle,this.shadowBlur,this.shadowColor,this.alpha,this.radius)}},{key:"toString",value:function(){return'{"shadowColor":"'+this.shadowColor+'","distance":'+this.distance+',"shadowBlur":'+this.shadowBlur+',"radius":'+this.radius+',"angle":'+this.angle+',"alpha":'+this.alpha+"}"}}])&&s(h.prototype,u),c&&s(h,c),_);function _(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"#000000",n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;!function(t){if(!(t instanceof _))throw new TypeError("Cannot call a class as a function")}(this),this.shadowColor=o.default.formatColor(s),this.distance=t,this.shadowBlur=i,this.radius=a,this.angle=e,this.alpha=n,this.setShadowOffset()}(e.default=d).className="DropShadowFilter"},function(t,e,i){"use strict";function s(){!function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this)}Object.defineProperty(e,"__esModule",{value:!0}),(e.default=s).className="UIOrientation",s.isX=1,s.isY=2,s.isXY=3,s.isNone=0},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=c(i(2)),o=c(i(34)),l=c(i(63)),h=c(i(62)),u=c(i(33)),a=c(i(17)),r=c(i(1));function c(t){return t&&t.__esModule?t:{default:t}}var d,_,f,p=(d=v,f=[{key:"addFiles",value:function(t){if(null!=t){var e,i,s,n,a=void 0,r=void 0;for(a in t)if(e=t[a],s=a.split("@")[0],null!=e)if(e instanceof Image)if(t.hasOwnProperty(s+"@xml")||t.hasOwnProperty(s+"@json")){if(n=t.hasOwnProperty(s+"@xml"),null==(i=t[s+(n?"@xml":"@json")])){v._cache[a]=e;continue}if(null==(r=l.default.parseSheet(e,i,n))||r.length<=0){v._cache[a]=e;continue}n?v._cache.hasOwnProperty(s+"@xml")&&delete v._cache[s+"@xml"]:v._cache.hasOwnProperty(s+"@json")&&delete v._cache[s+"@json"],0<r[0].width?h.default.addSources(r):v.addSources(r)}else v._cache[a]=e;else if("fnt"==String(a.split("@")[1]).toLowerCase()){if(null==(r=l.default.parseFont(e)))continue;u.default.add(r)}else e instanceof o.default?v._cache[a]=e.content:v._cache[a]=e}}},{key:"addSources",value:function(t){if(!(null==t||t.length<1)){for(var e,i=void 0,s=[],i=0,n=t.length;i<n;i++)null!=(e=t[i])&&e instanceof a.default&&(0<e.width?s.push(e):v._cache[e.name]=e);0<s.length&&h.default.addSources(s)}}},{key:"getSource",value:function(t,e){var i=v._cache[t];return i?(!e&&r.default.useCanvas||!i||(i instanceof Image?i=v.__clone_image(i):i instanceof a.default&&((i=i.clone()).image=v.__clone_image(i.image))),i):i=(i=h.default.findData(t))&&1==i.length?i[0]:i}},{key:"__clone_image",value:function(t){var e=n.default.create(Image);return e.src=t.src,e.width=t.width,e.height=t.height,t.crossOrigin&&(e.crossOrigin=t.crossOrigin),e}},{key:"removeSource",value:function(t){v._cache.hasOwnProperty(t)&&("function"==typeof v._cache[t].dispose&&v._cache[t].dispose(),delete v._cache[t])}},{key:"clear",value:function(){v._cache={}}}],(_=null)&&s(d.prototype,_),f&&s(d,f),v);function v(){!function(t){if(!(t instanceof v))throw new TypeError("Cannot call a class as a function")}(this)}(e.default=p)._cache={},p.className="AssetManager"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var g=a(i(0)),n=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var r,o,l,h=(r=m,(o=[{key:"get",value:function(i,s,t){var n=2<arguments.length&&void 0!==t?t:null;return new Promise(function(t,e){this.getRequest("GET",i,s,t,e,n)}.bind(this))}},{key:"post",value:function(i,s,t){var n=2<arguments.length&&void 0!==t?t:null;return m.POST_USE_FORMDATA&&((n=n||{}).useFormData=!0),new Promise(function(t,e){this.getRequest("POST",i,s,t,e,n)}.bind(this))}},{key:"getHttp",value:function(){if(n.default.root.ActiveXObject)for(var t=["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp","Microsoft.XMLHttp"],e=0;e<t.length;e++)try{return new ActiveXObject(t[e])}catch(t){}else try{return new XMLHttpRequest}catch(t){}return!1}},{key:"getRequest",value:function(t,e,i,s,n,a){var r=5<arguments.length&&void 0!==a?a:null,o=void 0,l="",h="",u=r&&1==r.useFormData,c=void 0,d=void 0,_=!r||1!=r.async,f=this.getHttp();if(f){if(r&&r.with_credentials)try{f.withCredentials=!0}catch(t){}if(i&&"string"!=typeof i&&!u)for(o in i){if("number"!=(d=void 0===(c=i[o])?"undefined":y(c))&&("string"!=d||0==c.indexOf("data:")&&0<c.indexOf(";base64,"))){u=!0;break}l+=h+o+"="+encodeURIComponent(c),h="&"}if(!i||"string"==typeof i||!u||i instanceof FormData)!l&&i&&"string"==typeof i&&(l=i);else for(o in l=new FormData,i)d=void 0===(c=i[o])?"undefined":y(c),m.REMOVE_TYPE&&"string"==d&&0==c.indexOf("data:")&&0<c.indexOf(";base64,")&&((c=c.split(",")).shift(),c=c.join(",")),l.append(o,c);"get"==t.toLowerCase()&&"string"==typeof l&&0<l.length&&(e+=(0<=e.indexOf("?")?"&":"?")+l,l=null),f.open(t,e,_);var p=r&&r.headers?r.headers:null;if(p)for(var v in p)try{f.setRequestHeader(v,p[v])}catch(t){}if(f._responseType=g.default.getPathExt(e),this.responseType){try{f.responseType=this.responseType}catch(t){}f._responseType=this.responseType}f.onreadystatechange=function(){4==f.readyState&&(200<=f.status&&f.status<300||304===f.status?s&&(f._responseType==m.JSON?s(f.response||JSON.parse(f.responseText)):f._responseType==m.PROP?s(PropUtil.parseProperties(f.responseText)):f.responseType==m.ARRAY_BUFFER||f.responseType==m.BLOB||f.responseType==m.JSON?s(f.response):0<f.responseText.length?s(f.responseText):s(null)):n&&n(f.status))},f.send(l)}}}])&&s(r.prototype,o),l&&s(r,l),m);function m(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"json";!function(t){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this),this.responseType=t,this._responseType=null}(e.default=h).TEXT="text",h.JSON="json",h.BLOB="blob",h.PROP="prop",h.ARRAY_BUFFER="arraybuffer",h.REMOVE_TYPE=!1,h.POST_USE_FORMDATA=!1,h.className="Ajax"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=h(i(24)),a=h(i(1)),o=h(i(3)),l=h(i(38));function h(t){return t&&t.__esModule?t:{default:t}}var u,c,d,_=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,n.default),u=f,(c=[{key:"getWidth",value:function(){return o.default.format(Math.abs(this.element.videoWidth*this.scaleX))}},{key:"getHeight",value:function(){return o.default.format(Math.abs(this.element.videoHeight*this.scaleY))}},{key:"init",value:function(){this.is_init||(r(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"init",this).call(this),this.element.style.width="100%",this.element.style.height="100%",this.element.style.objectFit="fill",this.element.removeAttribute("controls"),a.default.os!=l.default.OS_PC&&(this.element.setAttribute("playsinline",!0),this.element.setAttribute("x-webkit-airplay","allow"),this.element.setAttribute("webkit-playsinline",!0)),a.default.isWeixin&&(this.element.setAttribute("x5-video-player-type","h5"),this.element.setAttribute("x5-video-player-fullscreen",!0)))}},{key:"_start_load",value:function(){r(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"_start_load",this).call(this)&&"poster"in this.list[this.current]&&(this.element.poster=this.list[this.current].poster)}},{key:"dispose",value:function(){this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),delete this.element),r(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"dispose",this).call(this)}}])&&s(u.prototype,c),d&&s(u,d),f);function f(){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return t._type="video",t}(e.default=_).className="Video"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=p(i(5)),o=p(i(43)),a=p(i(12)),l=p(i(18)),h=p(i(8)),u=p(i(10)),c=p(i(3)),d=p(i(4)),_=p(i(1)),f=p(i(6));function p(t){return t&&t.__esModule?t:{default:t}}var v,y,g,m=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(b,p(i(69)).default),v=b,(y=[{key:"setDimension",value:function(t,e,i,s,n){this._initial_width=this._mask_width=t,this._initial_height=this._mask_height=e,this._inertia=n,this._overflow=s,this.max_migration_length=Math.floor(1.2*Math.max(t,e)),null!=i&&(this._orientation=i),null!=this._register_instance&&this._control_orientation()}},{key:"initialize",value:function(){this._register_instance&&this._register_instance instanceof n.default&&this._register_instance._updateSize(),null!=this._register_instance&&0<this._mask_width&&0<this._mask_height&&this._control_orientation()}},{key:"_control_orientation",value:function(){var t;0<this._mask_width&&0<this._mask_height&&((t=this._mask?this._mask:new u.default).height=this._mask_height,t.width=this._mask_width,this.mask=t),0!=this._orientation&&(this._register_instance.addEventListener(a.default.RESIZE,_.default.delegate(this._reset_hold_control,this),this.name),this._reset_hold_control(null))}},{key:"_reset_hold_control",value:function(){var t=(this._orientation==o.default.isX||this._orientation==o.default.isXY)&&this._register_instance.width>this._mask_width||(this._orientation==o.default.isY||this._orientation==o.default.isXY)&&this._register_instance.height>this._mask_height;(this.mouseEnabled=this._register_instance.mouseEnabled=t)?this._register_instance.hasEventListener(h.default.MOUSE_DOWN)||this._register_instance.addEventListener(h.default.MOUSE_DOWN,_.default.delegate(this._mouse_drag_handler,this),this.name):(this._register_instance.removeEventListener(h.default.DRAG_MOVE,null,this.name),this._register_instance.removeEventListener(h.default.MOUSE_DOWN,null,this.name))}},{key:"_mouse_drag_handler",value:function(t){var e=this.localToGlobal(0,0),i=this._register_instance.localToGlobal(0,0),s=this._orientation==o.default.isY?0:Math.max(0,this._register_instance.getWidth()-this._mask_width),n=this._orientation==o.default.isX?0:Math.max(0,this._register_instance.getHeight()-this._mask_height),a=void 0;this._overflow&&(a=new u.default(0<s?e.x-s:i.x,0<n?e.y-n:i.y,s,n)),s=0<s?s+(this._overflow?this._mask_width*this.out_percent:0):0,n=0<n?n+(this._overflow?this._mask_height*this.out_percent:0):0;var r=new u.default(0<s?e.x-s:i.x,0<n?e.y-n:i.y,0<s?s+(this._overflow?this._mask_width*this.out_percent:0):0,0<n?n+(this._overflow?this._mask_height*this.out_percent:0):0);this._inertia&&(this._drag_area=a||r,this._drag_time=(new Date).getTime(),this._press_point=new f.default(t.mouseX,t.mouseY)),l.default.remove(this._register_instance),this._register_instance.addEventListener(h.default.DRAG_MOVE,_.default.delegate(this._drag_move_handler,this),this.name),(this.stage?this.stage:Stage.current).startDrag(this._register_instance,r,!1,a),(this.stage?this.stage:Stage.current).addEventListener(h.default.MOUSE_UP,_.default.delegate(this._mouse_up_handler,this),this.name)}},{key:"_drag_move_handler",value:function(){this.dispatchEvent(new d.default(b.DRAG_MOVE))}},{key:"_mouse_up_handler",value:function(t){var e,i,s,n,a,r;t?(e=!0,s=i=void 0,this._overflow&&(i=0<=this._register_instance.x?0:this._register_instance.x<this._mask_width-this._register_instance.getWidth()?this._mask_width-this._register_instance.getWidth():this._register_instance.x,s=0<=this._register_instance.y?0:this._register_instance.y<this._mask_height-this._register_instance.getHeight()?this._mask_height-this._register_instance.getHeight():this._register_instance.y,i==this._register_instance.x&&s==this._register_instance.y||(e=!1,l.default.to(this._register_instance,this.back_time,{ease:this.back_ease,x:i,y:s}))),this._inertia&&e&&(i=t.mouseX-this._press_point.x,s=t.mouseY-this._press_point.y,a=(n=c.default.format(Math.sqrt(i*i+s*s)))/((new Date).getTime()-this._drag_time),8<n&&(r=this._count_speed(i,s,a),l.default.to(this._register_instance,r.time,{ease:this.back_ease,x:r.x,y:r.y})))):this._overflow&&l.default.remove(this._register_instance),this._drag_time=0,this._drag_area=null,this._press_point=null,(this.stage?this.stage:Stage.current).stopDrag(),(this.stage?this.stage:Stage.current).mouseTarget=null,(this.stage?this.stage:Stage.current).removeEventListener(h.default.MOUSE_UP,null,this.name),this._register_instance.removeEventListener(h.default.DRAG_MOVE,null,this.name)}},{key:"_count_speed",value:function(t,e,i){var s,n={};i=c.default.clamp(i,.3,4.5),n.x=t*i*this.inertia_ratio,n.y=e*i*this.inertia_ratio,f.default.clamp(n,this.min_migration_length,this.max_migration_length),n.x=c.default.format(this._register_instance.x+n.x),n.y=c.default.format(this._register_instance.y+n.y),this._drag_area&&(s=this.globalToLocal(u.default.innerPoint(this._drag_area,this.localToGlobal(n.x,n.y))),n.x=c.default.format(s.x),n.y=c.default.format(s.y));var a=Math.sqrt((n.x-this._register_instance.x)*(n.x-this._register_instance.x)+(n.y-this._register_instance.y)*(n.y-this._register_instance.y));return n.time=Math.min(1,c.default.format(a/i*this.time_ratio)),n}},{key:"moveTo",value:function(t,e){r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"moveTo",this).call(this,t,e),this._register_instance&&this._register_instance.dispatchEvent(new d.default(d.default.RESIZE,{w:this._mask_width,h:this._mask_height},{x:this.x,y:this.y}))}},{key:"render",value:function(){(1!=this.scaleX&&0!=this.scaleX||1!=this.scaleY&&0!=this.scaleY)&&this._recovery_scale(!0),r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"render",this).apply(this,arguments)}},{key:"_recovery_pos",value:function(){this._register_instance.x<0&&this._register_instance.getWidth()+this._register_instance.x<this._mask_width?this._register_instance.x=this._mask_width-this._register_instance.getWidth():0<this._register_instance.x&&this._register_instance.getWidth()+this._register_instance.x>this._mask_width&&(this._register_instance.x=0),this._register_instance.y<0&&this._register_instance.getHeight()+this._register_instance.y<this._mask_height?this._register_instance.y=this._mask_height-this._register_instance.getHeight():0<this._register_instance.y&&this._register_instance.getHeight()+this._register_instance.y>this._mask_height&&(this._register_instance.y=0)}},{key:"_recovery_scale",value:function(t){this._mask_width=c.default.format(this._initial_width*this.scaleX),this._mask_height=c.default.format(this._initial_height*this.scaleY),t&&(this.scaleX=this.scaleY=1),this._recovery_pos(),this._mask&&(this._mask.width=this._mask_width,this._mask.height=this._mask_height,this.mask=this._mask),null!=this._register_instance&&(this._reset_hold_control(null),this._register_instance.resize=!0,this._register_instance.dispatchEvent(new d.default(d.default.RESIZE,{w:this._mask_width,h:this._mask_height},{x:this.x,y:this.y,r:this.rotation})))}},{key:"updateSizeInArea",value:function(t,e){this._initial_height=this.instance.getHeight(),this._initial_width=this.instance.getWidth();var i=0;this._initial_width>t&&(this.scaleX=t/this._initial_width,i+=1),this._initial_height>e&&(this.scaleY=e/this._initial_height,i+=2),i<3&&1!=i&&(this._mask_width=this._initial_width),i<3&&2!=i&&(this._mask_height=this._initial_height),0==i&&this._recovery_scale()}},{key:"reset",value:function(){this._register_instance&&(this._register_instance.hasEventListener(h.default.MOUSE_DOWN)&&(this._mouse_up_handler(null),this._register_instance.removeEventListener(h.default.MOUSE_DOWN,null,this.name)),this._register_instance.hasEventListener(a.default.RESIZE)&&this._register_instance.removeEventListener(a.default.RESIZE,null,this.name)),r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"reset",this).call(this),this.back_time=.16,this.out_percent=.5,this.time_ratio=.0014,this.inertia_ratio=1.2,this.min_migration_length=1,this.max_migration_length=10,this.back_ease="easeoutquad",this._overflow=this._inertia=!1,this._press_point=this._drag_area=null,this._orientation=this._drag_time=this._initial_width=this._initial_height=this._mask_width=this._mask_height=0}},{key:"dispose",value:function(){r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"dispose",this).call(this),delete this._initial_width,this._initial_height,this.time_ratio,this.min_migration_length,this.max_migration_length,this.inertia_ratio,this._drag_area,this._press_point,this._inertia,this._drag_time,this.back_ease,this.out_percent,this.back_time,this._orientation,this._overflow,this._mask_width,this._mask_height}}])&&s(v.prototype,y),g&&s(v,g),b);function b(){!function(t){if(!(t instanceof b))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return t.back_time=.16,t.out_percent=.5,t.time_ratio=.0014,t.inertia_ratio=1.2,t.min_migration_length=1,t.max_migration_length=10,t.back_ease="easeoutquad",t._orientation=0,t._overflow=!1,t._press_point=null,t._drag_area=null,t._inertia=!1,t._drag_time=0,t._initial_width=t._initial_height=t._mask_width=t._mask_height=0,t}(e.default=m).DRAG_MOVE="drag_container",m.className="UIContainer"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=a(i(5)),r=a(i(0)),o=a(i(13));function a(t){return t&&t.__esModule?t:{default:t}}var l,h,u,c=(l=d,u=[{key:"copyTransform",value:function(t,e,i,s){var n,a,r;null!=t&&null!=e&&null!=e.parent&&(n=i&&i.hasOwnProperty("rotation")?i.rotation:0,a=i&&i.hasOwnProperty("scaleX")?i.scaleX:1,r=i&&i.hasOwnProperty("scaleY")?i.scaleY:1,e.rotation=t.rotation+(s?n:-n),e.scaleX=t.scaleX*(s?a:1/a),e.scaleY=t.scaleY*(s?r:1/r),e.moveTo(e.parent.globalToLocal(t.localToGlobal(0,0))))}},{key:"equalOrContain",value:function(t,e){if(null==t||null==e)return!1;if(!(e instanceof n.default))return t==e;for(var i=t;null!=i;i=i.parent)if(i==e)return!0;return!1}},{key:"autoSizeFromText",value:function(t,e){if(null!=t&&!r.default.isEmpty(t.text)){var i,s,n=void 0,a=o.default.getQualifiedClassName(t);if(("InputText"==a||"TextField"==a&&0<t.lineWidth)&&(e=e||8,s="InputText"==a,t.render(),i=t.height,!((n=(s?t.element:t).scrollHeight)<=i)))for(;t.size>e&&i<n;)t.size=t.size-1,t.render(),n=(s?t.element:t).scrollHeight}}}],(h=null)&&s(l.prototype,h),u&&s(l,u),d);function d(){!function(t){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this)}e.default=c},function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var n=(s(a,[{key:"format",value:function(t,e){var i,s=1<arguments.length&&void 0!==e?e:"yyyy-MM-dd hh:mm:ss",n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(i in/(y+)/.test(s)&&(s=s.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(s)&&(s=s.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return s}},{key:"auto",value:function(t){var e=new Date,i=t.getFullYear()==e.getFullYear(),s=t.getMonth()==e.getMonth()&&t.getDate()==e.getDate();return a.format(t,s?"hh:mm":i?"MM-dd hh:mm":"yyyy-MM-dd hh:mm")}},{key:"calculateTime",value:function(t){var e=(t=String(t)).split(" "),i=e[0],s=parseInt(i.split("-")[0]),n=parseInt(i.split("-")[1]),a=parseInt(i.split("-")[2]),r=String(e[1]);return 365*s*24*60+30*n*24*60+24*a*60+60*parseInt(r.split(":")[0])+parseInt(r.split(":")[1])}},{key:"timeLabel",value:function(t){return t<2?"":2<=t&&t<60?t+"":60<=t&&t<1440?parseInt(t/60)+"":1440<=t&&t<10080?parseInt(t/1440)+"":10080<=t&&t<43200?parseInt(t/10080)+"":43200<=t&&t<518400?parseInt(t/43200)+"":parseInt(t/518400)+""}},{key:"getTime",value:function(t,e){return a.timeLabel(a.calculateTime((1<arguments.length&&void 0!==e?e:null)||a.format(new Date))-a.calculateTime(t))}}]),a);function a(){!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this)}e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=e.Language=function t(){n(this,t)};a.CN="zh",a.JA="ja",a.EN="en",a.TW="zh-tw",a.HK="zh-hk",a.FR="fr",a.DE="de",a.KO="ko",a.ES="es",a.SV="sv",a.IT="it";var r,o,l,h=(r=u,l=[{key:"set",value:function(t,e,i){StringUtil.isEmpty(t)||StringUtil.isEmpty(e)||(i=null==i?u.language:i,u.dic.hasOwnProperty(i)||(u.dic[i]={}),u.dic[i][t]=e)}},{key:"get",value:function(t,e){var i=(1<arguments.length&&void 0!==e?e:null)||u.language;return u.dic.hasOwnProperty(i)&&null!=u.dic[i]&&u.dic[i].hasOwnProperty(t)?u.dic[i][t]:""}},{key:"format",value:function(t){return(t=t.toLowerCase())==a.TW||t==a.HK?t:t.split("-")[0]}},{key:"clear",value:function(){u.dic={}}}],(o=null)&&s(r.prototype,o),l&&s(r,l),u);function u(){n(this,u)}(e.default=h).dic={},h.language=a.CN},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function a(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var r=i(52),o=r&&r.__esModule?r:{default:r};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=(s(u,[{key:"setItem",value:function(t,e,i){var s=2<arguments.length&&void 0!==i?i:3;e=(s*=36e5)?{data:e,time:(new Date).getTime(),exp:s}:e,e=o.default.encode("object"==(void 0===e?"undefined":n(e))?JSON.stringify(e):e),this.removeItem(t),this.store.setItem(t,e)}},{key:"getItem",value:function(t){var e=void 0,i=this.store.getItem(t);if(null==i)return null;i=o.default.decode(i);try{i=JSON.parse(i)}catch(t){}return"string"!=typeof i&&i.hasOwnProperty("time")?0<i.exp&&(new Date).getTime()-i.time>i.exp?this.removeItem(t):e=i.data:e=i,e}},{key:"removeItem",value:function(t){this.store.removeItem(t)}},{key:"clear",value:function(t,e,i){var s,n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==e?e:-1,r=2<arguments.length&&void 0!==i?i:null;if(!n&&!r)return this.store.clear();if(!window.localStorage&&!window.sessionStorage)return this.store.clear(n,a,r);for(s in this.store)r&&0<=r.indexOf(s)||n&&(a<0?s.indexOf(n)<0:s.indexOf(n)!=a)||this.removeItem(s)}}]),u);function u(){l(this,u),this.store=window.localStorage||window.sessionStorage||new c}e.default=h;var c=(s(d,[{key:"setItem",value:function(t,e){var i=new Date;i.setDate(i.getDate()+30),document.cookie=t+"="+escape(e)+";expires="+i.toGMTString()}},{key:"getItem",value:function(t){if(document.cookie.length<=0)return"";var e=document.cookie.indexOf(t+"=");if(-1==e)return"";e=e+t.length+1;var i=document.cookie.indexOf(";",e);return-1==i&&(i=document.cookie.length),unescape(document.cookie.substring(e,i))}},{key:"removeItem",value:function(t){var e=new Date;e.setTime(e.getTime()-1);var i=this.getItem(t);null!=i&&""!=i&&(document.cookie=t+"="+i+";expires="+e.toGMTString())}},{key:"clear",value:function(t,e,i){var s=0<arguments.length&&void 0!==t?t:null,n=1<arguments.length&&void 0!==e?e:-1,a=2<arguments.length&&void 0!==i?i:null,r=void 0,o=void 0,l=document.cookie.match(/[^ =;]+(?=\=)/g);if(l)for(r=l.length;0<r;r--)o=l[r],a&&0<=a.indexOf(o)||s&&(n<0?o.indexOf(s)<0:o.indexOf(s)!=n)||(document.cookie=l[r]+"=0;expires="+new Date(0).toUTCString())}}]),d);function d(){l(this,d)}h.className="Storage"},function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var n=(s(a,[{key:"encode",value:function(t){for(var e=void 0,i=t.length,s=String.fromCharCode(t.charCodeAt(0)+i),e=1;e<i;e++)s+=String.fromCharCode(t.charCodeAt(e)-t.charCodeAt(e-1));return escape(s)}},{key:"decode",value:function(t){for(var e=void 0,i=(t=unescape(t)).length,s=String.fromCharCode(t.charCodeAt(0)-i),e=1;e<i;e++)s+=String.fromCharCode(t.charCodeAt(e)+s.charCodeAt(e-1));return s}}]),a);function a(){!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this)}(e.default=n).className="Compile"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var a=o(i(6)),c=o(i(3)),n=o(i(9)),r=o(i(2));function o(t){return t&&t.__esModule?t:{default:t}}var l,h,u,d=(l=_,(h=[{key:"setup",value:function(t,e,i,s,n,a){return this.a=null!=t?t:1,this.b=null!=e?e:0,this.c=null!=i?i:0,this.d=null!=s?s:1,this.tx=null!=n?n:0,this.ty=null!=a?a:0,this}},{key:"concatTransform",value:function(t,e,i,s,n,a,r,o,l){var h=1,u=0;n%360!=0&&(h=c.default.cos(n),u=c.default.sin(n)),0!=a&&(this.tx-=a),0!=r&&(this.ty-=r),o||l?(this.prepend(h*i,u*i,-u*s,h*s,0,0),this.prepend(c.default.cos(l),c.default.sin(l),-c.default.sin(o),c.default.cos(o),t,e)):this.prepend(h*i,u*i,-u*s,h*s,t,e)}},{key:"prepend",value:function(t,e,i,s,n,a){var r,o,l=this.tx;return 1==t&&0==e&&0==i&&1==s||(r=this.a,o=this.c,this.a=r*t+this.b*i,this.b=r*e+this.b*s,this.c=o*t+this.d*i,this.d=o*e+this.d*s),this.tx=l*t+this.ty*i+n,this.ty=l*e+this.ty*s+a,this}},{key:"append",value:function(t,e,i,s,n,a){var r=this.a,o=this.b,l=this.c,h=this.d;return 1==t&&0==e&&0==i&&1==s||(this.a=t*r+e*l,this.b=t*o+e*h,this.c=i*r+s*l,this.d=i*o+s*h),this.tx=n*r+a*l+this.tx,this.ty=n*o+a*h+this.ty,this}},{key:"concat",value:function(t){var e,i,s,n,a=t.a,r=t.b,o=t.c,l=t.d,h=this.tx,u=this.ty;return 1==a&&0==r&&0==o&&1==l||(e=this.a,i=this.b,s=this.c,n=this.d,this.a=e*a+i*o,this.b=e*r+i*l,this.c=s*a+n*o,this.d=s*r+n*l),this.tx=h*a+u*o+t.tx,this.ty=h*r+u*l+t.ty,this}},{key:"rotate",value:function(t){var e=Math.cos(t),i=Math.sin(t),s=this.a,n=this.c,a=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this}},{key:"scale",value:function(t,e){return this.a*=t,this.d*=e,this.tx*=t,this.ty*=e,this}},{key:"translate",value:function(t,e){return this.tx+=t,this.ty+=e,this}},{key:"invert",value:function(){var t=this.a,e=this.b,i=this.c,s=this.d,n=this.tx,a=t*s-e*i;return this.a=s/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-s*n)/a,this.ty=-(t*this.ty-e*n)/a,this}},{key:"transformPoint",value:function(t,e,i){var s=t.x*this.a+t.y*this.c+this.tx,n=t.x*this.b+t.y*this.d+this.ty;return e&&(s=s+.5>>0,n=n+.5>>0),i?new a.default(s,n):(t.x=s,t.y=n,t)}},{key:"applyDisplay",value:function(t){null==t&&(t={});var e=Math.atan(-this.c/this.d),i=Math.atan(this.b/this.a);return t.x=this.tx,t.y=this.ty,t.scaleX=-_.PI_Q<i&&i<_.PI_Q?this.a/Math.cos(i):this.b/Math.sin(i),t.scaleY=-_.PI_Q<e&&e<_.PI_Q?this.d/Math.cos(e):-this.c/Math.sin(e),t.rotation=c.default.isEquivalent(e,i)?c.default.getDegreesFromRadians(e):0,t}},{key:"clone",value:function(){return r.default.create(_).setup(this.a,this.b,this.c,this.d,this.tx,this.ty)}},{key:"toString",value:function(){return'{"a":'+this.a+',"b":'+this.b+',"c":'+this.c+',"d":'+this.d+',"tx":'+this.tx+',"ty":'+this.ty+"}"}},{key:"toCSS",value:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty+")"}},{key:"reset",value:function(t,e,i,s,n,a){var r=0<arguments.length&&void 0!==t?t:1,o=1<arguments.length&&void 0!==e?e:0,l=2<arguments.length&&void 0!==i?i:0,h=3<arguments.length&&void 0!==s?s:1,u=4<arguments.length&&void 0!==n?n:0,c=5<arguments.length&&void 0!==a?a:0;return this.setup(r,o,l,h,u,c)}},{key:"dispose",value:function(){delete this.a,this.b,this.c,this.d,this.tx,this.ty}},{key:"data",get:function(){return JSON.parse(this.toString())},set:function(t){null!=t&&null!=t&&n.default.copyAttribute(this,t,!0)}}])&&s(l.prototype,h),u&&s(l,u),_);function _(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;!function(t){if(!(t instanceof _))throw new TypeError("Cannot call a class as a function")}(this),this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.setup(t,e,i,s,n,a)}(e.default=d).className="Matrix",d.PI_Q=Math.PI/4},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=r(i(2)),a=r(i(23));function r(t){return t&&t.__esModule?t:{default:t}}var o,l,h,u=(o=c,h=[{key:"instance",get:function(){return c.COUNT>=c.MAX&&n.default.length("RenderObject")<1?null:n.default.create(c)}}],(l=[{key:"setSize",value:function(t,e){0!=t&&0!=e&&(this.canvas.width=MathUtil.int(Math.abs(t)),this.canvas.height=MathUtil.int(Math.abs(e)))}},{key:"clear",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.restore()}},{key:"reset",value:function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.clear()}},{key:"dispose",value:function(){reset(),c.COUNT--,this.canvas=this.context=null}}])&&s(o.prototype,l),h&&s(o,h),c);function c(){!function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),this.canvas=this.context=null,a.default.create(this),c.COUNT++}(e.default=u).className="RenderObject",u.COUNT=0,u.MAX=50},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=h(i(17)),a=h(i(2)),o=h(i(16)),l=h(i(0));function h(t){return t&&t.__esModule?t:{default:t}}var u,c,d,_=Symbol("rate"),f=Symbol("reversePlay"),p=Symbol("currentFrame"),v=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(y,o.default),u=y,(c=[{key:"clearAllFrames",value:function(){if(null!=this._frames){for(var t;0<this._frames.length;)t=this._frames.pop(),this._remove_frame(t);this._frame=this[p]=1,this._paused=!0}}},{key:"setFrames",value:function(t){if(null!=t&&t instanceof Array&&!(t.length<=0)){for(var e=void 0,i=t.length,e=0;e<i;e++)this.addFrame(t[e]);0<this._frames.length&&this.gotoAndPlay(1)}}},{key:"addFrame",value:function(t,e){var i;null!=t&&null!=t&&(t instanceof n.default||t instanceof o.default)&&(null==e?this._frames.push(t):this._frames.splice(e,0,t),i=t instanceof o.default,this.width=i?t.width:Math.max(this.width,t.frame_width,t.width),this.height=i?t.height:Math.max(this.height,t.frame_height,t.height),this.name=i?this.name:t.animation+(l.default.isEmpty(t.label)?"":":"+t.label))}},{key:"getFrame",value:function(t){return 0<=t&&t<this._frames.length?this._frames[t]:null}},{key:"removeFrame",value:function(t){var e;t<0||t>=this._frames.length||(e=this._frames.splice(t,1),this._remove_frame(e))}},{key:"_remove_frame",value:function(t){null!=t&&null!=t&&(t instanceof n.default&&t.isClone?a.default.remove(t):t instanceof o.default&&t.removeFromParent(!0))}},{key:"play",value:function(t){this._replay_time=null==t?0:t,this._paused=!1}},{key:"stop",value:function(){this._paused=!0}},{key:"gotoAndStop",value:function(t){if(null!=this._frames){if("string"==typeof t)for(var e=void 0,i=this._frames.length,e=0;e<i;e++)if(this._frames[e]&&this._frames[e].label==t){t=Number(e)+1;break}t<1||t>this._frames.length||(this._frame=t,this._paused=!0)}}},{key:"gotoAndPlay",value:function(t){this.gotoAndStop(t),this._paused=!1}},{key:"nextFrame",value:function(){this._frame=this[f]?this[p]<=1?this._frames.length:this[p]-1:this[p]>=this._frames.length?1:this[p]+1}},{key:"render",value:function(){var t,e;!this.visible||this.alpha<=0||((!this._paused||null==this.instance||this._frame!=this[p])&&0<this._frames.length&&(this.label=this.name,this[p]=this._frame,(t=this._frames[this[p]-1])&&t instanceof o.default?(this.setInstance(t.instance),this.height=t.getHeight(),this.width=t.getWidth()):this._frames[this[p]-1]=this.setInstance(t),e=this.label,this.label=this.name,this.name=e,this._paused||(this._count--,this._count<=0&&(this.nextFrame(),(this[f]&&this[p]<=1||!this[f]&&this[p]>=this._frames.length)&&0<this._replay_time&&(this._replay_time--,0==this._replay_time&&(this._paused=!0,this.dispatchEvent(new Event(Event.PLAY_OVER))))),this._count=this._count<=0?this[_]:this._count)),r(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"render",this).apply(this,arguments))}},{key:"reset",value:function(t){var e=0<arguments.length&&void 0!==t?t:null;r(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"reset",this).call(this),this.clearAllFrames(),this.label=null,this._paused=!0,this._replay_time=0,this[f]=!1,this._frame=this._count=this[_]=this[p]=1,e&&this.setFrames(e)}},{key:"dispose",value:function(){r(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"dispose",this).call(this),delete this._frame,this._count,this[_],this[f],this._replay_time,this._frames,this._paused,this[p],this.label}},{key:"toString",value:function(){return y.name}},{key:"totalFrame",get:function(){return this._frames.length}},{key:"currentFrame",get:function(){return this[p]}},{key:"rate",get:function(){return this[_]},set:function(t){null==t||null==t||t<=1||t==this[_]||(this[_]=Math.abs(MathUtil.int(t)))}},{key:"reverse",get:function(){return this[f]},set:function(t){null!=t&&null!=t&&t!=this[f]&&(this[f]=Boolean(t))}}])&&s(u.prototype,c),d&&s(u,d),y);function y(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;!function(t){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(y.__proto__||Object.getPrototypeOf(y)).call(this));return e.label,e._frames=[],e._paused=!0,e._replay_time=0,e[f]=!1,e._count=e[_]=1,e._frame=1,e[p]=1,t&&e.setFrames(t),e}(e.default=v).className="MovieClip"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=c(i(17)),a=c(i(4)),o=c(i(14)),l=c(i(16)),h=c(i(2)),u=c(i(0));function c(t){return t&&t.__esModule?t:{default:t}}var d,_,f,p=Symbol("reversePlay"),v=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(y,o.default),d=y,(_=[{key:"clearAllFrames",value:function(){if(null!=this._frames){for(var t;0<this._frames.length;)t=this._frames.pop(),this._remove_frame(t);this._frame=this._current_frame=1,this._paused=!0}}},{key:"setFrames",value:function(t){if(null!=t){for(var e in t)this.addFrame(t[e]);0<this._frames.length&&this.gotoAndPlay(1)}}},{key:"addFrame",value:function(t,e){null!=t&&null!=t&&t instanceof n.default&&(null==e?this._frames.push(t):this._frames.splice(e,0,t),this.width=Math.max(this.width,t.frame_width,t.width),this.height=Math.max(this.height,t.frame_height,t.height))}},{key:"getFrame",value:function(t){return 0<=t&&t<this._frames.length?this._frames[t]:null}},{key:"removeFrame",value:function(t){var e;t<0||t>=this._frames.length||(e=this._frames.splice(t,1),this._remove_frame(e))}},{key:"_remove_frame",value:function(t){null!=t&&null!=t&&(t instanceof n.default&&t.isClone?h.default.remove(t):t instanceof l.default&&t.removeFromParent(!0))}},{key:"play",value:function(t){this._replay_time=null==t?0:t,this._paused=!1}},{key:"stop",value:function(){this._paused=!0}},{key:"gotoAndStop",value:function(t){if(null!=this._frames){if("string"==typeof t)for(var e=void 0,i=this._frames.length,e=0;e<i;e++)if(this._frames[e]&&this._frames[e].label==t){t=Number(e)+1;break}t<1||t>this._frames.length||(this._frame=t,this._paused=!0)}}},{key:"gotoAndPlay",value:function(t){this.gotoAndStop(t),this._paused=!1}},{key:"nextFrame",value:function(){this._frame=this[p]?this._current_frame<=1?this._frames.length:this._current_frame-1:this._current_frame>=this._frames.length?1:this._current_frame+1}},{key:"render",value:function(t){var e;!this.visible||this.alpha<=0||(!this._paused||null==this.instance||this._frame!=this._current_frame)&&0<this._frames.length&&(this._current_frame=this._frame,e=this._frames[this._current_frame-1],this.setInstance(e),this.label=e.animation+(u.default.isEmpty(e.label)?"":":"+e.label),this._paused||(this.nextFrame(),(this[p]&&this._current_frame<=1||!this[p]&&this._current_frame>=this._frames.length)&&0<this._replay_time&&(this._replay_time--,0==this._replay_time&&(this._paused=!0,this.dispatchEvent(new a.default(a.default.PLAY_OVER)))))),r(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"render",this).call(this,t)}},{key:"reset",value:function(){r(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"reset",this).call(this),this.clearAllFrames(),this.label=null,this._paused=!0,this._replay_time=0,this[p]=!1,this._frame=this._current_frame=1}},{key:"dispose",value:function(){r(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"dispose",this).call(this),delete this._frame,this[p],this._frames,this._paused,this._current_frame,this.label,this._replay_time}},{key:"toString",value:function(){return y.name}},{key:"reverse",get:function(){return this[p]},set:function(t){null!=t&&null!=t&&t!=this[p]&&(this[p]=Boolean(t))}},{key:"totalFrame",get:function(){return this._frames.length}}])&&s(d.prototype,_),f&&s(d,f),y);function y(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;!function(t){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(y.__proto__||Object.getPrototypeOf(y)).call(this));return e.label,e._frames=[],e._paused=!0,e._replay_time=0,e[p]=!1,e._frame=e._current_frame=1,t&&e.setFrames(t),e}(e.default=v).className="DOMMovie"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=c(i(16)),a=c(i(8)),l=c(i(0)),o=c(i(9)),h=c(i(15)),u=c(i(1));function c(t){return t&&t.__esModule?t:{default:t}}var d,_,f,p=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(k,n.default),d=k,f=[{key:"getFontMetrics",value:function(t,e){return{height:e}}}],(_=[{key:"getTextWidth",value:function(t){var e=0<arguments.length&&void 0!==t?t:null,i=this.stage?this.stage.context:u.default.context,e=null==e?this._text:e;return i&&this.context?(i.font!=this.context.font&&(i.font=this.context.font),i.measureText(e).width):0}},{key:"_update",value:function(){this.context.reset(),this.context.font=(this._italic?"italic ":"")+(this._bold?"bold ":"")+("number"==o.default.getType(this._size)?this._size+"px ":this._size+" ")+this._font,this._writingMode?this._vertical_text():this._horizontal_text(),this.has_update=!1}},{key:"_vertical_text",value:function(){null==this._fontMetrics&&(this._fontMetrics=k.getFontMetrics(this.font,this.size));for(var t,e,i=this._text.split(/\r\n|\r|\n|<br(?:[ \/])*>/),s=void 0,n=void 0,a=void 0,r=void 0,o=i.length,l=this._fontMetrics.height*this._lineHeight*.5,h=l,u=this.autoSize&&this._lineWidth?this._lineWidth:this.height,c=.5*this._fontMetrics.height,d=this._fontMetrics.height,_=0,f=this.autoSize?0:this.width-.5*this.size,p=void 0,v="start"==this._textAlign||"left"==this._textAlign,y=v&&!this.autoSize?null:[],n=0;n<o&&(r=i[n],this.autoSize||!(f<=this._leading));n++){for(var g=v&&!this.autoSize?null:[],a=0,p=r.length;a<p;a++)if((s=r.charAt(a))&&0!=s.length){if(t=!s.match(/[\u4e00-\u9fa5]/),e=this.getTextWidth(s),_=Math.max(_,e),c+h>=u-this._leading&&(g&&g.length&&(y.push({d:g,r:{x:f-_,y:g[0].y,w:_,h:g[g.length-1].y-g[0].y+d+this._leading}}),g=[]),h=l,f-=this._fontMetrics.height*this._lineHeight,!this.autoSize&&f<=this._leading))break;g?g.push({w:s,x:f-e,y:c+h,b:t}):this._draw(s,c+h,f-e,t),h=h+(t?e:d)+this._leading}g&&g.length&&(y.push({d:g,r:{x:f-_,y:g[0].y,w:_,h:g[g.length-1].y-g[0].y+d+this._leading}}),g=[]),h=l,f-=_*this._lineHeight}if(y)for(f=Math.abs(y[y.length-1].d[0].x)+this._leading,l=this._fontMetrics.height+this._leading,n=0,o=y.length;n<o;n++)for(r=y[n],this.context.clearRect(r.r.x,r.r.y,r.r.w,r.r.h),c=l+("center"==this._textAlign?.5*(u-r.r.h):v?0:u-r.r.h),h=r.d[0].y,a=0,p=r.d.length;a<p;a++)s=r.d[a],this._draw(s.w,s.y-h+c,f+s.x,s.b)}},{key:"_horizontal_text",value:function(){var i=this;null==this._fontMetrics&&(this._fontMetrics=k.getFontMetrics(this.font,this.size));var t=this._text.split(/\r\n|\r|\n|<br(?:[ \/])*>/),e=void 0,s=void 0,n=void 0,a=t.length,r=this._fontMetrics.height*this._lineHeight,o=this._fontMetrics.height*this._lineHeight*.5;this.autoSize&&(this.width=this._lineWidth);for(var l=this.autoSize&&this._lineWidth?this._lineWidth:this.width,h="start"==this._textAlign||"left"==this._textAlign,e=0;e<a&&(n=t[e],s=0,this.autoSize||!(o>=this.height-this._leading));e++){var u=h?null:[];if(this.wordBreak)for(var c=0,d=n.length;c<d;c++){var _=n.charAt(c),f=this.getTextWidth(_)+this._leading;if(0<s&&0<l&&l<=s+f&&(!h&&u.length&&function(){var e=Math.floor((l-s-i._leading)*("center"==i._textAlign?.5:1));u.forEach(function(t){return i._draw(t.l,t.y,t.x+e)}),u=[]}(),o+=r,s=0,!this.autoSize&&o>=this.height-this._leading))break;h?this._draw(_,o,s):u.push({l:_,x:s,y:o}),s+=f}else for(var p=n.split(/([^\x00-\xff]|\b)/),v=0,y=p.length;v<y;v++){var g=p[v];if(g&&0!=g.length){var m=this.getTextWidth(g)+g.length*this._leading;if(0<s&&0<l&&l<=s+m&&(!h&&u.length&&function(){var e=Math.floor((l-s-i._leading)*("center"==i._textAlign?.5:1));u.forEach(function(t){this._draw(t.l,t.y,t.x+e)}.bind(i)),u=[]}(),o+=r,s=0),!this.autoSize&&o>=this.height-this._leading)break;for(var b=0,O=g.length;b<O;b++){var w=g[b];h?this._draw(w,o,s):u.push({l:w,x:s,y:o}),s+=this.getTextWidth(w)+this._leading}}}!h&&u.length&&function(){var e=Math.floor((l-s-i._leading)*("center"==i._textAlign?.5:1));u.forEach(function(t){this._draw(t.l,t.y,t.x+e)}.bind(i))}(),o+=r}this.scrollHeight=o,this.autoSize&&(this.height=o)}},{key:"_draw",value:function(t,e,i,s){var n,a=1<arguments.length&&void 0!==e?e:0,r=2<arguments.length&&void 0!==i?i:0,o=3<arguments.length&&void 0!==s&&s;this.context.save(),this.context.textBaseline=this._textBaseline,this._writingMode&&o&&(n=0<=k.specialCode.indexOf(t.charCodeAt(0)),this.context.translate(n?r:r-.5*this.size+(t.match(/[),!,t,f,i,l,j,I,J,r,I,F,E,I,Y]/)?-.25*this.size:t.match(/[O,@,%,&,q,w,m,W,M,Q,N,p]/)?.3*this.size:0),a-this.size),this.context.rotate(Math.PI/180*90),this.context.textBaseline="bottom",r=a=0),"fill"!=this._fill_type&&"both"!=this._fill_type||(this.context.fillStyle=this._color,this.context.fillText(t,r,a)),"stroke"!=this._fill_type&&"both"!=this._fill_type||(this.context.strokeStyle=this._color2,this.context.strokeText(t,r,a)),this.context.restore()}},{key:"__update_size",value:function(){null!=this.canvas&&(this.stage.canvas.width>this.canvas.width+1||(this.stage?this.stage:u.default).canvas.height>this.canvas.height+1)&&(this.has_update=!0)}},{key:"_render",value:function(){l.default.isEmpty(this._text)||(this._has_update&&this._update(),this.context&&r(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"_render",this).apply(this,arguments))}},{key:"dispose",value:function(){r(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"dispose",this).call(this),delete this.wordBreak,this.scrollHeight,this._lineHeight,this.autoSize,this._underline,this._writingMode,this._text,this._font,this._color,this._color2,this._size,this._textAlign,this._textBaseline,this._fill_type,this._has_update,this._leading,this._italic,this._bold,this._lineWidth,this._fontMetrics,this.mouseEnabled}},{key:"toString",value:function(){return k.name}},{key:"has_update",get:function(){return this._has_update},set:function(t){this._has_update!=t&&(this._has_update=t)&&this.__checkDisplayUpdate()}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(t){this._lineWidth!=t&&(this._lineWidth=t,this.has_update=!0)}},{key:"italic",get:function(){return this._italic},set:function(t){this._italic!=t&&(this._italic=t,this.has_update=!0)}},{key:"writingMode",get:function(){return this._writingMode},set:function(t){this._writingMode!=t&&(this._writingMode=t,this.has_update=!0)}},{key:"underline",get:function(){return this._underline},set:function(t){this._underline!=t&&(this._underline=t)}},{key:"bold",get:function(){return this._bold},set:function(t){this._bold!=t&&(this._bold=t,this.has_update=!0)}},{key:"text",get:function(){return this._text},set:function(t){this._text!=t&&(this._text=t,this.has_update=!0)}},{key:"size",get:function(){return this._size},set:function(t){this._size!=t&&(this._size=t,this.has_update=!0,this._fontMetrics=k.getFontMetrics(this.font,this.size))}},{key:"color",get:function(){return this._color},set:function(t){l.default.isEmpty(t)||(t=h.default.formatColor(t),this._color!=t&&(this._color=t,this.has_update=!0))}},{key:"strokeColor",get:function(){return this._color2},set:function(t){t=h.default.formatColor(t),this._color2!=t&&(this._color2=t,this.has_update=!0)}},{key:"font",get:function(){return this._font},set:function(t){this._font!=t&&(this._font=t,this.has_update=!0,this._fontMetrics=k.getFontMetrics(this.font,this.size))}},{key:"fillType",get:function(){return this._fill_type},set:function(t){this._fill_type!=t&&(this._fill_type=t,this.has_update=!0)}},{key:"align",get:function(){return this._textAlign},set:function(t){this._textAlign!=t&&(this._textAlign=t,this.has_update=!0)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!=t&&(this._leading=t,this.has_update=!0)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){null==t||t<=0||this._lineHeight==t||(this._lineHeight=t,this.has_update=!0)}},{key:"baseLine",get:function(){return this._textBaseline},set:function(t){this._textBaseline!=t&&(this._textBaseline=t,this.has_update=!0)}},{key:"stage",get:function(){return this._stage},set:function(t){this._stage!=t&&(this._stage&&this._stage.removeEventListener(a.default.UPDATE,null,this.name),this._stage=t,this._stage&&this._stage.addEventListener(a.default.UPDATE,u.default.delegate(this.__update_size,this),this.name))}}])&&s(d.prototype,_),f&&s(d,f),k);function k(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Microsoft YaHei,Arial",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"#000000",s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:12,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"fill",a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"#000000",r=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0;!function(t){if(!(t instanceof k))throw new TypeError("Cannot call a class as a function")}(this);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(k.__proto__||Object.getPrototypeOf(k)).call(this));return o._text=t,o._font=e,o._size=s,o._leading=r,o._fill_type=n,o._color2=a,o._color=h.default.formatColor(i),o._lineHeight=1,o._has_update=!0,o._textAlign="left",o._textBaseline="middle",o._underline=o._italic=o._bold=!1,o._lineWidth=null,o._fontMetrics=null,o.autoSize=!0,o.scrollHeight=0,o.mouseEnabled=!1,o._writingMode=!1,o.wordBreak=!0,o.width=0,l.default.isEmpty(o._text)||o._update(),o}(e.default=p).className="TextField",p.specialCode=[183,215,8212,8216,8217,8220,8221,8230,12289,12290,12298,12299,12302,12303,12304,12305,65281,65288,65289,65292,65306,65307,65311]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=c(i(14)),a=c(i(0)),o=c(i(15)),l=c(i(3)),h=c(i(1)),u=c(i(4));function c(t){return t&&t.__esModule?t:{default:t}}var d,_,f,p=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(v,n.default),d=v,(_=[{key:"_init",value:function(){var t=void 0;if(!this.isInput)return(t=document.createElement("span")).style.lineHeight=this._lineHeight,t.style.wordBreak="break-all",t.contenteditable=!1,t.draggable=!1,t.display="block",t;this.multiline?(t=document.createElement("textarea")).style.resize="none":t=document.createElement("input"),this._cursor="text",t.setAttribute("type",this.password?"password":"text"),t.setAttribute("tabindex",this.tabindex),t.style.border="none",t.style.outline="thin",t.style.overflow="hidden",t.style.autofocus="autofocus",t.style.wordBreak="break-all",t.style.background="none",t.style.color=this._color,t.style.lineHeight=this._lineHeight,t.style.writingMode=this._writingMode?"tb-rl":"lr-tb";var e=this;return t.oninput=function(){e.dispatchEvent(new u.default(v.CHANGE,t.value))},t.onfocus=function(){e.dispatchEvent(new u.default(v.FOCUS_IN))},t.onblur=function(){e.dispatchEvent(new u.default(v.FOCUS_OUT))},t}},{key:"_display",value:function(t){r(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"_display",this).call(this,t),t&&this.updateSize()}},{key:"updateSize",value:function(){var t,e,i;this.__checkDisplayUpdate(),this.autoSize&&!this.isInput&&null!=this.element&&0!=this.element.offsetHeight&&(t=l.default.format((this._size+this._leading)*this.text.length),e=!this.writingMode&&this._lineWidth,i=this.writingMode&&this._lineWidth,this.width=e?this._lineWidth:i?0:this.width?this.width:0==this.height?t:t/this.height,this.height=i?this._lineWidth:0)}},{key:"dispose",value:function(){r(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"dispose",this).call(this),delete this._lineHeight,this.autoSize,this._selectable,this._enable,this._underline,this._writingMode,this.isInput,this.tabindex,this.password,this.multiline,this._lineWidth,this._size,this._leading,this._maxChars,this._font,this._color,this._textAlign,this._verticalAlign,this._bold,this._italic}},{key:"enable",get:function(){return this._enable},set:function(t){null!=t&&this._enable!=t&&(this._enable=t,this.isInput&&(this.element.disabled=this._enable?"":"disabled"))}},{key:"selectable",get:function(){return this._selectable},set:function(t){null!=t&&(this._selectable=t,this._cursor=t?"text":"default",this.element.style.pointerEvents=t?"auto":"none",this.element.style[a.default.isEmpty(h.default.cssPrefix)?"userSelect":h.default.cssPrefix+"UserSelect"]=this._selectable?"text":"none",this.updateSize())}},{key:"text",get:function(){return this.element?this.isInput?this.element.value:this.element.innerHTML:""},set:function(t){null==this.element||this.isInput&&this.element.value==t||!this.isInput&&this.element.innerHTML==t||(this.isInput?this.element.value=t:this.element.innerHTML=t,this.updateSize())}},{key:"writingMode",get:function(){return this._writingMode},set:function(t){null!=this.element&&this._writingMode!=t&&(this._writingMode=t,this.element.style.writingMode=this._writingMode?"tb-rl":"lr-tb",this.element.style[h.default.cssPrefix+"WritingMode"]=this._writingMode?"tb-rl":"lr-tb",this.updateSize())}},{key:"italic",get:function(){return this._italic},set:function(t){null!=this.element&&this._italic!=t&&(this._italic=t,this.element.style.fontStyle=this._italic?"italic":"normal",this.updateSize())}},{key:"bold",get:function(){return this._bold},set:function(t){null!=this.element&&this._bold!=t&&(this._bold=t,this.element.style.fontWeight=this._bold?"bold":"normal",this.updateSize())}},{key:"size",get:function(){return this._size},set:function(t){null!=this.element&&(this._size=t,this.element.style.fontSize=this._size+"px",this.updateSize())}},{key:"color",get:function(){return this._color},set:function(t){t=o.default.formatColor(t),null!=this.element&&this._color!=t&&(this._color=t,this.element.style.color=this._color)}},{key:"font",get:function(){return this._font},set:function(t){null!=this.element&&this.element.style.fontFamily!=t&&(this._font=t,this.element.style.fontFamily=this._font,this.updateSize())}},{key:"align",get:function(){return this._textAlign},set:function(t){null!=this.element&&this._textAlign!=t&&(this._textAlign=t,this.element.style.textAlign=this._textAlign,this.updateSize())}},{key:"underline",get:function(){return this._underline},set:function(t){null!=this.element&&this._underline!=t&&(this._underline=t,this.element.style.textDecoration=this._underline?"underline":"none",this.updateSize())}},{key:"verticalAlign",get:function(){return this._verticalAlign},set:function(t){null!=this.element&&this._verticalAlign!=t&&(this._verticalAlign=t,this.element.style.verticalAlign=this._verticalAlign,this.updateSize())}},{key:"maxChars",get:function(){return this._maxChars},set:function(t){null!=this.element&&this._maxChars!=t&&(this._maxChars=t,this.element.maxLength=this._maxChars)}},{key:"leading",get:function(){return this._leading},set:function(t){null!=this.element&&(this._leading=t,this.element.style.letterSpacing=this._leading+"px",this.updateSize())}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){null==this.element||t<=0||(this._lineHeight=t,this.element.style.lineHeight=this._lineHeight,this.updateSize())}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(t){this._lineWidth!=t&&(this._lineWidth=t,this.updateSize())}},{key:"bgColor",get:function(){return this.element?this.element.style.backgroundColor:""},set:function(t){this.element.style.backgroundColor=t}}])&&s(d.prototype,_),f&&s(d,f),v);function v(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,s=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function(t){if(!(t instanceof v))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));return n.isInput=Boolean(t),n.tabindex=i,n.password=s,n.multiline=e,n._size=8,n._leading=0,n._lineHeight=1,n._maxChars=0,n._font="Microsoft YaHei,Arial",n._color="#000000",n._textAlign="left",n._verticalAlign="top",n._selectable=!0,n.element=n._init(),n._lineWidth=n.width=n.height=0,n._enable=!0,n.autoSize=!0,n._writingMode=!1,n._underline=n._bold=n._italic=!1,n.selectable=n.mouseEnabled=n.isInput,n}(e.default=p).CHANGE="updateText",p.FOCUS_OUT="focusOut",p.FOCUS_IN="focusIn",p.className="InputText"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=y(i(5)),a=y(i(16)),o=y(i(12)),l=y(i(0)),h=y(i(2)),u=y(i(15)),c=y(i(3)),d=y(i(27)),_=y(i(7)),f=y(i(32)),p=y(i(1)),v=y(i(4));function y(t){return t&&t.__esModule?t:{default:t}}var g,m,b,O=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(w,n.default),g=w,(m=[{key:"setup",value:function(t,e,i,s,n,a,r){var o=3<arguments.length&&void 0!==s?s:0,l=4<arguments.length&&void 0!==n?n:0,h=5<arguments.length&&void 0!==a?a:"#000000",u=6<arguments.length&&void 0!==r?r:1;this._redius=o,this.thickness=l,this._stroke=this._format_color(h),this._fill_alpha=u,null==this.instance?(this.instance=_.default.c("do",null,this.use_canvas),this.instance.hide_over=!1,this.instance.setSize(e,i),this.addChild(this.instance)):this.instance.moveTo(0,0),this.width=e,this.height=i,this.resize=!0,this._color=this._format_color(t)||"#FFFFFF"}},{key:"_format_color",value:function(t){if(!(t&&t instanceof f.default))return t;if(this.use_canvas)return u.default.getGradientColor(t);if(null==this.instance||null==this.instance.element)return t;var e=this.instance.element.getElementsByTagName("defs")[0];null==e&&(e=d.default.create("defs"),this.instance.element.appendChild(e));var i=this.instance.element.getElementById(this.name+"_gradient");i&&i.parentNode&&i.parentNode.removeChild(i);var s={id:this.name+"_gradient"};0==t.type?(s.x1=c.default.int(100*t.xStart/t.radiusStart)+"%",s.y1=c.default.int(100*t.yStart/t.radiusEnd)+"%",s.x2=c.default.int(100*t.xEnd/t.radiusStart)+"%",s.y2=c.default.int(100*t.yEnd/t.radiusEnd)+"%"):(s.fx=c.default.int(100*t.xStart/(2*t.radiusEnd))+"%",s.fy=c.default.int(100*t.yStart/(2*t.radiusEnd))+"%",s.cx=c.default.int(100*t.xEnd/(2*t.radiusEnd))+"%",s.cy=c.default.int(100*t.yEnd/(2*t.radiusEnd))+"%",s.r=c.default.int(2*t.radiusStart*100/t.radiusEnd)+"%"),i=d.default.create(0==t.type?"linearGradient":"radialGradient",s);for(var n,a=void 0,r=t.offsetlist.length,a=0;a<r;a++)n=d.default.create("stop",{offset:t.offsetlist[a],"stop-color":t.colorList[a]}),i.appendChild(n);return e.appendChild(i),"url(#"+this.name+"_gradient)"}},{key:"redraw",value:function(){var t=this.syncSize?this.getWidth():this.width,e=this.syncSize?this.getHeight():this.height;this.instance.width=c.default.int(t),this.instance.height=c.default.int(e),this.syncSize&&(this.instance.scaleX=1/this.scaleX,this.instance.scaleY=1/this.scaleY);var i,s=this.thickness*(this.syncSize?.5*(this.scaleX+this.scaleY):1);if(this.instance.moveTo(.5*-s,.5*-s),this.use_canvas&&this.instance.graphics)return 0<s?this.instance.graphics.lineStyle(s,this._stroke):this.instance.graphics.stroke_style=null,this._pattern?(i=this.instance.graphics).beginBitmapFill.apply(i,function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(this._pattern)):this.instance.graphics.beginFill(this._color,this._fill_alpha),0<this._redius?this.instance.graphics.drawRoundRect(.5*s,.5*s,t,e,this._redius):this.instance.graphics.drawRect(.5*s,.5*s,t,e),void this.instance.graphics.endFill();if(d.default.supported){var n=void 0;if(null==this.instance.element)return this.instance.element=d.default.create("svg",{style:{width:t+"px",height:e+"px"}}),n=d.default.create("rect",{"stroke-dasharray":l.default.isEmpty(this._dash)?"":this._dash,x:0,y:0,rx:this._redius,ry:this._redius,width:t,height:e,style:{fill:this._format_color(this._color),fillOpacity:this._fill_alpha,stroke:this._stroke,strokeWidth:s}}),void this.instance.element.appendChild(n);(n=this.instance.element.getElementsByTagName("rect")[0]).style.stroke=this._stroke,n.style.strokeWidth=s,n.style.fillOpacity=this._fill_alpha,n.style.fill=this._pattern?"url(#"+this._pattern.id+")":this._format_color(this._color),n.setAttribute("stroke-dasharray",l.default.isEmpty(this._dash)?"":this._dash),n.setAttribute("height",e+s),n.setAttribute("width",t+s),n.setAttribute("ry",this._redius),n.setAttribute("rx",this._redius),this._parent&&this._parent.autoSize&&this._parent._updateSize()}else null==this.instance.element?this.instance.element=DOMUtil.createDOM("div",{style:{backgroundColor:this._color,width:t+"px",height:e+"px"}}):(this.instance.element.style.backgroundColor=this._color,this.instance.element.style.backgroundImage=this._pattern?"url("+this._pattern.src+")":"",this.instance.element.style.backgroundRepeat=this.repeat)}},{key:"clone",value:function(){var t,e=h.default.create(w);return e.param=this.param,this.origin&&(e.origin=this.origin.clone()),e.setup(this._color,this.width,this.height,this._redius,this.thickness,this._stroke,this._fill_alpha),e.syncSize=this.syncSize,e._dash=this._dash,this._pattern&&!l.default.isEmpty(this._pattern_src)&&((t=new Image).onload=function(){this.onload=null,e.pattern=t},t.src=this._pattern_src),e}},{key:"render",value:function(){!this.syncSize||1==this.scaleX&&1==this.scaleY||this.instance.width==this.getWidth()&&this.instance.height==this.getHeight()||(this.resize=!0),this.resize&&this.redraw(),r(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"render",this).apply(this,arguments),this.resize=!1}},{key:"reset",value:function(){this.instance&&(this.instance.removeFromParent(!0),this.instance=null),this._pattern_src=this._stroke=this.pattern=this._color=null,r(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"reset",this).call(this),this._dash=null,this._redius=0,this._thickness=0,this._fill_alpha=1,this.autoSize=!0,this.syncSize=!1,this.mouseChildren=!1,this.repeat="repeat",this.use_canvas=p.default.useCanvas}},{key:"dispose",value:function(){r(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"dispose",this).call(this),delete this.use_canvas,this.syncSize,this._dash,this._pattern_src,this._fill_alpha,this._thickness,this._stroke,this._color,this._redius,this._pattern,this.repeat}},{key:"toString",value:function(){return w.name}},{key:"resize",set:function(t){t&&this._resize!=t&&(this.instance&&this.instance instanceof a.default&&this.instance.graphics.reset(),this.dispatchEvent(new v.default(o.default.RESIZE)),this.__checkDisplayUpdate()),this._resize=t},get:function(){return this._resize}},{key:"pattern",get:function(){return this._pattern},set:function(t){var e,i,s;this._pattern&&this._pattern.parentNode&&this._pattern.parentNode.removeChild(this._pattern),this.resize=!0,this.__checkDisplayUpdate(),(this._pattern_src=this._pattern=null)!=t&&t instanceof Image&&(this._pattern_src=t.src,e=d.default.supported,0==this._fill_alpha&&(this._fill_alpha=1),this._pattern=t?this.use_canvas?[t,this.repeat,this._fill_alpha]:e?d.default.create("pattern",{id:this.name+"_pattern",width:t.width,height:t.height,patternUnits:"userSpaceOnUse"}):t:t,null==this.instance.element&&this.redraw(),t&&!this.use_canvas&&e&&this.instance.element&&((i=d.default.create("image",{x:0,y:0,width:t.width,height:t.height})).setAttributeNS(d.default.xlink,"href",t.src),this._pattern.appendChild(i),null==(s=this.instance.element.getElementsByTagName("defs")[0])&&(s=d.default.create("defs"),this.instance.element.appendChild(s)),s.appendChild(this._pattern)))}},{key:"redius",get:function(){return this._redius},set:function(t){null!=t&&(t=Math.min(t,Math.ceil(.5*Math.min(this.width,this.height))))!=this._redius&&(this._redius=t,this.resize=!0)}},{key:"dash",get:function(){return this._dash},set:function(t){t!=this._dash&&(this._dash=t,this.resize=!0)}},{key:"color",get:function(){return this._color},set:function(t){this.pattern=null,"string"==typeof t&&l.default.isEmpty(t)?this._fill_alpha=0:0==this._fill_alpha&&(this._fill_alpha=1),null!=t&&this._color!=t&&(this._color=this._format_color(t))}},{key:"strokeColor",get:function(){return this._stroke},set:function(t){null!=t&&t!=this._stroke&&(l.default.isEmpty(t)?this.thickness=0:0==this.thickness&&(this.thickness=1),this._stroke=this._format_color(t),this.resize=!0)}},{key:"thickness",get:function(){return this._thickness},set:function(t){null==t||t==this._thickness||isNaN(t)||(this._thickness=t,this.resize=!0)}}])&&s(g.prototype,m),b&&s(g,b),w);function w(){!function(t){if(!(t instanceof w))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return t._redius=0,t._thickness=0,t._fill_alpha=1,t.autoSize=!0,t.syncSize=!1,t.instance=t._stroke=t._pattern=t._pattern_src=t._color=null,t.use_canvas=p.default.useCanvas,t.mouseChildren=!1,t.repeat="repeat",t._dash=null,t}(e.default=O).className="BoxShape"},function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var n=(s(a,[{key:"easeNone",value:function(t,e,i,s){return i*t/s+e}},{key:"easeInQuad",value:function(t,e,i,s){return i*(t/=s)*t+e}},{key:"easeOutQuad",value:function(t,e,i,s){return-i*(t/=s)*(t-2)+e}},{key:"easeInOutQuad",value:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},{key:"easeOutInQuad",value:function(t,e,i,s,n){return t<s/2?a.easeOutQuad(2*t,e,i/2,s,n):a.easeInQuad(2*t-s,e+i/2,i/2,s,n)}},{key:"easeInCubic",value:function(t,e,i,s){return i*(t/=s)*t*t+e}},{key:"easeOutCubic",value:function(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e}},{key:"easeInOutCubic",value:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}},{key:"easeOutInCubic",value:function(t,e,i,s,n){return t<s/2?a.easeOutCubic(2*t,e,i/2,s,n):a.easeInCubic(2*t-s,e+i/2,i/2,s,n)}},{key:"easeInQuart",value:function(t,e,i,s){return i*(t/=s)*t*t*t+e}},{key:"easeOutQuart",value:function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e}},{key:"easeInOutQuart",value:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}},{key:"easeOutInQuart",value:function(t,e,i,s,n){return t<s/2?a.easeOutQuart(2*t,e,i/2,s,n):a.easeInQuart(2*t-s,e+i/2,i/2,s,n)}},{key:"easeInQuint",value:function(t,e,i,s){return i*(t/=s)*t*t*t*t+e}},{key:"easeOutQuint",value:function(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e}},{key:"easeInOutQuint",value:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}},{key:"easeOutInQuint",value:function(t,e,i,s,n){return t<s/2?a.easeOutQuint(2*t,e,i/2,s,n):a.easeInQuint(2*t-s,e+i/2,i/2,s,n)}},{key:"easeInSine",value:function(t,e,i,s){return-i*Math.cos(t/s*(Math.PI/2))+i+e}},{key:"easeOutSine",value:function(t,e,i,s){return i*Math.sin(t/s*(Math.PI/2))+e}},{key:"easeInOutSine",value:function(t,e,i,s){return-i/2*(Math.cos(Math.PI*t/s)-1)+e}},{key:"easeOutInSine",value:function(t,e,i,s,n){return t<s/2?a.easeOutSine(2*t,e,i/2,s,n):a.easeInSine(2*t-s,e+i/2,i/2,s,n)}},{key:"easeInExpo",value:function(t,e,i,s){return 0==t?e:i*Math.pow(2,10*(t/s-1))+e-.001*i}},{key:"easeOutExpo",value:function(t,e,i,s){return t==s?e+i:1.001*i*(1-Math.pow(2,-10*t/s))+e}},{key:"easeInOutExpo",value:function(t,e,i,s){return 0==t?e:t==s?e+i:(t/=s/2)<1?i/2*Math.pow(2,10*(t-1))+e-5e-4*i:i/2*1.0005*(2-Math.pow(2,-10*--t))+e}},{key:"easeOutInExpo",value:function(t,e,i,s,n){return t<s/2?a.easeOutExpo(2*t,e,i/2,s,n):a.easeInExpo(2*t-s,e+i/2,i/2,s,n)}},{key:"easeInCirc",value:function(t,e,i,s){return-i*(Math.sqrt(1-(t/=s)*t)-1)+e}},{key:"easeOutCirc",value:function(t,e,i,s){return i*Math.sqrt(1-(t=t/s-1)*t)+e}},{key:"easeInOutCirc",value:function(t,e,i,s){return(t/=s/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},{key:"easeOutInCirc",value:function(t,e,i,s,n){return t<s/2?a.easeOutCirc(2*t,e,i/2,s,n):a.easeInCirc(2*t-s,e+i/2,i/2,s,n)}},{key:"easeInElastic",value:function(t,e,i,s,n){if(0==t)return e;if(1==(t/=s))return e+i;var a=!Boolean(n)||isNaN(n.period)?.3*s:n.period,r=!Boolean(n)||isNaN(n.amplitude)?0:n.amplitude,o=!Boolean(r)||r<Math.abs(i)?(r=i,a/4):a/(2*Math.PI)*Math.asin(i/r);return-(r*Math.pow(2,10*--t)*Math.sin((t*s-o)*(2*Math.PI)/a))+e}},{key:"easeOutElastic",value:function(t,e,i,s,n){if(0==t)return e;if(1==(t/=s))return e+i;var a=!Boolean(n)||isNaN(n.period)?.3*s:n.period,r=!Boolean(n)||isNaN(n.amplitude)?0:n.amplitude,o=!Boolean(r)||r<Math.abs(i)?(r=i,a/4):a/(2*Math.PI)*Math.asin(i/r);return r*Math.pow(2,-10*t)*Math.sin((t*s-o)*(2*Math.PI)/a)+i+e}},{key:"easeInOutElastic",value:function(t,e,i,s,n){if(0==t)return e;if(2==(t/=s/2))return e+i;var a=!Boolean(n)||isNaN(n.period)?s*(.3*1.5):n.period,r=!Boolean(n)||isNaN(n.amplitude)?0:n.amplitude,o=!Boolean(r)||r<Math.abs(i)?(r=i,a/4):a/(2*Math.PI)*Math.asin(i/r);return t<1?r*Math.pow(2,10*--t)*Math.sin((t*s-o)*(2*Math.PI)/a)*-.5+e:r*Math.pow(2,-10*--t)*Math.sin((t*s-o)*(2*Math.PI)/a)*.5+i+e}},{key:"easeOutInElastic",value:function(t,e,i,s,n){return t<s/2?a.easeOutElastic(2*t,e,i/2,s,n):a.easeInElastic(2*t-s,e+i/2,i/2,s,n)}},{key:"easeInBack",value:function(t,e,i,s,n){var a=!Boolean(n)||isNaN(n.overshoot)?1.70158:n.overshoot;return i*(t/=s)*t*((a+1)*t-a)+e}},{key:"easeOutBack",value:function(t,e,i,s,n){var a=!Boolean(n)||isNaN(n.overshoot)?1.70158:n.overshoot;return i*((t=t/s-1)*t*((a+1)*t+a)+1)+e}},{key:"easeInOutBack",value:function(t,e,i,s,n){var a=!Boolean(n)||isNaN(n.overshoot)?1.70158:n.overshoot;return(t/=s/2)<1?i/2*(t*t*((1+(a*=1.525))*t-a))+e:i/2*((t-=2)*t*((1+(a*=1.525))*t+a)+2)+e}},{key:"easeOutInBack",value:function(t,e,i,s,n){return t<s/2?a.easeOutBack(2*t,e,i/2,s,n):a.easeInBack(2*t-s,e+i/2,i/2,s,n)}},{key:"easeInBounce",value:function(t,e,i,s){return i-a.easeOutBounce(s-t,0,i,s)+e}},{key:"easeOutBounce",value:function(t,e,i,s){return(t/=s)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}},{key:"easeInOutBounce",value:function(t,e,i,s){return t<s/2?.5*a.easeInBounce(2*t,0,i,s)+e:.5*a.easeOutBounce(2*t-s,0,i,s)+.5*i+e}},{key:"easeOutInBounce",value:function(t,e,i,s,n){return t<s/2?a.easeOutBounce(2*t,e,i/2,s,n):a.easeInBounce(2*t-s,e+i/2,i/2,s,n)}},{key:"easeInStrong",value:function(t,e,i,s){return i*(t/=s)*t*t*t*t+e}},{key:"easeOutStrong",value:function(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e}},{key:"easeInOutStrong",value:function(t,e,i,s){return(t/=.5*s)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e}}]),a);function a(){!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this)}(e.default=n).className="Easing"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=o(i(19)),a=o(i(1)),r=o(i(4));function o(t){return t&&t.__esModule?t:{default:t}}var l,h,u,c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,n.default),l=d,u=[{key:"delayCall",value:function(t,e,i,s,n){var a=2<arguments.length&&void 0!==i?i:[],r=3<arguments.length&&void 0!==s?s:null,o=4<arguments.length&&void 0!==n?n:null;if(!(t<=0||null==e))return o&&clearTimeout(o),setTimeout(function(){e.apply(r,a)},1e3*t)}}],(h=[{key:"setFrameRate",value:function(t){this._frame_rate=t,this._is_start&&this.start()}},{key:"getFrameRate",value:function(){return this._frame_rate}},{key:"isStart",value:function(){return this._is_start}},{key:"_onTimeHandler",value:function(){this.dispatchEvent(new r.default(d.TIME))}},{key:"start",value:function(){this._frame_rate<=0||(null!=this._interval_id&&clearInterval(this._interval_id),this._interval_id=setInterval(this.__handler,this._frame_rate),this._start_time=(new Date).getTime(),this._is_start=!0)}},{key:"stop",value:function(){null!=this._interval_id&&clearInterval(this._interval_id),this._interval_id=null,this._is_start=!1,this._start_time=0}},{key:"dispose",value:function(){(function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0})(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"dispose",this).call(this),this.stop(),delete this._start_time,this._interval_id,this._frame_rate,this._is_start}},{key:"toString",value:function(){return d.name}}])&&s(l.prototype,h),u&&s(l,u),d);function d(t){!function(t){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return e._start_time=0,e._is_start=!1,e._interval_id=null,e._frame_rate=t||Math.ceil(1e3/d.fps),e.__handler=a.default.delegate(e._onTimeHandler,e),e}(e.default=c).className="Timer",c.TIME="timer_count",c.fps=60},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var u=r(i(0)),n=r(i(9)),a=r(i(44)),o=r(i(3)),l=r(i(7));function r(t){return t&&t.__esModule?t:{default:t}}var h,c,d,_=(h=f,d=[{key:"addSources",value:function(t){if(!(null==t||t.length<1)){for(var e,i=void 0,s=[],i=0,n=t.length;i<n;i++)0!=(e=t[i]).width?(f._dic.hasOwnProperty(e.animation)||(f._dic[e.animation]=u.default.isEmpty(e.label)?[]:{},f._cache[e.animation]=[]),u.default.isEmpty(e.label)||f._dic[e.animation].hasOwnProperty(e.label)||(f._dic[e.animation][e.label]=[],f._cache[e.animation].push(e.label)),(u.default.isEmpty(e.label)?f._dic[e.animation]:f._dic[e.animation][e.label]).push(e)):s.push(e);0<s.length&&a.default.addSources(s)}}},{key:"getInstance",value:function(t,e,i,s,n){var a=l.default.c("mc",null,i),r=f.getData(t,e);return null==s&&null==n||(s=null==s?r.length:Math.min(r.length,Math.abs(s)),n=null==n?0:o.default.clamp(n,0,s),r=r.slice(n,s)),a.setFrames(r),a}},{key:"getData",value:function(t,e){if(e=e||"",!u.default.isEmpty(t)&&!u.default.isEmpty(e)&&f._dic.hasOwnProperty(e))return f._dic[e][t];e=u.default.isEmpty(e)?"":e;var i=f._dic[e];if(null==i||i instanceof Array)return i;t=u.default.isEmpty(t)?n.default.getLabels(i)[0]:t;var s=f._dic[e][t];return null==s||null==s?null:s}},{key:"findData",value:function(t,e){if(u.default.isEmpty(t)&&u.default.isEmpty(e))return null;var i=f.getData(t,e);if(i)return i;var s=u.default.getNumber(t);if(!s||s.length<1)return null;if(!(i=f.getData(s[0],e)))return null;var n=!0,a=!1,r=void 0;try{for(var o,l=i[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var h=o.value;if(h.name==t)return h}}catch(t){a=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}return null}},{key:"removeData",value:function(t,e){if(e=e||"",u.default.isEmpty(t)||u.default.isEmpty(e)){if(e=u.default.isEmpty(e)?n.default.getLabels(f._cache)[0]:e,null!=f._dic[e])return u.default.isEmpty(t)?(delete f._dic[e],void delete f._cache[e]):void delete f._dic[e][t]}else delete f._dic[e][t]}},{key:"clear",value:function(){f._dic={},f._cache={}}}],(c=null)&&s(h.prototype,c),d&&s(h,d),f);function f(){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this)}(e.default=_)._dic={},_._cache={},_.className="MovieManager"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var v=n(i(17)),y=n(i(2)),g=n(i(64)),m=n(i(34)),b=n(i(44));function n(t){return t&&t.__esModule?t:{default:t}}var a,r,o,l=(a=O,o=[{key:"parseSheet",value:function(t,e,i){return i?O._xml2sheet(t,e):O._json2sheet(t,e.content)}},{key:"_xml2sheet",value:function(t,e){if(null!=t&&null!=e){for(var i,s,n=[],a=e.documentElement.childNodes,r=void 0,o=void 0,l=void 0,h=void 0,l=0,u=a.length;l<u;l++)if(!(null==(i=a[l].attributes)||i.length<=0)){for(o={},h=0;h<i.length;h++)o[(s=i[h]).nodeName]=s.value;(r=y.default.create(v.default)).setup(t,o),n.push(r)}return n}}},{key:"_json2sheet",value:function(t,e){if(null!=t&&null!=e){var i,s=void 0,n=void 0,a=void 0,r=void 0,o=void 0,l=[];for(n in e)if("meta"!=n)for(s in i=e[n])(a=i[s]).name=s,(r=y.default.create(v.default)).setup(t,a,!0),0==r.width&&0==r.height&&!StringUtil.isEmpty(r.label)&&o&&r.label==o.label&&(r.height=r.rect.height,r.width=r.rect.width,0==o.width&&0==o.height&&(o.height=o.rect.height,o.width=o.rect.width)),l.push(r),o=r;return l}}},{key:"parseFont",value:function(t){if(null==t)return null;var e=new g.default,i=m.default.parseXML(t,"text/xml"),s=i.getElementsByTagName("info")[0],n=i.getElementsByTagName("common")[0],a=i.getElementsByTagName("pages");if(a.length<=0)return i.body&&trace("[ERROR] AssetUtil.parseFont() "+i.body.innerText),null;var r=a[0].childNodes,o=i.getElementsByTagName("chars")[0].childNodes;O.copyAttributes(e.info,s),O.copyAttributes(e.common,n);var l,h,u,c=void 0,d=void 0,_=void 0,f=void 0,p=r.length;for(e.info.size=Math.abs(e.info.size),e.name=e.info.face,e.chars={},e.pages=[],e.images=[],_=0;_<p;_++)"page"==(d=r[_]).nodeName&&(h=Number(d.getAttribute("id")),l=d.getAttribute("file"),StringUtil.isEmpty(l)||(e.pages[h]=l,l=Loader.getName(l),!StringUtil.isEmpty(l)&&b.default._cache.hasOwnProperty(l)?(e.images[h]=b.default._cache[l],delete b.default._cache[l]):trace("[ERROR] AssetUtil.parseFont can't find asset of "+l)));for(_=0,p=o.length;_<p;_++)"char"==(d=o[_]).nodeName&&((f=O.copyAttributes({},d)).name=e.name+"|"+f.xadvance+" "+f.id,f.frameX=-f.xoffset,f.frameY=-f.yoffset,null!=(u=e.images[f.page])&&((c=y.default.create(v.default)).setup(u,f),c.label=Number(c.label),e.chars[c.index]=c));return e}},{key:"copyAttributes",value:function(t,e){for(var i,s,n=void 0,a=e.attributes,n=0,r=a.length;n<r;n++)s=(i=a[n]).value,t[i.name]=isNaN(s)?s:Number(s);return t}},{key:"asset2diplay",value:function(t){for(var e,i=void 0,s=void 0,n=[],i=0,a=t.length;i<a;i++)e=t[i],(s=Factory.c("do")).setInstance(e),n.push(s);return n}}],(r=null)&&s(a.prototype,r),o&&s(a,o),O);function O(){!function(t){if(!(t instanceof O))throw new TypeError("Cannot call a class as a function")}(this)}e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=r(i(9)),a=r(i(2));function r(t){return t&&t.__esModule?t:{default:t}}var o,l,h,u=(o=c,(l=[{key:"dispose",value:function(){if(this.chars&&0<this.chars.length)for(var t=void 0,t=0,e=this.chars.length;t<e;t++)a.default.remove(this.chars[t]);delete this.name,this.info,this.common,this.chars,this.pages,this.images}},{key:"data",set:function(t){null!=t&&null!=t&&n.default.copyAttribute(this,t,!0)}}])&&s(o.prototype,l),h&&s(o,h),c);function c(){!function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),this.name,this.info={},this.common={},this.chars,this.pages,this.images}(e.default=u).className="BitmapFont"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n,a,r,o=i(26),l=o&&o.__esModule?o:{default:o},h=(n=u,(a=[{key:"add",value:function(t){!t||0<=this.cache_list.indexOf(t)||(t.setVolume(this.global_volume),this.cache_list.push(t))}},{key:"remove",value:function(t){!t||this.cache_list.indexOf(t)<0||this.cache_list.splice(this.cache_list.indexOf(t),1)}},{key:"stopOther",value:function(e){!e||this.cache_list.length<2||l.default.each(this.cache_list,function(t){t!=e&&t.playing&&t.stop()},this)}},{key:"stopAll",value:function(){this.cache_list.length<1||l.default.each(this.cache_list,function(t){t.playing&&t.stop()},this)}},{key:"setVolume",value:function(t){this.global_volume=t,l.default.each(this.cache_list,function(t){t.setVolume(this.global_volume)},this)}},{key:"dispose",value:function(){this.stopAll(),this.cache_list=this.global_volume=null,delete this.cache_list,this.global_volume}}])&&s(n.prototype,a),r&&s(n,r),u);function u(){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.cache_list=[],this.global_volume=1}(e.default=h).className="MediaManager"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(24),n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,(s&&s.__esModule?s:{default:s}).default),a);function a(){!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return t._type="audio",t}(e.default=n).className="Sound"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=u(i(24)),a=u(i(45)),r=u(i(1)),o=u(i(4)),l=u(i(11)),h=u(i(0));function u(t){return t&&t.__esModule?t:{default:t}}var c,d,_,f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,u(i(19)).default),c=p,(d=[{key:"init",value:function(){if(this.is_init)return!1;this.is_init=!0;try{this.element=new r.default.canUseWebAudio}catch(t){return!(r.default.canUseWebAudio=null)}return this.name=l.default.getName(this._type),this.element.id=this.name,this._ajax=new a.default,this._ajax.responseType=a.default.ARRAY_BUFFER,this._audio_tag=document.createElement("audio"),n.default.Container.add(this),this.__over_handler=r.default.delegate(this._over_handler,this),!1}},{key:"_over_handler",value:function(){this.close(),this.dispatchEvent(new o.default(n.default.MEDIA_PLAY_COMPLETE))}},{key:"load",value:function(t){if(!t)return!1;if(!this.is_init&&this.init())return!1;if("string"!=typeof t)return"[object AudioBuffer]"==Object.prototype.toString.apply(t)?this.onload(t):"[object ArrayBuffer]"==Object.prototype.toString.apply(t)&&(this.loading=!0,this.element.decodeAudioData(t,r.default.delegate(this.onload,this),r.default.delegate(function(t){this.loadFail=!0,this.loading=!1,trace("[ERROR] WebAudio:AudioContext decodeAudioData error : "+t.toString()),this.dispatchEvent(new o.default(n.default.MEDIA_ERROR))},this))),!1;var e=void 0,s=this,i={mov:["quicktime"],"3gp":["3gpp"],midi:["midi"],mid:["midi"],ogv:["ogg"],m4a:["acc"],mp3:["mpeg"],wav:["wav","x-wav","wave"],wave:["wav","x-wav","wave"],aac:["mp4","aac"]};return(e=i[e=h.default.getPathExt(t)]?i[e]:[e]).some(function(t,e,i){return s._audio_tag.canPlayType("audio/"+t)})||!h.default.isEmpty(t)&&0==t.indexOf("blob:")?(this.loading=!0,this._ajax.get(t).then(function(t){this.onload(t)}.bind(this)).catch(function(t){this.loadFail=!0,this.loading=!1,trace("[ERROR] WebAudio: load audio fail."),this.dispatchEvent(new o.default(n.default.MEDIA_ERROR))}.bind(this)),!0):(this.loadFail=!0,trace("Not support "+e+" : "+t),this.dispatchEvent(new o.default(n.default.MEDIA_ERROR)),!1)}},{key:"onload",value:function(t){"[object AudioBuffer]"===Object.prototype.toString.apply(t)?(this.buffer=t,this.loaded=!0,this.loading=this.loadFail=!1,this.length=this.buffer.duration,this.dispatchEvent(new o.default(n.default.MEDIA_LOAD_COMPLETE)),this.removeEventListener(n.default.MEDIA_LOAD_COMPLETE),this.auto_play&&this.play()):this.load(t)}},{key:"setCurrentTime",value:function(t){if(this.element&&null!=t&&0<=t&&t<this.length){try{this.element.currentTime=t}catch(t){}this.currentTime=t}}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setVolume",value:function(t){this.volume=t,this.playing&&this.volumeNode&&this.volumeNode.gain.setValueAtTime(t,this.currentTime)}},{key:"getVolume",value:function(){return this.volume}},{key:"play",value:function(t){0==this.length||this.playing||(t&&(this.currentTime=0),this.element.loop=!1,this.playing=!0,this.bufferSource=this.element.createBufferSource(),this.bufferSource.buffer=this.buffer,this.volumeNode=this.element.createGain(),this.volumeNode.gain.setValueAtTime(this.volume,this.currentTime),this.volumeNode.connect(this.element.destination),this.bufferSource.connect(this.volumeNode),this.currentSave=this.element.currentTime,this.bufferSource.addEventListener("ended",this.__over_handler,!1),this.bufferSource.start?this.bufferSource.start(0,this.currentTime%this.length):this.bufferSource.noteGrainOn(0,this.currentTime%this.length))}},{key:"stop",value:function(){if(this.playing){try{this.bufferSource.stop?this.bufferSource.stop(0):this.bufferSource.noteOff(0)}catch(t){}this.currentTime+=this.element.currentTime-this.currentSave,this.playing=!1,this.bufferSource.removeEventListener("ended",this.__over_handler)}}},{key:"close",value:function(){this.playing&&this.stop(),this.currentTime=this.currentSave=0}},{key:"dispose",value:function(){this.close(),function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0}(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"dispose",this).call(this),this.element=null,n.default.Container.remove(this),delete this.element,this._type,this.loadFail,this.auto_play,this.is_init,this.loading,this.loaded,this.playing,this.length,this.__over_handler,this.__change_handler,this.volume,this.timeout,this.volumeNode,this.currentSave,this.currentTime,this._ajax,this._audio_tag}}])&&s(c.prototype,d),_&&s(c,_),p);function p(){!function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return t.__over_handler=t.__change_handler=t.bufferSource=t.buffer=t.volumeNode=t._ajax=t._audio_tag=t.element=null,t.loadFail=t.auto_play=t.is_init=t.loading=t.loaded=t.playing=!1,t.currentSave=t.currentTime=0,t._type="web_audio",t.length=0,t.volume=1,t}(e.default=f).className="WebAudio"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=l(i(14)),a=l(i(27)),o=l(i(20));function l(t){return t&&t.__esModule?t:{default:t}}var h,u,c,d=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(_,n.default),h=_,(u=[{key:"init",value:function(){return this.element||(this.element=a.default.create("svg"),this._defs=a.default.create("defs"),this.element.appendChild(this._defs)),this}},{key:"addClipPath",value:function(t){this.getClipPath(t)||this._defs.appendChild(a.default.create("clipPath",{id:t.id+o.default.CILP,innerHTML:o.default.string(t)}))}},{key:"removeClipPath",value:function(t){var e=this.getClipPath(t);e&&this._defs.removeChild(e)}},{key:"getClipPath",value:function(t){if(!t)return null;var e=t.id+o.default.CILP;return a.default.getElementsById(this._defs,"clipPath",e)}},{key:"reset",value:function(){this._defs=null,r(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"reset",this).call(this)}},{key:"dispose",value:function(){r(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"dispose",this).call(this),delete this._defs}},{key:"defs",get:function(){return this._defs}}])&&s(h.prototype,u),c&&s(h,c),_);function _(){!function(t){if(!(t instanceof _))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(_.__proto__||Object.getPrototypeOf(_)).call(this));return t._defs=null,t}(e.default=d).className="DefsNode"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n,a,o,l=i(35),h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,(l&&l.__esModule?l:{default:l}).default),n=u,(a=[{key:"initialize",value:function(){}},{key:"reset",value:function(){this._register_instance=null,this._auto_dispose=!0,r(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"reset",this).call(this)}},{key:"dispose",value:function(){r(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"dispose",this).call(this),delete this._register_instance,this._auto_dispose}},{key:"toString",value:function(){return u.name}},{key:"instance",get:function(){return this._register_instance},set:function(t){var e=null;null!=this._register_instance&&(this._register_instance.parent&&(e=this._register_instance.getIndex(),e=Math.max(0,e),this._register_instance.removeFromParent(this._auto_dispose)),this._register_instance=null),null!=t&&(this._register_instance=t,null==e||isNaN(""+e)?this.addChild(this._register_instance):this.addChildAt(this._register_instance,e),this.initialize())}}])&&s(n.prototype,a),o&&s(n,o),u);function u(){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return t._auto_dispose=!0,t._register_instance=null,t}(e.default=h).className="UIBase"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=a(i(19)),c=a(i(9)),d=a(i(0)),_=a(i(67)),f=a(i(34)),p=a(i(4)),v=a(i(24)),y=a(i(1)),g=a(i(46)),m=a(i(66));function a(t){return t&&t.__esModule?t:{default:t}}var r,o,l,h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(b,n.default),r=b,l=[{key:"getName",value:function(t){if(d.default.isEmpty(t))return null;var e=void 0,i=!1;try{e=d.default.getFileName(t,1).split("/")}catch(e){i=!0,trace("[WARN] Loader.getName by",t)}if(null==e||i)return d.default.getFileName(t)+"@"+d.default.getPathExt(t);for(var s=e.pop();d.default.isEmpty(s)&&0<e.length;)s=e.pop();return s+"_"+d.default.getFileName(t)+"@"+d.default.getPathExt(t)}}],(o=[{key:"parse",value:function(t,e,i){if(null!=t)return t instanceof Array?(this._list=t,void(this._total=this._list.length)):void(e&&"string"==typeof t?this.load(t)&&(this._feedback="string"==typeof e?e:{c:e,t:i}):this._data=t)}},{key:"errorHandler",value:function(t){if(t&&t.target&&(t.target instanceof Image?(delete this._files[this._current_name],t.target.onerror=null,t.target.onload=null):t.target instanceof f.default?(t.target.removeEventListener(p.default.ERROR,this.__error_handler),t.target.removeEventListener(p.default.COMPLETE,this.__load_handler)):(t.target.removeEventListener(v.default.MEDIA_ERROR,this.__error_handler),t.target.removeEventListener(v.default.MEDIA_LOAD_COMPLETE,this.__load_handler))),this.dispatchEvent(new p.default(b.STEP_ERROR,this._current_name,this._current_label)),trace("[ERROR] Loading path by",this._current_name),0<this._list.length)return this._loaded++,void this.load();this.dispatchEvent(new p.default(b.LOAD_COMPLETE,this._files,this._current_label))}},{key:"loadHandler",value:function(t){if(this._loaded++,null!=this._list){t&&(t.target instanceof Image?(t.target.onload=null,t.target.onerror=null):t.target instanceof f.default?(t.target.removeEventListener(p.default.ERROR,this.__error_handler),t.target.removeEventListener(p.default.COMPLETE,this.__load_handler)):t.target?(t.target.removeEventListener(v.default.MEDIA_ERROR,this.__error_handler),t.target.removeEventListener(v.default.MEDIA_LOAD_COMPLETE,this.__load_handler)):t instanceof FontFace&&document.fonts.add(t));var e=void 0,i=void 0;if(0<this._list.length){for(this.hasEventListener(b.LOAD_PROCESS)&&this.dispatchEvent(new p.default(b.LOAD_PROCESS,Math.ceil(100*this._loaded/this._total))),e=this._files[this._current_name];!this.load()&&0<this._list.length;)trace("[WARM] Loader miss path by",this._current_name),this._loaded++,this.load();e?this.dispatchEvent(new p.default(b.STEP_COMPLETE,e,this._current_label)):this.dispatchEvent(new p.default(b.STEP_ERROR,this._current_name,this._current_label))}else{if(null==this._feedback){var s=this._current_name,n=this._current_label,e=this._files;this.reset(!0),this.dispatchEvent(new p.default(b.STEP_COMPLETE,e[s],n)),this.dispatchEvent(new p.default(b.LOAD_COMPLETE,e,n))}else{if(i=this._feedback,"string"==typeof this._feedback)return e=this._files[this._current_name].content,this.reset(!0),this.parse(e),void this.load(i);e=this._files[this._current_name],this.reset(!0);try{return void i.c.call(i.t,e,this)}catch(t){trace("[ERROR] Loader:loadHandler()",t)}}null==this._data&&this.once&&this.dispose()}}}},{key:"loadXML",value:function(t,e,i){var s=void 0;if(y.default.root.ActionXObject)for(var n=["Microsoft.XMLHTTP","Miscrosoft.XmlDom","MSXML.DOMDocument"],a=0;a<n.length;a++)try{s=new ActionXObject(n[a]);break}catch(t){}else y.default.root.XMLHttpRequest&&(s=new XMLHttpRequest);null!=s&&(s.onreadystatechange=function(){4==s.readyState&&(200==s.status&&(i._files[e]=s.responseXML?s.responseXML:s.response),i.loadHandler())},s.open("GET",t,!0),s.send(null))}},{key:"load",value:function(t){var e=0<arguments.length&&void 0!==t?t:null;if(null==e&&null==this._list)return!1;if("string"==typeof e?(this._loaded=0,this._data&&this._data.hasOwnProperty(e)?(this._list=this._data[e],this._total=this._list.length,this._current_label=e):!d.default.isEmpty(e)&&0<e.indexOf(".")&&(this._list=[e],this._total=1)):this.parse(e),null==this._list)return!1;if(0==this._list.length)return this.dispatchEvent(new p.default(b.LOAD_COMPLETE,this._files,this._current_label)),!1;null==this.__load_handler&&(this.__load_handler=y.default.delegate(this.loadHandler,this)),null==this.__error_handler&&(this.__error_handler=y.default.delegate(this.errorHandler,this));var i=void 0,s=void 0,n=void 0,a=this._list.shift(),s="object"==c.default.getType(a)?(i=a.hasOwnProperty("url")?a.url:a.data,n=d.default.getPathExt(i),s=a.hasOwnProperty("label")?a.label:a.name,d.default.isEmpty(s)?b.getName(i):s):(i=String(a),n=d.default.getPathExt(i),b.getName(i));if(d.default.isEmpty(i)||d.default.isEmpty(n))return!1;i=this.locale&&!d.default.exist(i,"http://","https://")?this.locale+i:i,trace("[LOADING]",s,"("+(this._loaded+1)+"/"+this._total+")"),this._current_name=s;var r=void 0,o=void 0,l=void 0,h=void 0,u=void 0;switch(n){case"mp3":case"wav":case"wave":(o=new(y.default.canUseWebAudio&&i.indexOf(",")<0?_.default:m.default))instanceof m.default?o.load(i):o.load(i)||(o.dispose(),(o=new m.default).load(i)),(this._files[s]=o).addEventListener(v.default.MEDIA_ERROR,this.__error_handler),o.addEventListener(v.default.MEDIA_LOAD_COMPLETE,this.__load_handler);break;case"xml":case"fnt":case"svg":this.loadXML(i,s,this);break;case"bmp":case"ttf":case"eot":case"otf":case"woff":case"woff2":try{h=new FontFace(this.fontDic?this.fontDic[d.default.getFileName(i)]:d.default.getFileName(i),"url('"+i+"')"+(d.default.isEmpty(this.fontFormat)?"format('"+("eot"==n?"embedded-opentype":"ttf"==n?"truetype":n)+"')":this.fontFormat)),(this._files[s]=h).loaded.then(this.__load_handler).catch(this.__error_handler),h.load()}catch(t){this.errorHandler()}break;case"json":case"txt":case"js":case"css":case"prop":r=new f.default,(this._files[s]=r).addEventListener(p.default.ERROR,this.__error_handler),r.addEventListener(p.default.COMPLETE,this.__load_handler),r.load(i);break;case"mp4":case"webm":case"ogg":case"mov":l=new g.default,(this._files[s]=l).addEventListener(v.default.MEDIA_ERROR,this.__error_handler),l.addEventListener(v.default.MEDIA_LOAD_COMPLETE,this.__load_handler),l.load(i);break;case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":if((u=new Image).style.display="none",b.CORS&&i&&0==i.indexOf("http")&&(u.crossOrigin=y.default.crossdomain,1<b.CORS&&(i=(i.indexOf("?")<0?i:i.split("?")[0])+"?"+Math.random())),u.src=i,(this._files[s]=u).complete||u.naturalWidth||u.width){this.loadHandler({target:u});break}u.onload=this.__load_handler,u.onerror=this.__error_handler;break;default:return!1}return!0}},{key:"reset",value:function(t){this._files={},this._total=this._loaded=0,this.fontFormat=this.fontDic=null,this._feedback=this._list=this._current_name=this._current_label=null,t||(this.__error_handler=this.locale=this._data=this.__load_handler=null)}},{key:"dispose",value:function(){(function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0})(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"dispose",this).call(this),this.reset(),delete this.__error_handler,delete this._current_label,delete this.__load_handler,delete this._current_name,delete this._feedback,delete this.fontDic,delete this._loaded,delete this._total,delete this._files,delete this.locale,delete this._list,delete this._data,delete this.once}}])&&s(r.prototype,o),l&&s(r,l),b);function b(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;!function(t){if(!(t instanceof b))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return n.reset(),n.once=!0,n.locale=e,n.fontDic=n.fontFormat=null,t&&n.parse(t,i,s),n}(e.default=h).CORS=0,h.className="Loader",h.LOAD_PROCESS="loadProcess",h.LOAD_COMPLETE="loadComplete",h.STEP_ERROR="stepError",h.STEP_COMPLETE="stepComplete"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=h(i(12)),a=h(i(8)),o=h(i(4)),l=h(i(1));function h(t){return t&&t.__esModule?t:{default:t}}var u,c,d,_=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,h(i(72)).default),u=f,(c=[{key:"setup",value:function(t,e,i,s,n,a,r,o,l){this._rect=e,this._target=t,this.useWheel&&(this._target.mouseEnabled=!0),this.bar=i,this.bottom=s,this._offset=r,this.useUpdate=!0,this.isY=n||!1,this.isScale=a||!1,o&&(this._up_btn=o),l&&(this._down_btn=l),this._min=0,this._value=0,this.resetRange(),this.initLayout(this._offset)}},{key:"resetRange",value:function(t){this.max=Math.max(0,Math.ceil(this.isY?this._target.getHeight()-this._rect.height:this._target.getWidth()-this._rect.width));var e=!(0==this._max&&this.autoVisible);this.bottom.visible=this.bar.visible=e,this._down_btn&&(this._down_btn.visible=e),this._up_btn&&(this._up_btn.visible=e),t&&this.updataSync()}},{key:"initLayout",value:function(t){this._target.x=this._rect.x,this._target.y=this._rect.y;var e=this._up_btn?this._up_btn.getWidth():0,i=this._up_btn?this._up_btn.getHeight():0;this.bottom.x=(this.isY?this._rect.x+this._rect.width+this.space:this._rect.x+e)+(t?t.x:0),this.bottom.y=(this.isY?this._rect.y+i:this._rect.y+this._rect.height+this.space)+(t?t.y:0),this.isY?this.bottom.height=this._rect.height-2*i:this.bottom.width=this._rect.width-2*e,this.initialize(),this._up_btn&&(this.contains(this._up_btn)||this.addChild(this._up_btn),this._up_btn.moveTo((this.isY?this._rect.x+this._rect.width+this.space:this._rect.x)+(t?t.x:0),(this.isY?this._rect.y:this._rect.y+this._rect.height+this.space)+(t?t.y:0))),this._down_btn&&(this.contains(this._down_btn)||this.addChild(this._down_btn),this._down_btn.moveTo((this.isY?this._rect.x+this._rect.width+this.space:this._rect.x+this._rect.width-e)+(t?t.x:0),(this.isY?this._rect.y+this._rect.height-i:this._rect.y+this._rect.height+this.space)+(t?t.y:0)))}},{key:"_reset_handler",value:function(t){t.params&&(this._rect.width=t.params.hasOwnProperty("w")?t.params.w:this._rect.width,this._rect.height=t.params.hasOwnProperty("h")?t.params.h:this._rect.height,this.initLayout(this._offset),this.updataSync()),t.label&&(t.label.hasOwnProperty("r")&&(this.rotation=t.label.r),t.label.hasOwnProperty("x")&&(this.x=t.label.x),t.label.hasOwnProperty("y")&&(this.y=t.label.y))}},{key:"_activate_bar",value:function(t){if(r(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"_activate_bar",this).call(this,t),t)return this._target&&(this._target.addEventListener(o.default.RESIZE,l.default.delegate(this._reset_handler,this),this.name),this._target.addEventListener(n.default.RESIZE,l.default.delegate(this.resetRange,this),this.name),this._target.addEventListener(a.default.DRAG_MOVE,l.default.delegate(this.dragHandler,this),this.name),this._target.addEventListener(n.default.RESET_INSTANCE,l.default.delegate(this.resetRange,this),this.name),this.useWheel&&this._target.addEventListener(a.default.MOUSE_WHEEL,l.default.delegate(this.wheelHandler,this),this.name)),this._up_btn&&this._up_btn.addEventListener(a.default.MOUSE_CLICK,l.default.delegate(this._clickUpBtn,this)),void(this._down_btn&&this._down_btn.addEventListener(a.default.MOUSE_CLICK,l.default.delegate(this._clickDownBtn,this)));this._target&&(this._target.removeEventListener(o.default.RESIZE,null,this.name),this._target.removeEventListener(n.default.RESIZE,null,this.name),this._target.removeEventListener(a.default.DRAG_MOVE,null,this.name),this._target.removeEventListener(a.default.MOUSE_WHEEL,null,this.name),this._target.removeEventListener(n.default.RESET_INSTANCE,null,this.name)),this._up_btn&&this._up_btn.removeEventListener(a.default.MOUSE_CLICK),this._down_btn&&this._down_btn.removeEventListener(a.default.MOUSE_CLICK)}},{key:"dragHandler",value:function(){this.value=this.isY?this._rect.y-this._target.y:this._rect.x-this._target.x}},{key:"wheelHandler",value:function(t){this.updataSync(this._value+(t.delta<0?1:-1)*Math.max(1,Math.ceil(this.delta*this._max)))}},{key:"barSync",value:function(){this.isScale&&(this.isY?this.bar.height=Math.max(this.bottom.height*(1-this.max/this.bottom.height),this.minSize):this.bar.width=Math.max(this.bottom.width*(1-this.max/this.bottom.width),this.minSize)),r(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"barSync",this).call(this)}},{key:"dataSync",value:function(t){null==t&&r(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"dataSync",this).call(this),this.isY?this._target.y=this._rect.y-this._value:this._target.x=this._rect.x-this._value}},{key:"updataSync",value:function(t){this.value=null==t?this.isY?this._rect.y-this._target.y:this._rect.x-this._target.x:t,this.dataSync(!0)}},{key:"_clickUpBtn",value:function(){this.updataSync(this._value-Math.max(1,Math.ceil(this.delta*this._max*2)))}},{key:"_clickDownBtn",value:function(){this.updataSync(this._value+Math.max(1,Math.ceil(this.delta*this._max*2)))}},{key:"dispose",value:function(){r(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"dispose",this).call(this),delete this._offset,this._target,this._up_btn,this._down_btn,this._rect,delete this.useWheel,this.space,this.delta,this.minSize,this.isScale,this.autoVisible}},{key:"upBtn",get:function(){return this._up_btn},set:function(t){null!=t&&t!=this._up_btn&&(this._up_btn=t)}},{key:"downBtn",get:function(){return this._down_btn},set:function(t){null!=t&&t!=this._down_btn&&(this._down_btn=t)}},{key:"target",get:function(){return this._target},set:function(t){var e;null!=t&&t!=this._target&&(e=this.enable,this.enable=!1,this._target=t,this._target.x=this._rect.x,this._target.y=this._rect.y,this.enable=e,this.dataSync(!0))}}])&&s(u.prototype,c),d&&s(u,d),f);function f(){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return t.space=0,t.delta=.05,t.minSize=12,t.useWheel=t.isScale=t.autoVisible=!0,t._offset=t._rect=t._target=t._up_btn=t._down_btn=null,t}(e.default=_).className="SlideBar"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=u(i(5)),a=u(i(8)),r=u(i(3)),o=u(i(22)),l=u(i(1)),h=u(i(4));function u(t){return t&&t.__esModule?t:{default:t}}var c,d,_,f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,n.default),c=p,(d=[{key:"setup",value:function(t,e,i,s,n,a,r){var o=5<arguments.length&&void 0!==a&&a,l=6<arguments.length&&void 0!==r&&r;this.bar=s,this.bottom=n,this._min=t,this._max=e,this._value=i,this.isY=Boolean(o),this.useUpdate=Boolean(l),this.bar&&this.bottom&&this.initialize()}},{key:"initialize",value:function(){this.contains(this.bottom)||this.addChild(this.bottom),this.contains(this.bar)||this.addChild(this.bar),this.isY?(this.bar.x=this.bottom.x+.5*(this.bottom.getWidth()-this.bar.getWidth()),this.bar.y=this.bottom.y+this.bottom.getHeight()-this.bar.getHeight()/2):(this.bar.x=this.bottom.x+this.bar.getWidth()/2,this.bar.y=this.bottom.y+.5*(this.bottom.getHeight()-this.bar.getHeight())),this.enable=this.isInitialized=!0,this.barSync()}},{key:"_activate_bar",value:function(t){if(null!=this.bar&&null!=this.bottom){if(this.bar.mouseEnabled=this.bottom.mouseEnabled=this.bar.buttonMode=t,this.bar.breakTouch=t)return this.bar.addEventListener(a.default.MOUSE_DOWN,l.default.delegate(this._mouse_down_bar,this)),void(0<this.bottom.alpha&&this.bottom.visible&&this.bottom.addEventListener(a.default.MOUSE_DOWN,l.default.delegate(this._mouse_move_handler,this)));this.bar.removeEventListener(a.default.MOUSE_DOWN),this.bottom.removeEventListener(a.default.MOUSE_DOWN)}}},{key:"_mouse_down_bar",value:function(t){this._mousePos=this.bar.globalToLocal(t.mouseX,t.mouseY),(this.stage?this.stage:o.default.current).addEventListener(a.default.MOUSE_MOVE,l.default.delegate(this._mouse_move_handler,this),this.name),(this.stage?this.stage:o.default.current).addEventListener(a.default.MOUSE_UP,l.default.delegate(this._mouse_up_bar,this),this.name)}},{key:"_mouse_up_bar",value:function(){(this.stage?this.stage:o.default.current).removeEventListener(a.default.MOUSE_MOVE,null,this.name),(this.stage?this.stage:o.default.current).removeEventListener(a.default.MOUSE_UP,null,this.name),this._mousePos=null,this.dataSync()}},{key:"_mouse_move_handler",value:function(t){var e=void 0;this._mousePos&&(e=this.bar.origin?this._mousePos.subtract(this.bar.origin):this._mousePos.clone());var i=this.globalToLocal((t?t.mouseX:(this.stage?this.stage:o.default.current).mouseX)-(e?e.x:0),(t?t.mouseY:(this.stage?this.stage:o.default.current).mouseY)-(e?e.y:0)),s=i.x,n=i.y;this.isY?n<=this.bottom.y?this.bar.y=this.bottom.y:n>=this.bottom.y+this.bottom.getHeight()-this.bar.getHeight()?this.bar.y=this.bottom.y+this.bottom.getHeight()-this.bar.getHeight():this.bar.y+=n-this.bar.y:s<=this.bottom.x?this.bar.x=this.bottom.x:s>=this.bottom.x+this.bottom.getWidth()-this.bar.getWidth()?this.bar.x=this.bottom.x+this.bottom.getWidth()-this.bar.getWidth():this.bar.x+=s-this.bar.x,!this.useUpdate&&t.target!=this.bottom||this.dataSync()}},{key:"dataSync",value:function(){var t=this.isY?r.default.format((this.bar.y-this.bottom.y)/(this.bottom.getHeight()-this.bar.getHeight())*(this._max-this._min)):r.default.format((this.bar.x-this.bottom.x)/(this.bottom.getWidth()-this.bar.getWidth())*(this._max-this._min));this.isOrder?this._value=this._min+t>=this._max?this._max:this._min+t:this._value=this._max-t<=this._min?this._min:this._max-t,this.dispatchEvent(new h.default(p.CHANGE,this._value,null==this._mousePos))}},{key:"barSync",value:function(){var t;this.isInitialized&&null!=this.bar&&null!=this.bottom&&(t=this.isOrder?this._value-this._min:this._max-this._value,this.isY?this.bar.y=t/(this._max-this._min)*(this.bottom.getHeight()-this.bar.getHeight())+this.bottom.y:this.bar.x=t/(this._max-this._min)*(this.bottom.getWidth()-this.bar.getWidth())+this.bottom.x)}},{key:"dispose",value:function(){this.enable=!1,function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0}(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"dispose",this).call(this),delete this._mousePos,this._enable,this.isInitialized,this.useUpdate,this.isY,this._min,this._max,this._value,this.bar,this.bottom,this.isOrder}},{key:"enable",get:function(){return this._enable},set:function(t){null!=t&&t!=this._enable&&(this._enable=t,this._activate_bar(this._enable))}},{key:"min",get:function(){return this._min},set:function(t){null!=t&&t!=this._min&&(this._min=t,this.barSync())}},{key:"max",get:function(){return this._max},set:function(t){null!=t&&t!=this._max&&(this._max=t,this.barSync())}},{key:"value",get:function(){return this._value},set:function(t){null!=t&&null!=t&&(t=r.default.clamp(t,this._min,this._max))!=this._value&&(this._value=t,this.barSync())}}])&&s(c.prototype,d),_&&s(c,_),p);function p(){!function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return t._enable=t.isInitialized=t.useUpdate=t.isY=!1,t.mouseEnabled=t.mouseChildren=!0,t._mousePos=t.bar=t.bottom=null,t._min=t._max=t._value=0,t.isOrder=!0,t}(e.default=f).CHANGE="moveBarChange",f.className="MoveBar"},function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var n=(s(a,[{key:"check",value:function(){var t=(new Date).getTime(),e=t-a._time;return a._time=t,e<a._interval&&!(a._time=0)}}]),a);function a(){!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this)}(e.default=n)._time=0,n._interval=300},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var o=n(i(21)),d=n(i(1)),_=n(i(36)),r=n(i(0)),f=n(i(28)),p=n(i(15)),v=n(i(7)),l=n(i(70)),y=n(i(18));function n(t){return t&&t.__esModule?t:{default:t}}var a,h,u,c=(a=g,u=[{key:"getButton",value:function(t,e,i,s,n,a,r,o){t=null==t?0:t,e=null==e?0:e,i=null==i?0:i,s=null==s?"#FF9E26":p.default.formatColor(s),n=null==n?"#FF7C0D":p.default.formatColor(n);var l=new _.default,h=v.default.c("bs"),u=0==e&&0==i;e=Math.max(2*t,e),i=Math.max(2*t,i);var c=u?new GColor(1,t,t,t,t,[.1,1],[s,n],.25*t,t):new GColor(0,0,0,0,i,[.1,.9],[s,n],e,i);return h.setup(c,e,i,t,a,r),h.origin={x:.5*e,y:.5*i},l.instance=h,!d.default.isPC||null!=o&&0!=o?l.setup([v.default.c("ef",[f.default.SCALE,1,.15,0,y.default.getEaseName(y.default.CIRC,y.default.IN)])],null,[v.default.c("ef",[f.default.SCALE,.89,.11,0,y.default.getEaseName(y.default.CIRC,y.default.OUT)])]):l.setup([v.default.c("ef",[f.default.MOVE,"{0,0}",.15,0,y.default.getEaseName(y.default.CIRC,y.default.IN)]),v.default.c("ef",[f.default.SHADOW,[4,70,10,"#222222",.5,t],.15,0,y.default.getEaseName(y.default.CIRC,y.default.IN)])],[v.default.c("ef",[f.default.MOVE,"{0,3}",.15,0,y.default.getEaseName(y.default.CIRC,y.default.IN)]),v.default.c("ef",[f.default.SHADOW,[0,70,0,"#000000",.5,t],.15,0,y.default.getEaseName(y.default.CIRC,y.default.IN)])]),l}},{key:"getImage",value:function(t,e,i,s){if(r.default.isEmpty(t))return null;var n=void 0,a=new Image;return i||(n=v.default.c("do")),l.default.CORS&&t&&0==t.indexOf("http")&&(a.crossOrigin=d.default.crossdomain,1<l.default.CORS&&(t=(t.indexOf("?")<0?t:t.split("?")[0])+"?"+Math.random())),a.src=t,a.complete?(i||n.setInstance(a),n=i?a:n,e&&e(n),n):(a.onload=function(){a.onerror=a.onload=null,i||n.setInstance(a),e&&e(i?a:n),i=s=null},a.onerror=function(){a.onerror=a.onload=null,s&&s(i?null:n),i=s=null},n||a)}},{key:"rectDisplay",value:function(t,e,i,s){if(t&&e){i=i||"#000000",s=null==s?d.default.useCanvas:s;var n,a="string"!=typeof i&&(i instanceof Image||"HTMLImageElement"==ClassUtil.getQualifiedClassName(i)),r=v.default.c("do",null,s);return s?a?(r.setInstance(i),r.repeat(t,e)):(r.graphics.lineStyle(0),r.graphics.beginFill(i),r.graphics.drawRect(0,0,t,e),r.graphics.endFill()):(n={width:t+"px",height:e+"px",overflow:"hidden"},a?n.background="url("+i.src+")":n.backgroundColor=i,r.element=o.default.createDOM("div",{style:n})),r.setSize(t,e),r}}}],(h=null)&&s(a.prototype,h),u&&s(a,u),g);function g(){!function(t){if(!(t instanceof g))throw new TypeError("Cannot call a class as a function")}(this)}e.default=c},function(t,e,i){t.exports=i(76)},function(t,e,i){"use strict";var s={name:"cooltree"};s.SystemType=i(38).default,s.MathUtil=i(3).default,s.ClassUtil=i(13).default,s.ObjectUtil=i(9).default,s.StringUtil=i(0).default,s.ColorUtil=i(15).default,s.CanvasUtil=i(23).default,s.WordUtil=i(50).default,s.DOMUtil=i(21).default,s.ObjectPool=i(2).default,s.CollisionUtil=i(25).default,s.PropUtil=i(78).default,s.SVGUtil=i(27).default,s.UniqueUtil=i(11).default,s.UIOrientation=i(43).default,s.Compile=i(52).default,s.SVGLabel=i(31).default,s.ContextVO=i(29).default,s.GraphicsVO=i(39).default,s.Point=i(6).default,s.Rectangle=i(10).default,s.Matrix=i(53).default,s.GColor=i(32).default,s.Global=i(1).default,s.Event=i(4).default,s.EventDispatcher=i(19).default,s.Address=i(79).default,s.Storage=i(51).default,s.MovieManager=i(62).default,s.DropShadowFilter=i(42).default,s.AssetManager=i(44).default,s.BlendMode=i(41).default,s.ColorTransform=i(80).default,s.FontManager=i(33).default,s.File=i(81).default,s.RenderObject=i(54).default,s.Timer=i(61).default,s.Source=i(17).default,s.AssetUtil=i(63).default,s.Ajax=i(45).default,s.Graphics=i(30).default,s.DisplayBase=i(12).default,s.DOMDisplay=i(14).default,s.DOMMovie=i(56).default,s.DisplayObject=i(16).default,s.MediaManager=i(65).default,s.Media=i(24).default,s.Video=i(46).default,s.Sound=i(66).default,s.WebAudio=i(67).default,s.DisplayObjectContainer=i(5).default,s.StageEvent=i(8).default,s.DefsNode=i(68).default,s.UIBase=i(69).default,s.ShapeVO=i(20).default,s.Sprite=i(35).default,s.VideoPlayer=i(82).default,s.URLLoader=i(34).default,s.Loader=i(70).default,s.InputText=i(58).default,s.BitmapFont=i(64).default,s.Effect=i(28).default,s.BoxShape=i(59).default,s.TextField=i(57).default,s.SVGText=i(83).default,s.BitmapText=i(84).default,s.Stage=i(22).default,s.MovieClip=i(55).default,s.Factory=i(7).default,s.Button=i(36).default,s.Easing=i(60).default,s.TweenLite=i(18).default,s.LoadingClip=i(85).default,s.List=i(86).default,s.ComboList=i(87).default,s.MoveBar=i(72).default,s.ScrollTouchList=i(88).default,s.Shape=i(89).default,s.SlideBar=i(71).default,s.SwitchButton=i(90).default,s.TouchScale=i(91).default,s.Transformer=i(92).default,s.UIContainer=i(47).default,s.ArrayUtil=i(26).default,s.DisplayUtil=i(48).default,s.DoubleClick=i(73).default,s.LayoutUtil=i(37).default,s.QuickUI=i(74).default,s.ShapeUtil=i(40).default,s.RouteUtil=i(93).default,s.TimeUtil=i(49).default,s.MySocket=i(94).default,t.exports=s},function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var n=(s(a,[{key:"parseProperties",value:function(t){for(var e,i,s,n={},a=t.replace(/[\r\n]/g,"\n").split("\n"),r=void 0,o=void 0,r=0;r<a.length;r++)null==(o=a[r])||o.length<3||"#"!=o.charAt(0)&&((e=a[r].indexOf("="))<0||(i=StringUtil.trim(o.substring(0,e)),s=StringUtil.trim(o.substring(e+1,o.length)),n[i]=s));return n}}]),a);function a(){!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this)}e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=o(i(19)),a=o(i(4)),r=o(i(1));function o(t){return t&&t.__esModule?t:{default:t}}var l,h,u,c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,n.default),l=d,u=[{key:"getInstance",value:function(){return d._instance||((d._instance=new d).target=r.default.root),d._instance}}],(h=[{key:"_hashChangeHandler",value:function(){var t=r.default.root.location.hash.replace("#","");t!=this._value&&(this._value=t,this.dispatchEvent(new a.default(d.CHANGE,this._value)))}},{key:"dispose",value:function(){(function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0})(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"dispose",this).call(this),this.target=null,this._onHashChange=this._value=null,delete this._target,this._onHashChange,this._value}},{key:"target",get:function(){return this._target},set:function(t){t&&t==this._target||(null==this._onHashChange&&(this._onHashChange=r.default.delegate(this._hashChangeHandler,this)),this._target&&this._target.removeEventListener("hashchange",this._onHashChange),null!=(this._target=t)&&this._target.addEventListener("hashchange",this._onHashChange))}}])&&s(l.prototype,h),u&&s(l,u),d);function d(){!function(t){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return t._target=t._onHashChange=t._value=null,t}(e.default=c).className="Address",c.CHANGE="addressValueChange",c._instance=null},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n,a,r,o=i(15),l=o&&o.__esModule?o:{default:o},h=(n=u,(a=[{key:"setColor",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:0;t=l.default.toColor(t),this.redMultiplier=this.greenMultiplier=this.blueMultiplier=this.alphaMultiplier=i,this.redOffset=l.default.getRed(t),this.greenOffset=l.default.getGreen(t),this.blueOffset=l.default.getBlue(t),this.alphaOffset=l.default.getAlpha(t),this._update=!0}},{key:"toString",value:function(){return'{"redOffset":'+this.redOffset+',"greenOffset":'+this.greenOffset+',"blueOffset":'+this.blueOffset+',"alphaOffset":'+this.alphaOffset+',"redMultiplier":'+this.redMultiplier+',"greenMultiplier":'+this.greenMultiplier+',"blueMultiplier":'+this.blueMultiplier+',"alphaMultiplier":'+this.alphaMultiplier+"}"}},{key:"update",get:function(){var t=this._update;return this._update&&(this._update=!1),t},set:function(t){this._update!=t&&(this._update=t)}}])&&s(n.prototype,a),r&&s(n,r),u);function u(t,e,i,s,n,a,r,o){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.redMultiplier=t,this.greenMultiplier=e,this.blueMultiplier=i,this.alphaMultiplier=s,this.redOffset=n,this.greenOffset=a,this.blueOffset=r,this.alphaOffset=o,this._update=!0}(e.default=h).className="ColorTransform"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=r(i(19)),a=r(i(11)),c=r(i(0)),d=r(i(21)),_=r(i(4)),f=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var o,l,h,u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,n.default),o=p,h=[{key:"COMPLETE",get:function(){return"file_select_complete"}},{key:"LIMIT",get:function(){return"file_size_out"}}],(l=[{key:"open",value:function(t){t||this._clearInputFile(),this.element&&this.element.click()}},{key:"_clearInputFile",value:function(){var t,e;this.supported&&null!=this.element&&(this.element.removeEventListener("change",this._file_select_handler),t=this.element.multiple,e=this.element.accept,this.element=null,this._browseForOpen("openFile",t,e))}},{key:"_browseForOpen",value:function(t,e,i){e=e||!1,null==this.element?this.element=d.default.createDOM("input",{type:"file",multiple:e,id:this.name,name:t,style:{position:f.default.position}}):(this.element.multiple=e,this.element.name=t),c.default.isEmpty(i)||(this.element.accept=i),null==this._file_select_handler&&(this._file_select_handler=f.default.delegate(this._fileSelectHandle,this)),this.element.addEventListener("change",this._file_select_handler,!1)}},{key:"_fileSelectHandle",value:function(t){var e,i=void 0,s=void 0,n=void 0,a=t.target.files,r=[],o=[],l=this,h=f.default.root.URL||f.default.root.webkitURL;if(a.length&&0<this.max_size){for(var u=[],i=0;s=a[i];i++)s&&s.size<1e6*this.max_size?u.push(s):r.push(s?s.name:"null");a=u}if(0<r.length&&l.dispatchEvent(new _.default(p.LIMIT,r)),this.auto_parse&&0!=a.length)for(i=0;i<a.length;i++)if(0==(s=a[i]).type.indexOf("image")){if(e=h.createObjectURL(s),!c.default.isEmpty(e)&&!this.image_to_base64){(n=new Image).name=s.name,n.src=e,n.onload=function(t){h.revokeObjectURL(n.src),o.push(n),i>=a.length-1&&l.dispatchEvent(new _.default(p.COMPLETE,o))};continue}l._reader=new FileReader,l._reader.onload=function(t){l.image_to_base64?o.push(t.target.result):((n=new Image).name=t.target.name,n.src=t.target.result,o.push(n)),i>=a.length-1&&l.dispatchEvent(new _.default(p.COMPLETE,o))},l._reader.readAsDataURL(s)}else 0==s.type.indexOf("text")?(l._reader=new FileReader,l._reader.onload=function(t){n=d.default.createDOM("p",{id:t.target.name,innerHTML:"<pre>"+t.target.result.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</pre>"}),o.push(n),i>=a.length-1&&l.dispatchEvent(new _.default(p.COMPLETE,o))},l._reader.readAsText(s)):(l._reader=new FileReader,l._reader.onload=function(t){o.push(t.target.result),i>=a.length-1&&l.dispatchEvent(new _.default(p.COMPLETE,o))},l._reader.readAsBinaryString(s));else a.length&&l.dispatchEvent(new _.default(p.COMPLETE,a))}},{key:"abortRead",value:function(){if(this._reader)try{this._reader.abort()}catch(t){}}},{key:"dispose",value:function(){this.element&&this.element.removeEventListener("change",this._file_select_handler),function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0}(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"dispose",this).call(this),delete this.image_to_base64,this.auto_parse,this._cancel_handler,this._file_select_handler,this._file,this._reader,this.name}},{key:"supported",get:function(){return f.default.root.File&&f.default.root.FileReader&&f.default.root.FileList}}])&&s(o.prototype,l),h&&s(o,h),p);function p(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;!function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return i.name=a.default.getName("File"),i._reader=i._cancel_handler=i._file_select_handler=null,i.alpha=0,i.layer=995,i.max_size=0,i.auto_parse=!0,i.image_to_base64=!1,i.buttonMode=i.mouseEnabled=!0,i.supported&&i._browseForOpen("openFile",t,e),i}(e.default=u).className="File"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=v(i(5)),a=v(i(14)),r=v(i(8)),o=v(i(2)),l=v(i(0)),h=v(i(3)),u=v(i(7)),c=v(i(4)),d=v(i(22)),_=v(i(1)),f=v(i(46)),p=v(i(24));function v(t){return t&&t.__esModule?t:{default:t}}var y,g,m,b=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(O,n.default),y=O,(g=[{key:"_loading",value:function(t){var e;this._is_loading||l.default.isEmpty(t)||this._url==t||(this._is_loading=!0,this._is_reload=!1,this._url=t,(e=new f.default).addEventListener(p.default.MEDIA_LOAD_COMPLETE,_.default.delegate(this._complete_handler,this)),e.addEventListener(p.default.MEDIA_ERROR,_.default.delegate(this._error_handler,this)),e.load(this._url))}},{key:"_error_handler",value:function(t){t.target.removeEventListener(p.default.MEDIA_LOAD_COMPLETE),t.target.removeEventListener(p.default.MEDIA_ERROR),this._is_loading=!1,this.dispatchEvent(new c.default(O.ERROR))}},{key:"_complete_handler",value:function(t){var e;t.target.removeEventListener(p.default.MEDIA_LOAD_COMPLETE),t.target.removeEventListener(p.default.MEDIA_ERROR),this._is_loading=!1,!t.target||t.target.loadFail?this._is_reload?this.dispatchEvent(new c.default(O.ERROR)):(t.target.dispose(),this._is_reload=!0,this._is_loading=!0,(e=new f.default).addEventListener(p.default.MEDIA_LOAD_COMPLETE,_.default.delegate(this._complete_handler,this)),e.load(this._url)):this.load(t.target)}},{key:"load",value:function(t){var e,i;null!=t&&(e=t.getHeight(),i=t.getWidth(),this.isStrict&&(e<=0||i<=0||_.default.isPC&&(isNaN(t.length)||t.length<=0))?this.dispatchEvent(new c.default(O.ERROR)):(e&&(this._video_height=e),i&&(this._video_width=i),this._instance&&(this._video&&!this.isStop&&this.stop(),this._instance.removeFromParent(!0)),this._video=t,this._volume=t.volume,this._video.element.controls=this.control?"controls":"",null==this._changeState&&(this._changeState=_.default.delegate(this.__change_state,this)),null==this.bg?(this.bg=u.default.c("bs",["#000000",this._video_width,this._video_height]),this.addChild(this.bg),this.bg.mouseEnabled=!0,this.bg.addEventListener(r.default.MOUSE_DOWN,_.default.delegate(this.onMouseClick,this))):this.bg.setSize(this._video_width,this._video_height),_.default.useCanvas?this._instance=this._video:(this._instance=o.default.create(a.default),this._instance.element=this._video.element,this._instance.setSize(this._video_width,this._video_height)),this.addChild(this._instance),this.setSize(this._video_width,this._video_height),this.update_view(!1),this._video.setVolume(this._volume),this.play_btn&&!this.play_btn.hasEventListener(r.default.MOUSE_CLICK)&&this.play_btn.addEventListener(r.default.MOUSE_CLICK,_.default.delegate(this.onMouseClick,this)),this.dispatchEvent(new c.default(O.READY))))}},{key:"updateSize",value:function(t,e){var i;!this._is_loading&&null!=this._video&&t&&e&&(this.setSize(t,e),this.bg&&this.bg.setSize(t,e),this._instance&&(i=h.default.getSizeScale(this._video_width,this._video_height,t,e,!0),this._instance.scale=i,this._instance.moveTo(Math.round(.5*(t-this._instance.getWidth())),Math.round(.5*(e-this._instance.getHeight())))),this.play_btn&&this.contains(this.play_btn)&&this.play_btn.moveTo(Math.ceil(.5*(t-this.play_btn.getWidth())),Math.ceil(.5*(e-this.play_btn.getHeight()))))}},{key:"onMouseClick",value:function(t){if(!this._is_loading&&null!=this._video)switch(t.target){case this.play_btn:this.play();break;case this.bg:!this.isStop&&this._video.playing&&this.pause()}}},{key:"change",value:function(){null!=this._video&&(!this.isStop&&this._video.playing?this.pause():this.play())}},{key:"play",value:function(){null==this._video||this._video.playing||(this.seedTime=this.isStop?0:this.seedTime,this.update_view(!0),this.isStop&&(this._video.element.addEventListener("pause",this._changeState),this._video.element.addEventListener("playing",this._changeState),this._video.addEventListener(p.default.MEDIA_PLAY_COMPLETE,_.default.delegate(this.onPlayOver,this))),this._video.play(this.seedTime),this.isStop=!1)}},{key:"pause",value:function(){null!=this._video&&(this.seedTime=this._video.getCurrentTime(),this._video.stop(),this.update_view(!1))}},{key:"stop",value:function(){null==this._video||this.isStop||(this.isStop=!0,this.seedTime=0,this._video.stop(),this.update_view(!1),this._volume=this._video.volume,this._video.element.removeEventListener("playing",this._changeState),this._video.element.removeEventListener("pause",this._changeState),this._video.removeEventListener(p.default.MEDIA_PLAY_COMPLETE))}},{key:"__change_state",value:function(t){if("playing"==t.type){if(this._video.playing)return;this._video.playing=!0,this.update_view(!0),this.isStop&&this._video.addEventListener(p.default.MEDIA_PLAY_COMPLETE,_.default.delegate(this.onPlayOver,this)),this.isStop=!1,this.dispatchEvent(new c.default(O.PLAY))}else if("pause"==t.type){if(!this._video.playing)return;this._video.playing=!1,this.seedTime=this._video.getCurrentTime(),this.update_view(!1),this.dispatchEvent(new c.default(O.PAUSE))}}},{key:"update_view",value:function(t){if(this.__checkDisplayUpdate(),t)return this.play_btn&&this.play_btn.removeFromParent(!1),void(_.default.useCanvas&&!(this.stage?this.stage:d.default.current).hasEventListener(r.default.ENTER_FRAME,this.name)&&(this.stage?this.stage:d.default.current).addEventListener(r.default.ENTER_FRAME,_.default.delegate(this.onEnterFrame,this),this.name));this.play_btn&&(this.play_btn.moveTo(Math.ceil(.5*(this.width-this.play_btn.getWidth())),Math.ceil(.5*(this.height-this.play_btn.getHeight()))),this.addChild(this.play_btn)),(this.stage?this.stage:d.default.current).hasEventListener(r.default.ENTER_FRAME,this.name)&&(this.stage?this.stage:d.default.current).removeEventListener(r.default.ENTER_FRAME,null,this.name)}},{key:"onEnterFrame",value:function(){_.default.useCanvas&&this.__checkDisplayUpdate()}},{key:"onPlayOver",value:function(){this.stop(),this.dispatchEvent(new c.default(O.COMPLETE))}},{key:"dispose",value:function(){this._video&&!this.isStop?this.stop():(this.stage?this.stage:d.default.current).hasEventListener(r.default.ENTER_FRAME,this.name)&&(this.stage?this.stage:d.default.current).removeEventListener(r.default.ENTER_FRAME,null,this.name),function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0}(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"dispose",this).call(this),delete this.isStrict,this._is_reload,this.control,this._changeState,this.bg,this.play_btn,this._instance,this._video,this._url,this.seedTime,this._video_width,this._video_height,this._is_loading,this.isStop,this._volume}},{key:"src",get:function(){return this._url},set:function(t){this._loading(t)}},{key:"volume",get:function(){return this._volume},set:function(t){null!=t&&this._volume!=t&&(this._volume=t,this._video&&this._video.setVolume(this._volume))}},{key:"instance",get:function(){return this._instance}}])&&s(y.prototype,g),m&&s(y,m),O);function O(){!function(t){if(!(t instanceof O))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(O.__proto__||Object.getPrototypeOf(O)).call(this));return t._changeState=t.bg=t.play_btn=t._instance=t._video=t._url=null,t.isStrict=t.control=t._is_loading=t._is_reload=!1,t.seedTime=t._video_width=t._video_height=0,t.isStop=!0,t._volume=1,t}(e.default=b).className="VideoPlayer",b.PLAY="video_player_play",b.ERROR="video_player_error",b.READY="video_player_ready",b.PAUSE="video_player_pause",b.COMPLETE="video_player_play_complete"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=a(i(14)),u=a(i(0)),o=a(i(3)),c=a(i(27)),l=a(i(32)),d=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var r,h,_,f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,n.default),r=p,(h=[{key:"_set_text",value:function(t){if(!u.default.isEmpty(t)){var e,i,s=this._text.split(/\r\n|\r|\n|<br(?:[ \/])*>/),n=this._size*this._lineHeight,a=void 0,r=void 0,o=s.length,l=Math.floor(this._lineWidth/(this._size+this._leading));this.autoSize&&0<this._lineWidth&&(this[this._writingMode?"height":"width"]=this._lineWidth);var h=this._writingMode?this.width-.5*n:n;for(this._instance?(this._instance.innerHTML="",this._instance.setAttribute("transform","translate(0, 0)")):this._instance=c.default.create("text",{width:this.width,height:this.height}),this.autoSize&&0<this._lineWidth&&this._instance.setAttribute(this._writingMode?"height":"width",this[this._writingMode?"height":"width"]),c.default.setAttributes(this._instance,{style:{fill:this._color,fillOpacity:this._fill_alpha,stroke:this._stroke_color,strokeWidth:this._thickness,fontStyle:this._italic?"italic":"normal",fontWeight:this._bold?"bold":"normal",fontSize:this._size+"px",fontFamily:this._font,textDecoration:this._underline?"underline":"none",textAlign:this._textAlign,letterSpacing:this._leading-(this._writingMode&&!this._textAdjust?Math.ceil(this._size/3.6):0)+"px"}}),this._instance.style.writingMode=this._writingMode?"tb-rl":"lr-tb",this._instance.style[d.default.cssPrefix+"WritingMode"]=this._writingMode?"tb-rl":"lr-tb",a=0;a<o;a++)if(i=s[a],0<l&&i.length>l)for(e=u.default.toArray(i,l),r=0;r<e.length;r++)this.__create_text(e[r],h,Math.ceil(n)),h=this._writingMode?h-n:h+n;else this.__create_text(i,h,Math.ceil(n)),h=this._writingMode?h-n:h+n;this.autoSize&&(this._writingMode&&h<0?(this.width=Math.abs(h)+this.width-.5*n,this._instance.setAttribute("width",this.width),this._instance.setAttribute("transform","translate("+Math.abs(h+.5*n)+", 0)")):!this._writingMode&&0<h&&(this.height=h,this._instance.setAttribute("height",this.height))),this._instance&&null==this._instance.parentNode&&this.element.appendChild(this._instance),this.selectable=this._selectable}}},{key:"__create_text",value:function(t,e){var i=0<this._lineWidth?this._lineWidth:this.width,s=u.default.countLeftSpace(t)*(this._size+this._leading),n={x:this._writingMode?e:s,y:this._writingMode?s:e,textLength:i,lengthAdjust:"spacing"};this._textAdjust&&(n.textLength=i-s,n.lengthAdjust="spacing");var a=c.default.create("tspan",n);a.innerHTML=t,this._instance.appendChild(a)}},{key:"_format_color",value:function(t){if(null==this.element||null==t)return t;if(t&&t instanceof HTMLImageElement)return this._set_pattern(t);if(!(t&&t instanceof l.default))return t;var e=this.element.getElementsByTagName("defs")[0];null==e&&(e=c.default.create("defs"),this.element.appendChild(e));var i=this.element.getElementById(this.name+"_gradient");i&&i.parentNode&&i.parentNode.removeChild(i);var s={id:this.name+"_gradient"};0==t.type?(s.x1=o.default.int(100*t.xStart/t.radiusStart)+"%",s.y1=o.default.int(100*t.yStart/t.radiusEnd)+"%",s.x2=o.default.int(100*t.xEnd/t.radiusStart)+"%",s.y2=o.default.int(100*t.yEnd/t.radiusEnd)+"%"):(s.fx=o.default.int(100*t.xStart/(2*t.radiusEnd))+"%",s.fy=o.default.int(100*t.yStart/(2*t.radiusEnd))+"%",s.cx=o.default.int(100*t.xEnd/(2*t.radiusEnd))+"%",s.cy=o.default.int(100*t.yEnd/(2*t.radiusEnd))+"%",s.r=o.default.int(2*t.radiusStart*100/t.radiusEnd)+"%"),i=c.default.create(0==t.type?"linearGradient":"radialGradient",s);for(var n,a=void 0,r=t.offsetlist.length,a=0;a<r;a++)n=c.default.create("stop",{offset:t.offsetlist[a],"stop-color":t.colorList[a]}),i.appendChild(n);return e.appendChild(i),"url(#"+this.name+"_gradient)"}},{key:"_set_pattern",value:function(t){var e=this.element.getElementsByTagName("defs")[0];null==e&&(e=c.default.create("defs"),this.element.appendChild(e));var i=this.element.getElementById(this.name+"_pattern");i&&i.parentNode&&i.parentNode.removeChild(i),i=c.default.create("pattern",{id:this.name+"_pattern",width:t.width,height:t.height,patternUnits:"userSpaceOnUse"});var s=c.default.create("image",{x:0,y:0,width:t.width,height:t.height});return s.setAttributeNS(c.default.xlink,"href",t.src),i.appendChild(s),e.appendChild(i),"url(#"+this.name+"_pattern)"}},{key:"clone",value:function(){var t=new p(this.width,this.height);return t.autoSize=this.autoSize,t._size=this._size,t._leading=this._leading,t._lineWidth=this._lineWidth,t._thickness=this._thickness,t._lineHeight=this._lineHeight,t._fill_alpha=this._fill_alpha,t._stroke_color=this._stroke_color,t._writingMode=this._writingMode,t._selectable=this._selectable,t._textAdjust=this._textAdjust,t._textAlign=this._textAlign,t._underline=this._underline,t._italic=this._italic,t._color=this._color,t._font=this._font,t._bold=this._bold,t.text=this._text,t}},{key:"dispose",value:function(){(function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0})(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"dispose",this).call(this),delete this._size,this._leading,this._lineWidth,this._thickness,this._lineHeight,this._fill_alpha,this._text,this._color,this._textAlign,this._stroke_color,this._font,this.autoSize,this._instance,this._selectable,this._textAdjust,this._writingMode,this._underline,this._bold,this._italic}},{key:"selectable",get:function(){return this._selectable},set:function(t){this._selectable=t,this._cursor=t?"text":"default",this._instance&&(this._instance.style.userSelect=this._selectable?"text":"none",this._instance.style[d.default.cssPrefix+"UserSelect"]=this._selectable?"text":"none")}},{key:"text",get:function(){return this._text},set:function(t){this._text=t,this._set_text(t)}},{key:"writingMode",get:function(){return this._writingMode},set:function(t){null!=this.element&&this._writingMode!=t&&(this._writingMode=t,this.text=this.text)}},{key:"italic",get:function(){return this._italic},set:function(t){null!=this.element&&this._italic!=t&&(this._italic=t,this._instance&&(this._instance.style.fontStyle=this._italic?"italic":"normal"))}},{key:"bold",get:function(){return this._bold},set:function(t){null!=this.element&&this._bold!=t&&(this._bold=t,this._instance&&(this._instance.style.fontWeight=this._bold?"bold":"normal"))}},{key:"size",get:function(){return this._size},set:function(t){null!=this.element&&this._size!=t&&(this._size=t,this.text=this.text)}},{key:"color",get:function(){return this._color},set:function(t){this._color!=t&&(this._color=this._format_color(t),!u.default.isEmpty(this._color)&&this._instance&&(this._instance.style.fill=this._color))}},{key:"font",get:function(){return this._font},set:function(t){u.default.isEmpty(t)||this._font==t||(this._font=t,this._instance&&(this._instance.style.fontFamily=this._font))}},{key:"align",get:function(){return this._textAlign},set:function(t){null!=this.element&&this._textAlign!=t&&(this._textAlign=t,this._instance&&(this._instance.style.textAlign=this._textAlign))}},{key:"underline",get:function(){return this._underline},set:function(t){null!=this.element&&this._underline!=t&&(this._underline=t,this._instance&&(this._instance.style.textDecoration=this._underline?"underline":"none"))}},{key:"textAdjust",get:function(){return this._textAdjust},set:function(t){null!=this.element&&this._textAdjust!=t&&(this._textAdjust=t,this.text=this.text)}},{key:"leading",get:function(){return this._leading},set:function(t){null!=this.element&&this._leading!=t&&(this._leading=t,this.text=this.text)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){null!=this.element&&this._lineHeight!=t&&(this._lineHeight=t,this.text=this.text)}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(t){null!=t&&this._lineWidth!=t&&(this._lineWidth=t,this.text=this.text)}},{key:"strokeColor",get:function(){return this._stroke_color},set:function(t){null!=t&&t!=this._stroke_color&&(this._stroke_color=this._format_color(t),!u.default.isEmpty(this._stroke_color)&&this._instance&&(this._instance.style.stroke=this._stroke_color))}},{key:"thickness",get:function(){return this._thickness},set:function(t){null!=t&&t!=this._thickness&&(this._thickness=t,this._instance&&(this._instance.style.strokeWidth=this._thickness))}}])&&s(r.prototype,h),_&&s(r,_),p);function p(t,e){!function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return i._size=12,i._leading=0,i._lineWidth=0,i._thickness=0,i._lineHeight=1,i._fill_alpha=1,i._text="",i._color="#000000",i._textAlign="left",i._stroke_color="#000000",i._font="Microsoft YaHei",i.autoSize=!1,i._instance=null,i._selectable=!0,i._textAdjust=!1,i._writingMode=i._underline=i._bold=i._italic=!1,i.setSize(t,e),i.element=c.default.create("svg"),i}(e.default=f).className="SVGText"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=h(i(5)),p=h(i(0)),a=h(i(33)),v=h(i(2)),o=h(i(15)),l=h(i(3)),y=h(i(1));function h(t){return t&&t.__esModule?t:{default:t}}var u,c,d,_=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,n.default),u=f,(c=[{key:"setup",value:function(t,e,i,s,n){this._text=t||this._text,this._font=e||this._font,this._color=s||this._color,this.width=this._lineWidth=i||this._lineWidth,this._textAlign=n||this._textAlign,this._fonts=a.default.get(this._font),null!=this._fonts&&(this._size=Math.abs(Number(this._fonts.info.size)),null==this._instance&&y.default.useCanvas&&(this._instance=v.default.create(DisplayObject),this.addChild(this._instance)),this._is_init=this._has_update=!0,this._fonts&&this._update())}},{key:"_update",value:function(){this.__checkDisplayUpdate();var t,e,i,s=this._fonts.info.spacing.split(","),n=Number(s[0]),a=Number(s[1]),r=void 0,o=n,l=a,h=void 0,u=this._text.length,c=0,d=0,_=v.default.create(Point),f="";for(y.default.useCanvas?this._instance.context.reset():this.removeAllChildren(!0),r=0;r<u;r++)if(i=this._text.charCodeAt(r),null!=(t=this._fonts.chars[i])){if(y.default.useCanvas?(e=v.default.create(Point).set(t.regX,t.regY),this._instance.context.translate(o-e.x-_.x,l-e.y-_.y),this._instance.context.drawImage(t.image,y.default.useCache?0:t.x,y.default.useCache?0:t.y,t.width,t.height,0,0,t.width,t.height),_.set(o-e.x,l-e.y),v.default.remove(e)):((h=v.default.create(DOMDisplay)).setInstance(t),h.moveTo(o,l),this.addChild(h)),c=0==c?t.height:Math.max(c,t.height),(o+=t.width+this._leading+n)>=(this._lineWidth<=0?this.stage?this.stage.stageWidth:y.default.width:this._lineWidth)-t.width){if(r+1<u&&65<=(i=this._text.charCodeAt(r+1))&&i<123)continue;d=Math.max(d,o),o=n,l+=(c?Math.ceil(c*this._lineHeight):0)+a,c=0}}else f+='"'+this._text.charAt(r)+'" ';d=Math.ceil(Math.max(d,o)),l=Math.ceil(l+c+a),this.autoSize&&(this.width=d,this.height=l),this._has_update=!1,v.default.remove(_),y.default.useCanvas&&(this._instance.width=d,this._instance.height=l),p.default.isEmpty(f)||trace("[WARN] _update miss fonts ["+f+"]")}},{key:"render",value:function(){p.default.isEmpty(this._text)||(this._has_update&&this._update(),r(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"render",this).apply(this,arguments))}},{key:"dispose",value:function(){this._instance&&this._instance.removeFromParent(!0),r(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"dispose",this).call(this),delete this.autoSize,this._lineHeight,this._size,this._ct,this._color,this._is_init,this._has_update,this._lineWidth,this._leading,this._text,this._font,this._textAlign,this._instance}},{key:"text",get:function(){return this._text},set:function(t){this._is_init&&this._text!=t&&(this._text=t,this._has_update=!0)}},{key:"font",get:function(){return this._font},set:function(t){this._is_init&&this._font!=t&&(this._font=t,this._fonts=a.default.get(this._font),this._has_update=!0)}},{key:"color",get:function(){return this._color},set:function(t){t=o.default.formatColor(t),this._color!=t&&(this._color=t,this._has_update=!0)}},{key:"leading",get:function(){return this._leading},set:function(t){this._is_init&&this._leading!=t&&(this._leading=t,this._has_update=!0)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){null!=t&&this._lineHeight!=t&&(this._lineHeight=t,this._has_update=!0)}},{key:"size",get:function(){return this._size},set:function(t){this._size==Number(t)||isNaN(t)||(t=Number(t),this.scale=this.scale*l.default.format(t/this._size),this._size=t)}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(t){this._is_init&&this._lineWidth!=t&&(this.width=this._lineWidth=Math.min(100,t),this._has_update=!0)}},{key:"align",get:function(){return this._textAlign},set:function(t){this._is_init&&this._textAlign!=t&&(this._textAlign=t,this._has_update=!0)}}])&&s(u.prototype,c),d&&s(u,d),f);function f(){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return t.mouseEnabled=t.mouseChildren=!1,t._is_init=!1,t.autoSize=!0,t._has_update=!0,t._lineHeight=1,t._lineWidth=0,t._leading=0,t._size=0,t._color="",t._text="",t._font="",t._textAlign="start",t.name="bitmap_text_"+t.name,t._ct=t._fonts=t._instance=null,t}(e.default=_).className="BitmapText"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=u(i(5)),a=u(i(18)),r=u(i(0)),o=u(i(7)),l=u(i(1)),h=u(i(17));function u(t){return t&&t.__esModule?t:{default:t}}var c,d,_,f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,n.default),c=p,(d=[{key:"setup",value:function(t,e){r.default.isEmpty(t)||(this._call_back=e,this._img=new Image,this._img.style.display="none",this._img.onload=l.default.delegate(this._load_handler,this),this._img.onerror=l.default.delegate(this._error_handler,this),this._img.src=t)}},{key:"_load_handler",value:function(){this._img.onload=this._img.onerror=null,this._set_instance(this._img),this._img=null}},{key:"_set_instance",value:function(t){this._instance=o.default.c("do"),this._instance.setInstance(t),h.default,this._instance.origin={x:.5*t.width,y:.5*t.height},this._loop=l.default.delegate(this.play,this),this.addChild(this._instance),this._stage&&this.play(),this._call_back&&(this._call_back(),this._call_back=null)}},{key:"_error_handler",value:function(){trace("[ERROR]LoadingClip loading error by",this._img.src),this._img.onload=this._img.onerror=null,this._img=null}},{key:"play",value:function(){null!=this._instance&&(this._instance.rotation=350<this._instance.rotation?0:this._instance.rotation,a.default.to(this._instance,1/this.speed,{rotation:360,onComplete:this._loop}))}},{key:"stop",value:function(){this._instance&&a.default.remove(this._instance)}},{key:"dispose",value:function(){this.stop(),function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0}(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"dispose",this).call(this),delete this._loop,this._call_back,this._img,this._instance,this.speed}},{key:"stage",get:function(){return this._stage},set:function(t){if(this._stage!=t&&(this._stage=t,this._instance&&this._stage?this.play():this.stop(),!(null==this._children||this._children.length<1)))for(var e=void 0,e=0,i=this._children.length;e<i;e++)this._children[e].stage=t}}])&&s(c.prototype,d),_&&s(c,_),p);function p(t,e){!function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return i._loop=i._call_back=i._img=i._instance=null,t&&("string"==typeof t?i.setup(t,e):i._set_instance(t)),i.speed=1,i}(e.default=f).className="LoadingClip"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=v(i(5)),a=v(i(43)),r=v(i(18)),o=v(i(8)),l=v(i(37)),h=v(i(26)),u=v(i(47)),c=v(i(7)),d=v(i(28)),_=v(i(1)),f=v(i(36)),p=v(i(4));function v(t){return t&&t.__esModule?t:{default:t}}var y,g,m,b=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(O,n.default),y=O,(g=[{key:"setup",value:function(t,e,i,s,n){this.w=t,this.h=e,this.tf_obj=s,this.setSize(t,e),this.item_height=i,this.multiSelection=1==n,s&&(this.common_color=s.color),this.multiSelection&&(this.selectedList=[]),_.default.isPC&&(this.time=.5),this._handler=_.default.delegate(this._click_item,this)}},{key:"_mouse_wheel",value:function(t){var e,i,s=0<t.delta;!s&&this.container.y<=this.h-this.container.height||s&&0<=this.container.y||(e=this.container.y+(s?this.item_height:-this.item_height),e=s?Math.min(0,e):Math.max(this.h-this.container.height,e),i=Math.abs(this.container.y-e)/this.speed,r.default.remove(this.container),r.default.to(this.container,i,{y:e}))}},{key:"addItem",value:function(t){var e;t&&((e=new f.default).instance=c.default.c("bs",[this.bg_color,this.w-2,this.item_height-2,0,1,this.line_color]),e.setup([c.default.c("ef",[d.default.COLOR,this.bg_color,this.time])],[c.default.c("ef",[d.default.COLOR,this.over_color,this.time])],[c.default.c("ef",[d.default.COLOR,this.disable_color,this.time])]),this.tf_obj.width=this.tf_obj.size*t.label.length,this.tf_obj.height=this.tf_obj.size+1,this.tf_obj.text=t.label,this.tf_obj.y=.5*(this.item_height-this.tf_obj.height),this.tf_obj.x=.5*(this.w-this.tf_obj.width),e.setLabel(this.tf_obj,this.over_ft_color,this.disable_ft_color),e.data=t.value,e.bool=!1,this.container.addChild(e),l.default.tile(this.container._children,1,!1),this.container.height=this.container.numChildren*this.item_height,e.addEventListener(o.default.MOUSE_TAP,this._handler))}},{key:"_click_item",value:function(t){if(t){var e,i=t instanceof f.default?t:t.target;if(this.multiSelection)return i.bool?(0<=(e=this.selectedList.indexOf(i))&&this.selectedList.splice(e,1),i.setupState([c.default.c("ef",[d.default.COLOR,this.bg_color,this.time])],f.default.state.UP),i.out_color=this.common_color):(this.selectedList.push(i),i.setupState([c.default.c("ef",[d.default.COLOR,this.over_color,this.time])],f.default.state.UP),i.out_color=i.over_color),i.state=null,i.bool=!i.bool,void i.setState(f.default.state.UP);this.selected=i,this.dispatchEvent(new p.default(O.CHANGE,i.data,i.tf.text))}}},{key:"size",value:function(e,t){this.container&&this.container.numChildren&&(h.default.each(this.container._children,function(t){t.instance.width=e,t.tf.x=.5*(e-this.tf_obj.size*t.tf.text.length)},this),this.control&&this.control.updateSizeInArea(e,t))}},{key:"clear",value:function(){this.container&&(this.container.removeFromParent(!0),this.control&&this.control.dispose(),this.container=this.control=null)}},{key:"dispose",value:function(){this.clear(),function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0}(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"dispose",this).call(this),delete this.speed,this.useWheel,this.disable_ft_color,this.over_ft_color,this.line_color,this.disable_color,this.over_color,this.bg_color,this.canPush,this.item_height,this.w,this.h,this._handler,this.control,this._selected,this.container,this.tf_obj,this._datas}},{key:"selected",get:function(){return this.multiSelection?this.selectedList:this._selected},set:function(e){if(this.multiSelection){if(!this.container||!this.container.numChildren)return;var i=!e||!e.length;h.default.each(this.container._children,function(t){(i&&t.bool||!i&&(!t.bool&&0<=e.indexOf(t.data)||t.bool))&&this._click_item(t)},this)}else this._selected!=e&&(this._selected&&(this._selected.enable=!0),(this._selected=e)&&(this._selected.enable=!1))}},{key:"data",get:function(){return this._datas},set:function(t){var e;(this._datas=t)&&t.length?(this.container||(e=!this.canPush&&this.h/this.item_height>=t.length,this.container=c.default.c("dc"),e||(this.control=new u.default,this.control.instance=this.container,this.control.setDimension(this.w,this.h,a.default.isY,!0,!0)),this.addChild(this.control?this.control:this.container),_.default.isPC&&this.useWheel&&(this.container.mouseEnabled=!0,this.container.addEventListener(o.default.MOUSE_WHEEL,_.default.delegate(this._mouse_wheel,this)))),h.default.each(this._datas,function(t){this.addItem(t)},this)):this.clear()}}])&&s(y.prototype,g),m&&s(y,m),O);function O(){!function(t){if(!(t instanceof O))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(O.__proto__||Object.getPrototypeOf(O)).call(this));return t.disable_ft_color="#D5D5D5",t.over_ft_color="#000000",t.line_color="#D6D6D6",t.disable_color="#E0E0E0",t.over_color="#D8D8D8",t.bg_color="#F2F2F2",t.speed=300,t.canPush=!1,t.useWheel=!0,t.multiSelection=!1,t.common_color=t.selectedList=null,t.item_height=t.w=t.h=t.time=0,t._handler=t.control=t._selected=t.container=t.tf_obj=t._datas=null,t}(e.default=b).className="List",b.CHANGE="list_select_change"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=v(i(5)),a=v(i(18)),r=v(i(8)),o=v(i(37)),l=v(i(10)),h=v(i(47)),u=v(i(35)),c=v(i(7)),d=v(i(71)),_=v(i(36)),f=v(i(1)),p=v(i(4));function v(t){return t&&t.__esModule?t:{default:t}}var y,g,m,b=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(O,n.default),y=O,(g=[{key:"select",value:function(t){if(null==t||!this._init||null==this._datas||this._datas.length<1)return!1;for(var e,i=0,s=this._datas.length;i<s;i++)if((e=this._datas[i])&&e.datas==t)return this.current=e.index-1,!0;return!1}},{key:"initialize",value:function(){var t,e,i;this._init||(this._init=!0,this._datas=[],this._list=c.default.c("dc"),this._container=c.default.c("dc"),this._container.setSize(this._list_width-2*this.bar_width,this._list_height),this._control=new h.default,this._control.setDimension(this._list_width-2*this.bar_width,this._list_height,UIOrientation.isY,!0,!1),this._control.instance=this._container,this._list.addChild(this._control),t=c.default.c("bs"),e=c.default.c("bs"),t.setup("#999999",2*this.bar_width,this._list_height,this.bar_width),e.setup("#E0E0E0",2*this.bar_width,this.bar_width),this._bar=new d.default,this._bar.setup(this._container,this._control.mask,t,e,!0,!0,{x:this._control.x,y:this._control.y}),this._list.addChild(this._bar),this._sprite=new u.default,this._sprite.addChild(this._list),this._sprite.mask=new l.default(0,0,this._list_width,this._list_height),this.addChild(this._sprite),this._tf=c.default.c("tf",{text:"",size:this.font_size,color:"#666666",font:this.text_font}),this._tf.width=this._tf.lineWidth=this._list_width-this._btn.getWidth(),this._tf.height=this._btn_height,(i=c.default.c("bs",["#FFFFFF",this._tf.width,this._tf.height])).alpha=0,this._btn.addChild(i),i.moveTo(-this._tf.width,.5*(this._tf.height-(this.font_size+4))),this.addChild(this._btn),this.moveTo(this._btn.x,this._btn.y),this._btn.moveTo(this._tf.width,0),this._sprite.moveTo(0,this._tf.height),this._btn._updateSize(),this._tf.moveTo(0,.5*(this._tf.height-(this.font_size+4))),this.addChild(this._tf),this._list.mouseEnabled=!0,this._list.addEventListener(r.default.MOUSE_OVER,f.default.delegate(this._stopCountTime,this),this.name),this._list.addEventListener(r.default.MOUSE_OUT,f.default.delegate(this._startCountTime,this),this.name),this._btn.addEventListener(r.default.MOUSE_CLICK,f.default.delegate(this._onClickHandler,this),this.name),this._btn.addEventListener(r.default.MOUSE_OVER,f.default.delegate(this._stopCountTime,this),this.name),this._btn.addEventListener(r.default.MOUSE_OUT,f.default.delegate(this._startCountTime,this),this.name),this._sprite.visible=!1)}},{key:"_onClickHandler",value:function(){this._sprite.visible?this._closeList():this._openList()}},{key:"setup",value:function(t,e,i,s,n){if(this._btn=s,this._list_width=e,this._list_height=i,this._btn_height=s.getHeight(),this._current=null==n?0:n,this._init||this.initialize(),!(null==t||null==t.length||t.length<1)){for(var a=0,r=t.length;a<r;a++)this.addItem(t[a],!1);this._refresh(),this.current=this._current}}},{key:"addItem",value:function(t,e){var i,s,n,a;null!=t&&(null==this.item_rect&&(this.item_rect=new l.default(0,0,this._list_width-2*this.bar_width,this.item_height)),i=t.hasOwnProperty("value")||t.value?t.value:t,s=t.hasOwnProperty("label")||t.label?t.label:i,n=new _.default,(a=c.default.c("bs")).setup(this.item_bg_color,this._list_width-2*this.bar_width,this.item_height,0,1,this.item_frame_color),n.instance=a,n.setup([c.default.c("ef",[Effect.COLOR,this.item_bg_color,.15])],[c.default.c("ef",[Effect.COLOR,this.item_over_color,.15])]),n.setLabel({text:s,font:this.text_font,color:this.text_normal_color,size:this.font_size},this.text_over_color),n.datas=i,this._container.addChild(n),n.index=this._datas.push(n),n.setSize(a.width,a.height),n.addEventListener(r.default.MOUSE_TAP,f.default.delegate(this._onTapHandler,this),this.name),null==e&&this._refresh())}},{key:"_refresh",value:function(){null==this._datas||this._datas.length<1||(o.default.tile(this._datas,1,!1,this.item_rect),this._container._updateSize(),this._control._recovery_scale(),this._bar.barSync())}},{key:"_onTapHandler",value:function(t){var e=t.target;null!=e&&(this.current=e.index-1,this._closeList())}},{key:"_startCountTime",value:function(){this._sprite.visible&&(0<this._timeID&&clearTimeout(this._timeID),this._timeID=setTimeout(f.default.delegate(this._closeList,this),this.delay_time))}},{key:"_stopCountTime",value:function(){clearTimeout(this._timeID)}},{key:"_openList",value:function(){var t,e,i;this._block||(this._block=!0,t=this.localToGlobal(0,0),this._downspread=this.stage&&this.stage.stageHeight?t.y+this._list_height<this.stage.stageHeight:t.y-this._list_height<0,this._downspread=1==this.spread||0==this.spread&&this._downspread,e=Math.min(this._list_height,this._container.height),i=Math.max(0,this._list_height-this._container.height),this._sprite.visible=!0,this._sprite.moveTo(0,this._downspread?this._btn_height+this.space:-this.space-e-i),this._list.y=this._downspread?-this._list.height:e,a.default.remove(this._list),a.default.to(this._list,.5,{y:this._downspread?0:i,onComplete:f.default.delegate(this._outCompleteHandle,this)}))}},{key:"_closeList",value:function(){this._block||(this._block=!0,this._stopCountTime(),a.default.remove(this._list),a.default.to(this._list,.4,{y:this._downspread?-this._list_height:this._list_height,onComplete:f.default.delegate(this._inCompleteHandle,this)}))}},{key:"_inCompleteHandle",value:function(){this._block=!1,this._sprite.visible=!1,this.dispatchEvent(new p.default(O.SPREAD,!1))}},{key:"_outCompleteHandle",value:function(){this._block=!1,this.dispatchEvent(new p.default(O.SPREAD,!0))}},{key:"dispose",value:function(){this._closeList(),this._stopCountTime(),this._btn&&(this._btn.removeEventListener(r.default.MOUSE_CLICK,null,this.name),this._btn.removeEventListener(r.default.MOUSE_OVER,null,this.name),this._btn.removeEventListener(r.default.MOUSE_OUT,null,this.name)),function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0}(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"dispose",this).call(this),delete this._block,this._value,this._current,this._btn,this._datas,this._tf,this._sprite,this._bar,this._container,this._control,this._list,delete this.text_font,this.item_bg_color,this.item_over_color,this.item_frame_color,this.text_over_color,this.text_normal_color,delete this._btn_height,this._timeID,this._list_width,this._list_height,this._downspread,this._init,this._enable,delete this.spread,this.delay_time,this.item_rect,this.item_height,this.font_size,this.bar_width}},{key:"enable",get:function(){return this._enable},set:function(t){this._init&&(this._enable=t,(this._btn.enable=t)||this._closeList())}},{key:"value",get:function(){return this._value}},{key:"current",get:function(){return this._current},set:function(t){var e,i,s;!this._init||null==t||null==this._datas||t<0||t>=this._datas.length||(e=this._current!=t,(i=this._datas[this._current])&&(i.enable=!0),(s=this._datas[t])&&(s.enable=!1,this._value=s.datas,this._tf.text=s.getLabel()),this._current=t,e&&this.dispatchEvent(new p.default(O.SELECT,this._value)))}}])&&s(y.prototype,g),m&&s(y,m),O);function O(){!function(t){if(!(t instanceof O))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(O.__proto__||Object.getPrototypeOf(O)).call(this));return t._value=t._current=t._btn=t._datas=t._tf=t._sprite=t._bar=t._container=t._control=t._list=null,t._btn_height=t._timeID=t._list_width=t._list_height=0,t._downspread=t._init=t._enable=t._block=!1,t.item_bg_color="#FFFFFF",t.item_over_color="#E6F4AC",t.item_frame_color="#CCCCCC",t.text_font="Microsoft YaHei",t.text_over_color="#666666",t.text_normal_color="#CCCCCC",t.delay_time=1e3,t.item_rect=null,t.item_height=23,t.font_size=16,t.bar_width=4,t.spread=0,t.space=1,t}(e.default=b).SELECT="combo_list_select",b.SPREAD="combo_list_spread",b.className="ComboList"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=y(i(35)),a=y(i(10)),r=y(i(0)),h=y(i(3)),o=y(i(5)),l=y(i(18)),u=y(i(8)),c=y(i(37)),d=y(i(2)),_=y(i(7)),f=y(i(1)),p=y(i(6)),v=y(i(4));function y(t){return t&&t.__esModule?t:{default:t}}var g,m,b,O=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(w,n.default),g=w,(m=[{key:"setup",value:function(t,e,i,s,n,a,r){var o=!(4<arguments.length&&void 0!==n)||n,l=5<arguments.length&&void 0!==a?a:null,h=6<arguments.length&&void 0!==r?r:0;null!=s&&(this._item_class=s,this._portrait=!(0==o),this._base_size=this._portrait?e:t,this._item_size=i,this._list_height=e,this._list_width=t,this._bg_color=l,null!=this._datas&&(this._container&&this.clear(),this.init(h)))}},{key:"clear",value:function(){if(null!=this._datas&&null!=this._list){var t=void 0,e=this._list.length,i=void 0;for(l.default.remove(this._container),t=0;t<e;t++)(i=this._list[t]).removeEventListener(u.default.MOUSE_TAP),i.removeFromParent(!1),d.default.remove(i);this.mask=null,this.removeAllChildren(!0),this._current=this._temp_item=this._hold_rect=this._free_rect=this._container=this._list=null}}},{key:"init",value:function(t){t=null==t?0:t,r.default.isEmpty(this._bg_color)||(this._bg&&this.contains(this._bg)&&this._bg.removeFromParent(!0),this._bg=_.default.c("bs",[this._bg_color,this._list_width,this._list_height]),this._bg.mouseEnabled=!0,this.addChildAt(this._bg,0)),this._middle=Math.ceil(.5*(this._portrait?this._list_height:this._list_width))-Math.floor(.5*this._item_size),this._max_num=Math.ceil((this._portrait?this._list_height:this._list_width)/(this._item_size+this.space))+2,this._length=(this._item_size+this.space)*this._datas.length-this.space,this._is_full=this._datas.length>this._max_num,this._container=new o.default,this.addChild(this._container),this._list=[],this._container.mouseEnabled=!0,this._container.moveTo(this._portrait?0:this._middle,this._portrait?this._middle:0),this.mask=new a.default(0,0,this._list_width,this._list_height),this._free_rect=new a.default(0,0,this._portrait?0:this._length,this._portrait?this._length:0),this._hold_rect=new a.default(0,0,this._portrait?0:this._free_rect.width+this._list_width,this._portrait?this._free_rect.height+this._list_height:0),this._create_list(),0<this._list.length&&(this._temp_item=this._list[0],this._list[0].selected=!0,(this.current=0)<t?this.goto(t,!0):(this._update_items_state(),this.dispatchEvent(new v.default(w.SELECT,this._datas[0])))),this._is_init||(this._is_init=!0,this._complete=f.default.delegate(this.onTweenComplete,this),this.addEventListener(u.default.MOUSE_DOWN,f.default.delegate(this.onMouseDown,this)),this.addEventListener(u.default.MOUSE_WHEEL,f.default.delegate(this.onMouseWheel,this)))}},{key:"onMouseDown",value:function(t){this._has_drag=!1,l.default.remove(this._container),this._start_point=new p.default(t.mouseX,t.mouseY),this.stage.addEventListener(u.default.MOUSE_MOVE,f.default.delegate(this.onMouseMove,this),this.name),this.stage.addEventListener(u.default.MOUSE_UP,f.default.delegate(this.onMouseUp,this),this.name)}},{key:"onMouseMove",value:function(t){var e,i,s=new p.default(t.mouseX,t.mouseY);!this._has_drag&&5<p.default.distance(this._start_point,s)&&(e=this.localToGlobal(this._portrait?0:this._middle,this._portrait?this._middle:0),this._free_rect.x=this._portrait?e.x:e.x-this._length,this._free_rect.y=this._portrait?e.y-this._length:e.y,this._hold_rect.x=this._portrait?this._free_rect.x:Math.ceil(this._free_rect.x-.5*this._list_width),this._hold_rect.y=this._portrait?Math.ceil(this._free_rect.y-.5*this._list_height):this._free_rect.y,this._has_drag=!0,this._is_next=this._portrait?e.y<this._start_point.y:e.x<this._start_point.x,this.stage.startDrag(this._container,this._hold_rect,!1,this._free_rect),this._time=(new Date).getTime(),this._start_point=s),this._has_drag&&(i=this._portrait?"y":"x",this._is_next&&s[i]<=(this._temp_point?this._temp_point:this._start_point)[i]||!this._is_next&&s[i]>=(this._temp_point?this._temp_point:this._start_point)[i]?this._temp_point=s:(this._start_point=this._temp_point=s,this._time=(new Date).getTime(),this._is_next=!this._is_next),this._update_list())}},{key:"onMouseUp",value:function(t){var e,i,s;this.stage.removeEventListener(u.default.MOUSE_MOVE,null,this.name),this.stage.removeEventListener(u.default.MOUSE_UP,null,this.name),this._has_drag=!1,this.stage.stopDrag(),null!=t?(0==(e=(new Date).getTime()-this._time)||null==this._temp_point?this._move_current_item():this._move_list_by_speed(this._portrait?Math.abs(this._start_point.y-this._temp_point.y)/e:Math.abs(this._start_point.x-this._temp_point.x)/e),this._start_point=this._temp_point=this._time=null,(this._portrait?this._container.y>this._middle||this._container.y<this._middle-this._length+this._item_size:this._container.x>this._middle||this._container.x<this._middle-this._length+this._item_size)&&(i=this._portrait?0:this._container.x>this._middle?this._middle:this._container.x<this._middle-this._length+this._item_size?this._middle-this._length+this._item_size:this._container.x,s=this._portrait?this._container.y>this._middle?this._middle:this._container.y<this._middle-this._length+this._item_size?this._middle-this._length+this._item_size:this._container.y:0,l.default.to(this._container,.16,{ease:"easeoutquad",x:i,y:s,onComplete:this._complete}))):this._start_point=this._temp_point=this._time=null}},{key:"_move_list_by_speed",value:function(t){var e,i;null!=t&&(0==t||t<.1?this._move_current_item():(e=h.default.format(t*(this._item_size+this.space)*this.offset),i=Math.max(.1,h.default.format(e*this.offset*.3/this._item_size)),this.moveList(e,i)))}},{key:"moveList",value:function(t,e){if(null!=t&&0!=t){var i=this._portrait?"y":"x",s=(s=(s=Math.ceil((this._container[i]+(this._is_next?-1:1)*t)/(this._item_size+this.space)))*(this._item_size+this.space)-(1<s?this.space+.5*this._item_size:.5*this._item_size))>this._middle?this._middle:s<this._middle-this._length+this._item_size?this._middle-this._length+this._item_size:s;if(0==e)return this._container[i]=s,void this.reset_list();var n={};n[i]=s,n.onComplete=this._complete,n.onUpdate=f.default.delegate(this._update_list,this),l.default.to(this._container,e,n)}}},{key:"onTweenComplete",value:function(){this._update_items_state(),this._move_current_item()}},{key:"onMouseWheel",value:function(t){this._is_next=t.delta<0,l.default.remove(this._container),this._move_list_by_speed(Math.abs(t.delta))}},{key:"onMouseTap",value:function(t){var e=t.target;null!=e&&this.goto(e.index)}},{key:"goto",value:function(t,e){var i,s,n,a;t<0||t>=this._datas.length||this._current==t||(l.default.remove(this._container),i=this._portrait?"y":"x",s=(t+1)*(this._item_size+this.space)-(0<t?this.space:0)+this._container[i]-this._middle-this._item_size,this._is_next=0<s,n=Math.abs(s),a=e?0:Math.max(.1,h.default.format(n*this.offset*.1/this._item_size)),this.moveList(n,a))}},{key:"reset_list",value:function(){if(!(null==this._list||this._list.length<1)){for(var t=void 0,e=void 0,i=this._list.length,s=void 0,n=this._portrait?"y":"x",a=this._container[n],r=0<(r=Math.abs(Math.ceil((this._middle-a+.5*this._item_size)/(this._item_size+this.space))))?r-1:0,o=Math.ceil(.5*this._max_num)-(this._max_num%2==0?0:1),l=r-o,l=(l=r+o>this._datas.length-1?this._datas.length-this._list.length:l)<0?0:l,t=0;t<i;t++)(s=this._list[t]).index=l,s.selected=!1,s.data=this._datas[l],s[n]=l*(this._item_size+this.space),l==r&&(e=t),l++;this._update_items_state(e),this._move_current_item()}}},{key:"_create_list",value:function(){if(!(null==this._datas||this._datas.length<1)){for(var t,e=void 0,i=void 0,s=Math.min(this._datas.length,this._max_num),e=0;e<s;e++)t=this._datas[e],i=d.default.create(this._item_class),this._list.push(i),this._container.addChild(i),i.set(t,this._portrait?this._list_width:this._item_size,this._portrait?this._item_size:this._list_height),i.index=e,i.addEventListener(u.default.MOUSE_TAP,f.default.delegate(this.onMouseTap,this));c.default.tile(this._list,1,!this._portrait,new a.default(0,0,this._portrait?this._list_width:this._item_size,this._portrait?this._item_size:this._list_height),new p.default(this._portrait?0:this.space,this._portrait?this.space:0))}}},{key:"_update_list",value:function(){if(this._update_items_state(),this._is_full){var t=this._is_next?this._list[this._list.length-1]:this._list[0],e=t.index;if(!(this._is_next&&e>=this._datas.length-1||!this._is_next&&e<=0)){var i=this._is_next?this._list[0]:this._list[this._list.length-1],s={x:i.x+this._container.x,y:i.y+this._container.y},n=this._portrait?"y":"x";if(this._is_next){if(s[n]>-this._item_size)return;this._list.shift(),i.index=e+1,i.data=this._datas[i.index],i.selected=i.index==this._current,this._list.push(i),i[n]=t[n]+(this._item_size+this.space)}else{if(s[n]<(this._portrait?this._list_height:this._list_width)+this._item_size)return;this._list.pop(),i.index=e-1,i.data=this._datas[i.index],i.selected=i.index==this._current,i.selected&&(this._temp_item=i),this._list.unshift(i),i[n]=t[n]-(this._item_size+this.space)}}}}},{key:"_update_items_state",value:function(t){if(!(null==this._list||this._list.length<1)){for(var e,i=null==t?this._middle:this._list[t][l]+this._container[l],s=void 0,n=0,a=this._list.length,r=void 0,o=void 0,l=this._portrait?"y":"x",s=0;s<a;s++)r=this._list[s],e=Math.abs(r[l]+this._container[l]-i),0==s?o=e:e<o&&(o=e,n=s),r.update(h.default.format((this._middle-e)/this._middle));n=null==t?n:t,this.current=this._list[n].index,this._temp_item=this._list[n],this._list[n].selected=!0}}},{key:"_move_current_item",value:function(){var t=this._portrait?"y":"x",e=this._temp_item[t]+this._container[t]-this._middle;this._container[t]-=e,this.dispatchEvent(new v.default(w.SELECT,this._datas[this._current]))}},{key:"dispose",value:function(){this.clear(),function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0}(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"dispose",this).call(this),delete this._bg_color,this.space,this.offset,this.mouseEnabled,this._portrait,this._is_init,this._is_next,this._has_drag,this._is_full,this._temp_item,this._bg,this._temp_point,this._time,this._start_point,this._complete,this._length,this._hold_rect,this._free_rect,this._current,this._middle,this._list,this._container,this._max_num,this._max_num,this._item_class,this._list_width,this._list_height,this._item_size,this._datas}},{key:"data",get:function(){return this._datas},set:function(t){this._datas==t&&this._container||(this._datas=t,null!=this._list_height&&null!=t&&(this._container&&this.clear(),this.init()))}},{key:"listWidth",get:function(){return this._list_width},set:function(t){if(null!=t&&this._list_width!=t&&(this._list_width=t,!(null==this._list||this._list.length<1)))if(this._portrait){for(var e in this._bg&&(this._bg.width=this._list_width),this._list)this._list[e].itemWidth=this._list_width;this.mask=new a.default(0,0,this._list_width,this._list_height)}else{var i=this._current;this.clear(),this.init(i)}}},{key:"listHeight",get:function(){return this._list_height},set:function(t){if(null!=t&&this._list_height!=t&&(this._list_height=t,!(null==this._list||this._list.length<1)))if(this._portrait){var e=this._current;this.clear(),this.init(e)}else{for(var i in this._bg&&(this._bg.height=this._list_height),this._list)this._list[i].itemHeight=this._list_height;this.mask=new a.default(0,0,this._list_width,this._list_height)}}},{key:"current",get:function(){return this._current},set:function(t){this._current!=t&&(null!=this._current&&this._temp_item&&(this._temp_item.selected=!1),this._current=t)}}])&&s(g.prototype,m),b&&s(g,b),w);function w(){!function(t){if(!(t instanceof w))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return t.space=0,t.offset=1,t.mouseEnabled=!0,t._portrait=!0,t._is_init=t._is_next=t._has_drag=t._is_full=!1,t._bg_color=t._base_size=t._temp_item=t._bg=t._temp_point=t._time=t._start_point=t._complete=t._length=t._hold_rect=t._free_rect=t._current=t._middle=t._list=t._container=t._max_num=t._max_num=t._item_class=t._list_width=t._list_height=t._item_size=t._datas=null,t}(e.default=O).SELECT="stl_select_item",O.className="ScrollTouchList"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=y(i(5)),a=y(i(12)),o=y(i(0)),l=y(i(2)),h=y(i(15)),u=y(i(3)),c=y(i(27)),d=y(i(7)),_=y(i(20)),f=y(i(32)),p=y(i(1)),v=y(i(4));function y(t){return t&&t.__esModule?t:{default:t}}var g,m,b,O=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(w,n.default),g=w,(m=[{key:"setup",value:function(t,e,i,s,n){if(!t)return this;this._vo&&this._vo instanceof _.default&&(t&&this._vo.type!=t.type&&this.instance.element&&(this.instance.element=null),l.default.remove(this._vo)),this._vo=t;var a=this._vo.properties.style||{};return delete this._vo.properties.style,this._thickness=0!=i&&(i||a.strokeWidth)||0,this._stroke=this._format_color(s)||a.stroke||"#000000",this._fill_alpha=null==n?a.fillOpacity||a.opacity||this._fill_alpha:n,null==this.instance?(this.instance=d.default.c("do",null,this.use_canvas),this.instance.hide_over=!1,this.addChild(this.instance)):this.instance.moveTo(0,0),this._vo.rect&&(this._rect=this._vo.rect.clone(),this.setSize(this._rect.width,this._rect.height)),this._color=this._format_color(e)||a.fill||"#FFFFFF",this.resize=!0,this}},{key:"_format_color",value:function(t){if(!(t&&t instanceof f.default))return t;if(this.use_canvas)return h.default.getGradientColor(t);if(null==this.instance||null==this.instance.element)return t;var e=this.instance.element.getElementsByTagName("defs")[0];null==e&&(e=c.default.create("defs"),this.instance.element.appendChild(e));var i=this.instance.element.getElementById(this.name+"_gradient");i&&i.parentNode&&i.parentNode.removeChild(i);var s={id:this.name+"_gradient"};0==t.type?(s.x1=u.default.int(100*t.xStart/t.radiusStart)+"%",s.y1=u.default.int(100*t.yStart/t.radiusEnd)+"%",s.x2=u.default.int(100*t.xEnd/t.radiusStart)+"%",s.y2=u.default.int(100*t.yEnd/t.radiusEnd)+"%"):(s.fx=u.default.int(100*t.xStart/(2*t.radiusEnd))+"%",s.fy=u.default.int(100*t.yStart/(2*t.radiusEnd))+"%",s.cx=u.default.int(100*t.xEnd/(2*t.radiusEnd))+"%",s.cy=u.default.int(100*t.yEnd/(2*t.radiusEnd))+"%",s.r=u.default.int(2*t.radiusStart*100/t.radiusEnd)+"%"),i=c.default.create(0==t.type?"linearGradient":"radialGradient",s);for(var n,a=void 0,r=t.offsetlist.length,a=0;a<r;a++)n=c.default.create("stop",{offset:t.offsetlist[a],"stop-color":t.colorList[a]}),i.appendChild(n);return e.appendChild(i),"url(#"+this.name+"_gradient)"}},{key:"redraw",value:function(){var t,e;if(this.__checkDisplayUpdate(),this.instance.width=this.width,this.instance.height=this.height,this.use_canvas&&this.instance.graphics)return 0<this._thickness?this.instance.graphics.lineStyle(this._thickness,this._stroke):this.instance.graphics.stroke_style=null,this._pattern?(t=this.instance.graphics).beginBitmapFill.apply(t,function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(this._pattern)):this.instance.graphics.beginFill(this._color,this._fill_alpha),this.instance.graphics.drawShape(this._vo),void this.instance.graphics.endFill();c.default.supported&&(e=void 0,null==this.instance.element?(this.instance.element=c.default.create("svg",{style:{width:this.width+"px",height:this.height+"px"}}),e=c.default.create(this._vo.type,this._vo.properties),this.instance.element.appendChild(e)):(e=this.instance.element.getElementsByTagName(this._vo.type)[0],this._vo.properties&&c.default.setAttributes(e,this._vo.properties)),e.style.stroke=this._stroke,e.style.strokeWidth=this._thickness,e.style.fillOpacity=this._fill_alpha,e.style.fill=this._pattern?"url(#"+this._pattern.id+")":this._format_color(this._color),e.setAttribute("stroke-dasharray",o.default.isEmpty(this._dash)?"":this._dash),this._parent&&this._parent.autoSize&&this._parent._updateSize())}},{key:"clone",value:function(){var t,e=l.default.create(w);return e.param=this.param,this.origin&&(e.origin=this.origin.clone()),e.setup(this._vo.clone(),this._color,this._thickness,this._stroke,this._fill_alpha),e._dash=this._dash,this._pattern&&!o.default.isEmpty(this._pattern_src)&&((t=new Image).onload=function(){this.onload=null,e.pattern=t},t.src=this._pattern_src),e}},{key:"render",value:function(){this.resize&&this.redraw(),r(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"render",this).apply(this,arguments),this.resize=!1}},{key:"reset",value:function(){this._vo&&l.default.remove(this._vo),this._rect&&l.default.remove(this._rect),this._rect=this._vo=this._pattern_src=this._stroke=this.pattern=this._color=null,this.instance&&(this.instance.removeFromParent(!0),this.instance=null),r(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"reset",this).call(this),this._dash=null,this._thickness=0,this._fill_alpha=1,this.autoSize=!0,this.repeat="repeat",this.mouseChildren=!1,this.use_canvas=p.default.useCanvas}},{key:"dispose",value:function(){r(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"dispose",this).call(this),delete this.use_canvas,this._dash,this._rect,this._vo,this._pattern_src,this._fill_alpha,this._thickness,this._stroke,this._color,this._pattern,this.repeat}},{key:"toString",value:function(){return w.name}},{key:"pattern",get:function(){return this._pattern},set:function(t){var e,i,s;this._pattern&&this._pattern.parentNode&&this._pattern.parentNode.removeChild(this._pattern),this.resize=!0,this.__checkDisplayUpdate(),(this._pattern_src=this._pattern=null)!=t&&t instanceof Image&&(this._pattern_src=t.src,e=c.default.supported,0==this._fill_alpha&&(this._fill_alpha=1),this._pattern=t?this.use_canvas?[t,this.repeat,this._fill_alpha]:e?c.default.create("pattern",{id:this.name+"_pattern",width:t.width,height:t.height,patternUnits:"userSpaceOnUse"}):t:t,null==this.instance.element&&this.redraw(),t&&!this.use_canvas&&e&&this.instance.element&&((i=c.default.create("image",{x:0,y:0,width:t.width,height:t.height})).setAttributeNS(c.default.xlink,"href",t.src),this._pattern.appendChild(i),null==(s=this.instance.element.getElementsByTagName("defs")[0])&&(s=c.default.create("defs"),this.instance.element.appendChild(s)),s.appendChild(this._pattern)))}},{key:"resize",set:function(t){t&&this._resize!=t&&(this.use_canvas&&this.instance&&this.instance.graphics.reset(),this.dispatchEvent(new v.default(a.default.RESIZE)),this.__checkDisplayUpdate()),this._resize=t},get:function(){return this._resize}},{key:"dash",get:function(){return this._dash},set:function(t){t!=this._dash&&(this._dash=t,this.resize=!0)}},{key:"color",get:function(){return this._color},set:function(t){this.pattern=null,"string"==typeof t&&o.default.isEmpty(t)?this._fill_alpha=0:0==this._fill_alpha&&(this._fill_alpha=1),null!=t&&this._color!=t&&(this._color=this._format_color(t))}},{key:"strokeColor",get:function(){return this._stroke},set:function(t){null!=t&&t!=this._stroke&&(o.default.isEmpty(t)?this.thickness=0:0==this.thickness&&(this.thickness=1),this._stroke=this._format_color(t),this.resize=!0)}},{key:"thickness",get:function(){return this._thickness},set:function(t){null!=t&&t!=this._thickness&&(this._thickness=t,this.resize=!0)}}])&&s(g.prototype,m),b&&s(g,b),w);function w(){!function(t){if(!(t instanceof w))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return t._thickness=0,t._fill_alpha=1,t._dash=t._rect=t._vo=t.instance=t._stroke=t._pattern=t._pattern_src=t._color=null,t.use_canvas=p.default.useCanvas,t.mouseChildren=!1,t.repeat="repeat",t}(e.default=O).className="Shape"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,e,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,e);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:r(n,e,i)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(i):void 0}var n=v(i(5)),a=v(i(42)),o=v(i(18)),l=v(i(8)),h=v(i(2)),u=v(i(9)),c=v(i(10)),d=v(i(7)),_=v(i(6)),f=v(i(1)),p=v(i(4));function v(t){return t&&t.__esModule?t:{default:t}}var y,g,m,b=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(O,n.default),y=O,(g=[{key:"setup",value:function(t){t&&u.default.copyAttribute(this,t,!0),this.bottom?(this.bottom.setSize(this.length+2*this.space,2*(this.redius+this.space)),this.bottom.redius=this.redius+this.space,this.bottom.color=this.bg_color):(this.bottom=d.default.c("bs",[this.bg_color,this.length+2*this.space,2*(this.redius+this.space),this.redius+this.space]),this.addChild(this.bottom),this.bottom.mouseEnabled=!0,this.bottom.addEventListener(l.default.MOUSE_TAP,f.default.delegate(this.change_handler,this))),this.middle?(this.middle.setSize(this.length+2*this.space,2*(this.redius+this.space)),this.middle.redius=this.redius+this.space,this.middle.color=this.md_color):(this.middle=this.bottom.clone(),this.middle.color=this.md_color,this.middle.mouseEnabled=!1,this.addChild(this.middle)),this.bar?(this.bar.setSize(2*this.redius,2*this.redius),this.bar.redius=this.redius,this.bar.color=this.color):(this.bar=d.default.c("bs",[this.color,2*this.redius,2*this.redius,this.redius]),this.addChild(this.bar),this.bar.buttonMode=this.bar.mouseEnabled=!0,this.bar.addEventListener(l.default.MOUSE_DOWN,f.default.delegate(this.mouse_handler,this))),this.bar.y=this.redius+this.space,this.bar.origin={x:this.redius,y:this.redius},!this.shadow&&this.has_shadow?this.shadow=new a.default(1,30,.3*this.redius,this.sd_color,1,this.redius):this.shadow=null,this.shadow&&this.bar.instance.filters&&this.bar.instance.filters.indexOf(this.shadow)<0?this.bar.instance.filters=[this.shadow]:this.shadow||(this.bar.instance.filters=[]),this.sync_data(),this.setSize(this.length+2*this.space,2*(this.redius+this.space))}},{key:"change_handler",value:function(){this.lock||(this.value=!this.bool)}},{key:"mouse_handler",value:function(t){this.stage&&!this.lock&&(this.point||(this.point=h.default.create(_.default)),this.point.set(t.mouseX,t.mouseY),this.is_open=!this.bool,this.is_drag=!1,this.lock=!0,this.stage.addEventListener(l.default.MOUSE_UP,f.default.delegate(this.mouse_up,this),this.name),this.stage.addEventListener(l.default.MOUSE_MOVE,f.default.delegate(this.mouse_move,this),this.name))}},{key:"mouse_move",value:function(t){this.point2||(this.point2=h.default.create(_.default));var e,i,s=this.point2.x;this.point2.set(t.mouseX,t.mouseY),!this.is_drag&&_.default.distance(this.point,this.point2)>this.drag_rate?(e=this.localToGlobal(this.space+this.redius,this.space+this.redius),i=this.localToGlobal(this.length+this.space-this.redius,this.space+this.redius),this.hold_rect||(this.hold_rect=new c.default),this.hold_rect.data={x:e.x,y:e.y,width:Math.abs(i.x-e.x)},this.stage.startDrag(this.bar,this.hold_rect),this.middle.visible=!0,this.is_drag=!0):this.is_drag&&(this.is_open=this.point2.x>=s,this._change_middle())}},{key:"mouse_up",value:function(){this.stage.removeEventListener(l.default.MOUSE_UP,null,this.name),this.stage.removeEventListener(l.default.MOUSE_MOVE,null,this.name),this.lock=!1,this.is_drag?(this.stage.stopDrag(),this.bool==this.is_open?this.sync_data(!0):this.value=this.is_open):this.change_handler()}},{key:"_change_middle",value:function(){this.middle.width=this.redius+this.bar.x+this.space}},{key:"sync_data",value:function(t){var e=this.bool?this.length+this.space-this.redius:this.space+this.redius;if(!t||e==this.bar.x)return this.bar.x=e,void(this.middle.visible=this.bool);this.lock=!0,this.middle.visible=!0,o.default.remove(this.bar),o.default.to(this.bar,Math.abs(e-this.bar.x)/this.speed,{x:e,onUpdate:f.default.delegate2(this._change_middle,this),onCompleteParams:[this],onComplete:function(t){t.lock=!1,t.bool?t.middle.width=t.bottom.width:t.middle.visible=!1}})}},{key:"reset",value:function(){this.space=2,this.redius=20,this.length=85,this.lock=!1,this.bool=!1,this.speed=1e3,this.drag_rate=5,this.has_shadow=!0,this.color="#FFFFFF",this.bg_color="#666666",this.sd_color="#000000",this.md_color="#FFF888",this.is_drag=this.is_open=!1,this.hold_rect=this.point=this.point2=this.shadow=this.middle=this.bottom=this.bar=null,r(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"reset",this).call(this)}},{key:"dispose",value:function(){r(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"dispose",this).call(this),point&&h.default.remove(point),point2&&h.default.remove(point2),delete this.drag_rate,this.hold_rect,this.lock,this.point,this.point2,this.space,this.redius,this.length,this.bool,this.speed,this.has_shadow,this.color,this.bg_color,this.sd_color,this.shadow,this.bottom,this.bar}},{key:"value",get:function(){return this.bool},set:function(t){this.bool!=t&&(this.bool=t,this.bottom&&(this.sync_data(!0),this.dispatchEvent(new p.default(O.CHANGE,this.bool))))}}])&&s(y.prototype,g),m&&s(y,m),O);function O(){!function(t){if(!(t instanceof O))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(O.__proto__||Object.getPrototypeOf(O)).call(this));return t.space=2,t.redius=20,t.length=85,t.lock=!1,t.bool=!1,t.speed=1e3,t.drag_rate=5,t.has_shadow=!0,t.color="#FFFFFF",t.bg_color="#666666",t.sd_color="#000000",t.md_color="#FFF888",t.is_drag=t.is_open=!1,t.hold_rect=t.point=t.point2=t.shadow=t.middle=t.bottom=t.bar=null,t}(e.default=b).CHANGE="switch_button_change",b.className="SwitchButton"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=_(i(5)),a=_(i(8)),r=_(i(12)),o=_(i(3)),l=_(i(7)),h=_(i(1)),u=_(i(48)),c=_(i(10)),d=_(i(6));function _(t){return t&&t.__esModule?t:{default:t}}var f,p,v,y=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(g,n.default),f=g,(p=[{key:"_init_transformer",value:function(){this._clear_transformer(),null==this._canvas&&(this._canvas=l.default.c("bs")),this._canvas.setup("#FFFFFF",this._target.width,this._target.height,0,0,0,0),this.contains(this._canvas)||this.addChild(this._canvas),this._canvas.mouseEnabled=!0,this._canvas.breakTouch=!0,this._canvas.addEventListener(a.default.MOUSE_DOWN,h.default.delegate(this._drag_mouse_down,this),this.name),this._canvas.matrix=this._target.matrix,this.wheel&&this._canvas.addEventListener(a.default.MOUSE_WHEEL,h.default.delegate(this._mouse_wheel_handle,this),this.name)}},{key:"_mouse_wheel_handle",value:function(t){var e=this._canvas.scaleX+.1*t.delta,i=this._canvas.globalToLocal(t.mouseX,t.mouseY);this.limit_scale&&(e=o.default.clamp(e,this.limit_scale.min,this.limit_scale.max)),this._canvas.scale=e,i=this._canvas.localToGlobal(i);var s=new d.default(o.default.format(this._canvas.x+t.mouseX-i.x),o.default.format(this._canvas.y+t.mouseY-i.y));this.limit_rect&&(s=c.default.innerPoint(this._count_limit_area(),s)),this._canvas.moveTo(s),u.default.copyTransform(this._canvas,this._target)}},{key:"sync",value:function(){this._canvas&&this._target&&u.default.copyTransform(this._target,this._canvas)}},{key:"_drag_mouse_down",value:function(t){this._double_finger=2==t.length,this._double_finger?(this._point1=t.touchs[0],this._point2=t.touchs[1],this._target_scaleX=this._canvas.scaleX,this._target_scaleY=this._canvas.scaleY,this._target_rotation=this._canvas.rotation,this._target_angle=o.default.getAngle(this._point1.mouseX,this._point1.mouseY,this._point2.mouseX,this._point2.mouseY),this._center=new d.default(.5*(this._point1.mouseX+this._point2.mouseX),.5*(this._point1.mouseY+this._point2.mouseY)),this._center=this._canvas.globalToLocal(this._center.x,this._center.y),this._target_distance=Math.sqrt((this._point1.mouseX-this._point2.mouseX)*(this._point1.mouseX-this._point2.mouseX)+(this._point1.mouseY-this._point2.mouseY)*(this._point1.mouseY-this._point2.mouseY))):((this.stage?this.stage:Stage.current).startDrag(this._canvas,this.limit_rect?this._count_limit_area():null),this._point1=this._point2=null),(this.stage?this.stage:Stage.current).addEventListener(a.default.MOUSE_UP,h.default.delegate(this._drag_mouse_up,this),this.name),(this.stage?this.stage:Stage.current).addEventListener(a.default.MOUSE_MOVE,h.default.delegate(this._drag_mouse_move,this),this.name)}},{key:"_drag_mouse_move",value:function(t){if(this._double_finger){if(2==t.length){if(this._point1.id!=t.touchs[0].id&&this._point2.id!=t.touchs[1].id&&this._point1.id!=t.touchs[1].id&&this._point2.id!=t.touchs[0].id)return;var e;this._point1.id!=t.touchs[0].id?(this._point1=t.touchs[1],this._point2=t.touchs[0]):(this._point1=t.touchs[0],this._point2=t.touchs[1]),this.rotate&&(e=o.default.getAngle(this._point1.mouseX,this._point1.mouseY,this._point2.mouseX,this._point2.mouseY),this._canvas.rotation=o.default.format(this._target_rotation+o.default.getDegreesFromRadians(e-this._target_angle)));var i,s,n=void 0,a=void 0,r=void 0,n=a=Math.sqrt((this._point1.mouseX-this._point2.mouseX)*(this._point1.mouseX-this._point2.mouseX)+(this._point1.mouseY-this._point2.mouseY)*(this._point1.mouseY-this._point2.mouseY))/this._target_distance;n=o.default.format(this._target_scaleX*n),a=o.default.format(this._target_scaleY*a),this.limit_scale&&(n=o.default.clamp(n,this.limit_scale.min,this.limit_scale.max),a=o.default.clamp(a,this.limit_scale.min,this.limit_scale.max)),this._canvas.scaleX=n,this._canvas.scaleY=a,i=this._canvas.localToGlobal(this._center.x,this._center.y),s=new d.default(.5*(this._point1.mouseX+this._point2.mouseX),.5*(this._point1.mouseY+this._point2.mouseY)),r=new d.default(o.default.format(this._canvas.x+s.x-i.x),o.default.format(this._canvas.y+s.y-i.y)),this.limit_rect&&(r=c.default.innerPoint(this._count_limit_area(),r)),this._canvas.moveTo(r),u.default.copyTransform(this._canvas,this._target)}}else this._target.moveTo(this._target.parent.globalToLocal(this._canvas.localToGlobal(0,0)))}},{key:"_count_limit_area",value:function(){var t=this._canvas.getHeight(),e=this._canvas.getWidth(),i=new c.default,s=e>this.limit_rect.width,n=e>this.limit_rect.height;return i.x=s?this.limit_rect.right-e:this.limit_rect.x,i.y=n?this.limit_rect.bottom-t:this.limit_rect.y,i.width=Math.abs(this.limit_rect.width-e),i.height=Math.abs(this.limit_rect.height-t),i}},{key:"_drag_mouse_up",value:function(){this._double_finger||(this.stage?this.stage:Stage.current).stopDrag(),(this.stage?this.stage:Stage.current).removeEventListener(a.default.MOUSE_UP,null,this.name),(this.stage?this.stage:Stage.current).removeEventListener(a.default.MOUSE_MOVE,null,this.name),this._target_scaleX=this._target_scaleY=this._target_distance=this._target_rotation=this._target_angle=this._center=this._point1=this._point2=null}},{key:"_clear_transformer",value:function(){this._canvas&&(this.contains(this._canvas)&&this._canvas.removeFromParent(!1),this._canvas.removeEventListener(a.default.MOUSE_DOWN,null,this.name),this._canvas.removeEventListener(a.default.MOUSE_WHEEL,null,this.name)),this._drag_mouse_up(null)}},{key:"dispose",value:function(){(function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0})(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"dispose",this).call(this),this.target=null,delete this.limit_rect,this.limit_scale,this.wheel,this._canvas,this._target,this.rotate,this._target_scaleX,this._target_scaleY,this._target_distance,this._target_rotation,this._target_angle,this._center,this._point1,this._point2}},{key:"target",get:function(){return this._target},set:function(t){this._target=t,this._target&&this._target instanceof r.default?this._init_transformer():this._clear_transformer()}}])&&s(f.prototype,p),v&&s(f,v),g);function g(){!function(t){if(!(t instanceof g))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return t.limit_rect=t.limit_scale=t._target_scaleX=t._target_scaleY=t._target_angle=t._target_rotation=t._target_distance=t._center=t._point1=t._point2=t._double_finger=t._canvas=t._target=null,t.wheel=t.rotate=t.mouseEnabled=!0,t}(e.default=y).className="TouchScale"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=y(i(5)),a=y(i(12)),r=y(i(8)),o=y(i(73)),l=y(i(1)),h=y(i(6)),u=y(i(74)),c=y(i(48)),d=y(i(3)),_=y(i(2)),f=y(i(22)),p=y(i(7)),v=y(i(4));function y(t){return t&&t.__esModule?t:{default:t}}var g,m,b,O=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(w,n.default),g=w,(m=[{key:"setup",value:function(t,e,i,s){var n=3<arguments.length&&void 0!==s?s:"#888888";this._btn=e||u.default.getButton(this.round),this._redraw=Boolean(i),this._color=n,this.target=t}},{key:"update_relative_data",value:function(t){this._target&&this._target.parent&&(this.relative_data=this._target.parent.getMatrix().applyDisplay(),this.relative_data.radians=d.default.getRadiansFromDegrees(this.relative_data.rotation),t||this.sync_display())}},{key:"sync_display",value:function(){this._target&&this._target.parent&&(c.default.copyTransform(this._target,this._canvas,this.relative_data,!0),this._btn.moveTo(this.globalToLocal(this._canvas.localToGlobal(this._point.x,this._point.y))),this._canvas.thickness=2*this.lineWidth/(this._canvas.scaleX+this._canvas.scaleY),this._canvas.resize=!0)}},{key:"_update_target_size",value:function(){this._target_rect=this._target.getBounds(this._target),this.adjust_pos&&this.adjust_pos.x&&(this._target_rect.x+=this.adjust_pos.x),this.adjust_pos&&this.adjust_pos.y&&(this._target_rect.y+=this.adjust_pos.y),null==this._canvas&&(this._canvas=p.default.c("bs")),this._canvas.setup("#FFFFFF",this._target.width,this._target.height,0,this._redraw?this.lineWidth:0,this._color,0),l.default.useCanvas&&this._canvas.instance.moveTo(.5*-this.lineWidth,.5*-this.lineWidth),this._point||(this._point=_.default.create(h.default)),this._point.set(this._target_rect.x+this._target_rect.width,this._target_rect.y+this._target_rect.height),this._center||(this._center=_.default.create(h.default)),this._center.set(this._target_rect.x+this._target_rect.width*this.pos_percent.x,this._target_rect.y+this._target_rect.height*this.pos_percent.y),this._canvas.thickness=2*this.lineWidth/(this._canvas.scaleX+this._canvas.scaleY),this._canvas.resize=!0,0<this.min_size&&(this._min_scale=d.default.format(this.min_size/Math.min(this._target_rect.width,this._target_rect.height)))}},{key:"_init_transformer",value:function(){this._clear_transformer(),this._update_target_size(),this.contains(this._canvas)||this.addChild(this._canvas),this._canvas.syncSize=!0,this._canvas.usePolyCollision=!0,this._canvas.mouseEnabled=!0,this._canvas.breakTouch=!0,this.contains(this._btn)||(this._btn.breakTouch=!0,this.addChild(this._btn)),this._btn.addEventListener(r.default.MOUSE_DOWN,l.default.delegate(this._trans_mouse_down,this),this.name),this._canvas.addEventListener(r.default.MOUSE_DOWN,l.default.delegate(this._drag_mouse_down,this),this.name),this._canvas.matrix=this._target.matrix,this._btn.moveTo(this.globalToLocal(this._canvas.localToGlobal(this._point.x,this._point.y))),l.default.isPC&&(this.wheel_control&&this._canvas.addEventListener(r.default.MOUSE_WHEEL,l.default.delegate(this._mouse_wheel_handle,this),this.name),this.key_control&&(this.stage?this.stage:f.default.current).addEventListener(r.default.KEY_DOWN,l.default.delegate(this._key_down,this),this.name))}},{key:"_mouse_wheel_handle",value:function(t){var e,i,s;this.wheel_control&&(e=Math.max(this._min_scale,Math.abs(this._canvas.scaleX+.05*t.delta)),i=this._canvas.globalToLocal(t.mouseX,t.mouseY),this._canvas.scale=e,i=this._canvas.localToGlobal(i),s=_.default.create(h.default).set(d.default.format(this._canvas.x+t.mouseX-i.x),d.default.format(this._canvas.y+t.mouseY-i.y)),this._canvas.moveTo(s),c.default.copyTransform(this._canvas,this._target,this.relative_data),this._canvas.thickness=2*this.lineWidth/(this._canvas.scaleX+this._canvas.scaleY),this._btn.moveTo(this.globalToLocal(this._canvas.localToGlobal(this._point.x,this._point.y))),this.dispatchEvent(new v.default(w.SCALE)),_.default.remove(s))}},{key:"_key_up",value:function(){this._has_key_down&&((this.stage?this.stage:f.default.current).removeEventListener(r.default.KEY_UP,null,this.name),this.dispatchEvent(new v.default(w.MOVE))),this._has_key_down=!1}},{key:"_key_down",value:function(t){if(null!=this.stage&&null!=this._target&&this._target instanceof a.default&&null!=t&&t.target==this._canvas){var e=!1;switch(t.params){case 37:e=!0,--this._canvas.x;break;case 38:e=!0,--this._canvas.y;break;case 39:e=!0,this._canvas.x+=1;break;case 40:e=!0,this._canvas.y+=1;break;case 46:return void this.dispatchEvent(new v.default(w.DELETE))}e&&(this._has_key_down=!0,this._drag_mouse_move(null),(this.stage?this.stage:f.default.current).addEventListener(r.default.KEY_UP,l.default.delegate(this._key_up,this),this.name),t.label&&(t.label.preventDefault(),t.label.stopPropagation()))}}},{key:"_drag_mouse_down",value:function(t){this._double_finger=2==t.length,this._state=this.support_finger&&this._double_finger?3:1,this.support_finger&&this._double_finger?(this._point1=t.touchs[0],this._point2=t.touchs[1],this._target_scaleX=this._canvas.scaleX,this._target_scaleY=this._canvas.scaleY,this._target_rotation=this._canvas.rotation,this._target_angle=d.default.getAngle(this._point1.mouseX,this._point1.mouseY,this._point2.mouseX,this._point2.mouseY),this._finger_center=_.default.create(h.default).set(.5*(this._point1.mouseX+this._point2.mouseX),.5*(this._point1.mouseY+this._point2.mouseY)),this._finger_center=this._canvas.globalToLocal(this._finger_center),this._target_distance=Math.sqrt((this._point1.mouseX-this._point2.mouseX)*(this._point1.mouseX-this._point2.mouseX)+(this._point1.mouseY-this._point2.mouseY)*(this._point1.mouseY-this._point2.mouseY))):(this._cache_point.x=this._canvas.x,this._cache_point.y=this._canvas.y,(this.stage?this.stage:f.default.current).startDrag(this._canvas)),(this.stage?this.stage:f.default.current).addEventListener(r.default.MOUSE_UP,l.default.delegate(this._drag_mouse_up,this),this.name),(this.stage?this.stage:f.default.current).addEventListener(r.default.MOUSE_MOVE,l.default.delegate(this._drag_mouse_move,this),this.name)}},{key:"_drag_mouse_move",value:function(t){if(!this.support_finger||!this._double_finger)return this._target.moveTo(this._target.parent.globalToLocal(this._canvas.localToGlobal(0,0))),void this._btn.moveTo(this.globalToLocal(this._canvas.localToGlobal(this._point.x,this._point.y)));var e,i,s,n,a,r;2==t.length&&(this._point1.id!=t.touchs[0].id&&this._point2.id!=t.touchs[1].id&&this._point1.id!=t.touchs[1].id&&this._point2.id!=t.touchs[0].id||(this._point1.id!=t.touchs[0].id?(this._point1=t.touchs[1],this._point2=t.touchs[0]):(this._point1=t.touchs[0],this._point2=t.touchs[1]),e=d.default.getAngle(this._point1.mouseX,this._point1.mouseY,this._point2.mouseX,this._point2.mouseY),this._canvas.rotation=d.default.format(this._target_rotation+d.default.getDegreesFromRadians(e-this._target_angle)),r=i=Math.sqrt((this._point1.mouseX-this._point2.mouseX)*(this._point1.mouseX-this._point2.mouseX)+(this._point1.mouseY-this._point2.mouseY)*(this._point1.mouseY-this._point2.mouseY))/this._target_distance,r=Math.max(this._min_scale,d.default.format(this._target_scaleX*r)),i=Math.max(this._min_scale,d.default.format(this._target_scaleY*i)),this._canvas.scaleX=r,this._canvas.scaleY=i,s=this._canvas.localToGlobal(this._finger_center.x,this._finger_center.y),n=_.default.create(h.default).set(.5*(this._point1.mouseX+this._point2.mouseX),.5*(this._point1.mouseY+this._point2.mouseY)),a=_.default.create(h.default).set(d.default.format(this._canvas.x+n.x-s.x),d.default.format(this._canvas.y+n.y-s.y)),this._canvas.moveTo(a),c.default.copyTransform(this._canvas,this._target,this.relative_data),this._btn.moveTo(this.globalToLocal(this._canvas.localToGlobal(this._point.x,this._point.y))),this.dispatchEvent(new v.default(w.SCALING)),_.default.remove(n),_.default.remove(a)))}},{key:"_trans_mouse_down",value:function(){this._target_center=this._canvas.localToGlobal(this._center.x,this._center.y),this._move_point=this._canvas.localToGlobal(this._point.x,this._point.y),this._target_distance=h.default.distance(this._target_center,this._move_point),this._target_rotation=this._canvas.rotation,this._target_angle=d.default.getAngle(this._target_center.x,this._target_center.y,this._move_point.x,this._move_point.y),!this.rotate&&this.is_free&&this.relative_data&&0!=this.relative_data.radians&&h.default.rotate(this._move_point,this.relative_data,this.relative_data.radians,!0),this._target_scaleX=this._canvas.scaleX,this._target_scaleY=this._canvas.scaleY,this._target_offsetX=Math.max(0,this._move_point.x-this._target_center.x),this._target_offsetY=Math.max(0,this._move_point.y-this._target_center.y),(this.stage?this.stage:f.default.current).addEventListener(r.default.MOUSE_UP,l.default.delegate(this._drag_mouse_up,this),this.name),(this.stage?this.stage:f.default.current).addEventListener(r.default.MOUSE_MOVE,l.default.delegate(this._trans_mouse_move,this),this.name)}},{key:"_trans_mouse_move",value:function(t){var e,i=_.default.create(h.default).set(t.mouseX,t.mouseY);this.rotate&&(e=d.default.getAngle(this._target_center.x,this._target_center.y,i.x,i.y),this._canvas.rotation=d.default.format(this._target_rotation+d.default.getDegreesFromRadians(e-this._target_angle)));var s=void 0,n=void 0;!this.rotate&&this.is_free?(this.relative_data&&0!=this.relative_data.radians&&h.default.rotate(i,this.relative_data,this.relative_data.radians,!0),s=Math.max(0,i.x-this._target_center.x)/this._target_offsetX,n=Math.max(0,i.y-this._target_center.y)/this._target_offsetY):s=n=h.default.distance(this._target_center,i)/this._target_distance,s=Math.max(this._min_scale,d.default.format(this._target_scaleX*s)),n=Math.max(this._min_scale,d.default.format(this._target_scaleY*n)),(this.rotate||!this.is_free||s!=this._min_scale&&n!=this._min_scale)&&(this._canvas.scaleX=s,this._canvas.scaleY=n,this._redraw&&(this._canvas.thickness=2*this.lineWidth/(s+n)));var a=this._canvas.localToGlobal(this._center.x,this._center.y);this._btn.moveTo(this.rotate&&s!=this._min_scale&&n!=this._min_scale?this.globalToLocal(t.mouseX,t.mouseY):this.globalToLocal(this._canvas.localToGlobal(this._point.x,this._point.y))),this._canvas.moveTo(d.default.format(this._canvas.x+this._target_center.x-a.x),d.default.format(this._canvas.y+this._target_center.y-a.y)),c.default.copyTransform(this._canvas,this._target,this.relative_data),this._state=2,_.default.remove(i),this.dispatchEvent(new v.default(w.SCALING))}},{key:"_drag_mouse_up",value:function(){(this.stage?this.stage:f.default.current).stopDrag(),(this.stage?this.stage:f.default.current).removeEventListener(r.default.MOUSE_UP,null,this.name),(this.stage?this.stage:f.default.current).removeEventListener(r.default.MOUSE_MOVE,null,this.name),this._finger_center,this._point1=this._point2=this._target_center=this._move_point=this._target_scaleX=this._target_scaleY=this._target_distance=this._target_rotation=this._target_angle=null,1==this._state&&o.default.check()?this.dispatchEvent(new v.default(w.DOUBLE_CLICK)):1==this._state&&Math.sqrt((this._cache_point.x-this._canvas.x)*(this._cache_point.x-this._canvas.x)+(this._cache_point.y-this._canvas.y)*(this._cache_point.y-this._canvas.y))<3?this.dispatchEvent(new v.default(w.CLICK)):0<this._state&&this.dispatchEvent(new v.default(1==this._state?w.MOVE:w.SCALE)),this._state=0}},{key:"_clear_transformer",value:function(){this._canvas&&(this.contains(this._canvas)&&this._canvas.removeFromParent(!1),this._canvas.removeEventListener(r.default.MOUSE_DOWN,null,this.name),l.default.isPC&&this.wheel_control&&this._canvas.removeEventListener(r.default.MOUSE_WHEEL,null,this.name),this._canvas.reset()),this._btn&&(this._btn.removeEventListener(r.default.MOUSE_DOWN,null,this.name),this.contains(this._btn)&&this._btn.removeFromParent(!1)),l.default.isPC&&this.key_control&&(this.stage?this.stage:f.default.current).hasEventListener(r.default.KEY_DOWN,this.name)&&((this.stage?this.stage:f.default.current).removeEventListener(r.default.KEY_DOWN,null,this.name),(this.stage?this.stage:f.default.current).removeEventListener(r.default.KEY_UP,null,this.name)),this._drag_mouse_up(null)}},{key:"dispose",value:function(){(function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(s):void 0})(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"dispose",this).call(this),delete this._finger_center,this._double_finger,this._point1,this._point2,this._cache_point,this._state,this.relative_data,this._center,this._color,this._target,this._btn,this._redraw,this._canvas,delete this.support_finger,this._min_scale,this.min_size,this.wheel_control,this._has_key_down,this.key_control,this.is_free,this.pos_percent,this.rotate,this.round,this.lineWidth,this._target_center,this._move_point,this._target_angle,this._target_rotation,this._target_scaleX,this._target_scaleY,this._target_distance,this._target_offsetX,this._target_offsetY}},{key:"target",get:function(){return this._target},set:function(t){this._target!=t&&(this._target=t,this.visible=null!=t,this._target&&this._target instanceof a.default?this._init_transformer():this._clear_transformer(),this.update_relative_data())}}])&&s(g.prototype,m),b&&s(g,b),w);function w(){!function(t){if(!(t instanceof w))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return t.lineWidth=2,t.round=16,t.support_finger=!0,t.rotate=!0,t.key_control=!0,t.wheel_control=!0,t.is_free=!1,t.pos_percent={x:.5,y:.5},t.relative_data,t.min_size=0,t.adjust_pos=null,t._min_scale=t._point1=t._point2=t._finger_center=t._center=t._target=t._btn=t._redraw=t._canvas=t._color=t._point=null,t._target_center=t._move_point=t._target_angle=t._target_rotation=t._target_scaleX=t._target_scaleY=t._target_distance=t._target_offsetX=t._target_offsetY=null,t._cache_point={x:0,y:0},t._double_finger=!1,t._has_key_down=!1,t.mouseEnabled=!0,t._state=0,t}(e.default=O).className="Transformer",O.MOVE="transformer_move",O.SCALE="transformer_scale",O.CLICK="transformer_click",O.DELETE="transformer_delete",O.SCALING="transformer_scaling",O.DOUBLE_CLICK="transformer_double_click"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n,a,r,o=i(0),l=o&&o.__esModule?o:{default:o},h=(n=u,r=[{key:"getQuery",value:function(t){var e=0<arguments.length&&void 0!==t?t:0,i=1==e?location.search.substr(1):location.hash.substr(1),s=l.default.parseParams(i);if(0!=e)return s;var n=l.default.parseParams(location.search.substr(1));return Object.assign(s,n)}},{key:"copy",value:function(t){if(t){var e=document.createElement("input");document.body.appendChild(e),e.value=t,e.focus(),e.select();try{document.execCommand("copy")}catch(t){}e.blur(),document.body.removeChild(e)}}}],(a=null)&&s(n.prototype,a),r&&s(n,r),u);function u(){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this)}e.default=h},function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}Object.defineProperty(e,"__esModule",{value:!0});var n=(s(a.prototype,[{key:"close",value:function(){this.server_timeout_id&&clearTimeout(this.server_timeout_id),this.heart_timeout_id&&clearTimeout(this.heart_timeout_id),this.timeout_id&&clearTimeout(this.timeout_id),this.timeout_id=this.server_timeout_id=this.heart_timeout_id=0,this.lock_reconnect=!1,this.isQuit=!0,this.ws&&this.ws.close(),this.currentList=null}},{key:"initWebpack",value:function(t){var e=0<arguments.length&&void 0!==t?t:null;this.uri=e||this.uri,this.uri&&(this.ws=new WebSocket(this.uri),this.ws.onopen=this.wsOpenHandler.bind(this),this.ws.onerror=this.wsErrorHandler.bind(this),this.ws.onclose=this.wsCloseHandler.bind(this),this.ws.onmessage=this.wsMessageHandler.bind(this),this.timeout_id&&clearTimeout(this.timeout_id),this.timeout_id=0,console.log("WebSocket init:"+this.uri))}},{key:"reconnect",value:function(){var t=this;this.lock_reconnect||this.isQuit||(this.lock_reconnect=!0,this.timeout_id&&clearTimeout(this.timeout_id),this.timeout_id=setTimeout(function(){t.initWebpack(),t.lock_reconnect=!1,console.log("...")},this.time))}},{key:"reset",value:function(){this.server_timeout_id&&clearTimeout(this.server_timeout_id),this.heart_timeout_id&&clearTimeout(this.heart_timeout_id),this.heart_timeout_id=this.server_timeout_id=0,this.start()}},{key:"start",value:function(){this.heart_timeout_id&&clearTimeout(this.heart_timeout_id),this.heart_timeout_id=0,this.isQuit||(this.heart_timeout_id=setTimeout(this.heartHandler.bind(this),this.delay))}},{key:"heartHandler",value:function(){var t=this;if(1==this.ws.readyState)this.ws.send(this.heart);else{if(this.lock_reconnect)return;this.reconnect()}this.server_timeout_id&&clearTimeout(this.server_timeout_id),this.server_timeout_id=setTimeout(function(){t.ws.close()},this.delay)}},{key:"wsOpenHandler",value:function(){if(this.start(),this.currentList&&this.currentList.length)for(;this.currentList.length;)this.ws.send(this.currentList.shift())}},{key:"wsMessageHandler",value:function(t){var e=t.data;try{e=JSON.parse(e)}catch(t){console.log(e),e=null}e&&this.callback&&this.callback(e),this.reset()}},{key:"wsErrorHandler",value:function(t){console.log("WebSocket Error!>"),console.log(t),this.reconnect()}},{key:"wsCloseHandler",value:function(){this.reconnect()}},{key:"send",value:function(t){if(!t||!this.ws)return!1;if(1==this.ws.readyState)this.ws.send(JSON.stringify(t));else{if(this.currentList||(this.currentList=[]),5<this.currentList.length)return!1;this.currentList.push(JSON.stringify(t)),this.heartHandler()}return!0}}]),a);function a(){!function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.ws=null,this.lock_reconnect=!1,this.server_timeout_id=0,this.heart_timeout_id=0,this.timeout_id=0,this.delay=8e3,this.time=4e3,this.heart="0000",this.isQuit=!1,this.uri=null,this.callback=null,this.currentList=null}(e.default=n).className="MySocket"}],n.c=a,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=75))}]);